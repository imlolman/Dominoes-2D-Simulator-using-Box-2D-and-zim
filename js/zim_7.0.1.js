// ZIM js Interactive Media framework http://zimjs.com by Dan Zen http://danzen.com (c) 2018
// Also see http://zimjs.com/distill to minify only the functions in your app
// free to use - donations welcome of course! http://zimjs.com/donate

"undefined"==typeof zon&&(zon=!1),"undefined"==typeof zns&&(zns=!1);var zog=console.log.bind(console);function zid(e){return z_d("1"),document.getElementById(e)}function zss(e){if(z_d("2"),document.getElementById(e))return document.getElementById(e).style;zon&&zog("zim wrap - zss(): id not found")}function zgo(e,t,o,n,i,r){if(z_d("3"),!(zot(t)&&""!=t||"_self"==t)){var a="";return o&&(a+="width="+o+","),n&&(a+="height="+n+","),i&&(a+="fullscreen=yes,"),r&&(a+="modal=yes,alwaysRaised=yes"),window.open(e,t,a)}window.location.href=e}function zum(e){if(z_d("4"),!zot(e))return Number(String(e).replace(/[^\d\.\-]/g,""))}function zot(e){return null==e}function zop(e){z_d("5"),zot(e)||(e.stopImmediatePropagation&&e.stopImmediatePropagation(),window.event&&(window.event.cancelBubble=!0))}function zil(){z_d("6");var e=function(e){e||(e=event),e.keyCode&&32<=e.keyCode&&e.keyCode<=40&&e.preventDefault()},t=function(e){e||(e=event),e.preventDefault()},o=t;return window.addEventListener("keydown",e),window.addEventListener("wheel",t),window.addEventListener("DOMMouseScroll",o),[e,t,o]}function zet(i){return z_d("6.1"),new function(){var a=this;this.on=function(e,t){if(!(zot(i)||zot(e)||zot(t)))for(var o=a.tags,n=0;n<o.length;n++)o[n].addEventListener(e,t)},this.off=function(e,t){if(!(zot(i)||zot(e)||zot(t)))for(var o=a.tags,n=0;n<o.length;n++)o[n].removeEventListener(e,t)},Object.defineProperty(a,"tags",{get:function(){return zot(i)?[]:"string"==typeof i||i instanceof String?document.querySelectorAll(i):"string"==typeof i.innerHTML?[i]:[]},set:function(e){}}),this.css=function(e,t){for(var o=a.tags,n=0;n<o.length;n++)if(1==arguments.length&&e.constructor==={}.constructor)for(var i in e)o[n].style[i]=e[i];else{if(1==arguments.length)return a.tags[0].style[e];o[n].style[e]=t}},this.prop=function(e,t){if(!zot(e)){for(var o=a.tags,n=[],i=0;i<o.length;i++)if(zot(t))if(e.constructor==={}.constructor)for(var r in e)o[i][r]=e[r];else n.push(o[i][e]);else o[i][e]=t;return zot(t)?n:void 0}}}}function isDUO(e){return 1==e.length&&null!=e[0]&&e[0].constructor==={}.constructor}function zob(e,t,o,n){if(isDUO(t)){z_d("7");var i,r,a,s=t[0],l=zot(o)?e.toString().split(/\n/,1)[0].match(/\((.*)\)/)[1].replace(/\s+/g,"").split(","):o.replace(/\s+/g,"").split(","),c=[];for(i=0;i<l.length;i++)r=l[i].split("=")[0],l[i]=r,c.push(s[r]);for(i in s)l.indexOf(i)<0&&zon&&zog(e,"bad argument "+i);return!(a=e.prototype.isPrototypeOf(n)?new(e.bind.apply(e,[null].concat(c))):e.apply(null,c))||a}}function zik(e){if(z_d("7.5"),!zot(e)){if(e.constructor==={}.constructor||Array.isArray(e)||"function"==typeof e){if(Array.isArray(e))return zik(e[Math.floor(Math.random()*e.length)]);if(e.constructor==={}.constructor)return zot(e.noZik)?zot(e.max)?e:(zot(e.integer)&&(e.integer=!1),zim.rand(e.min,e.max,e.integer,e.negative)):e.noZik;if("function"==typeof e)return zik(e())}return e}}var zta=console.table.bind(console);function z_d(e){zim&&(zim.DISTILL||window.DISTILL)&&zim.distillery.push(e)}function zimify(e,t){z_d("83.3");var o={drag:function(e,t,o,n,i,r,a,s,l,c,d,u,h){return isDUO(arguments)?(e.obj=this,zim.drag(e)):zim.drag(this,e,t,o,n,i,r,a,s,l,c,d,u,h)},noDrag:function(){return zim.noDrag(this)},dragRect:function(e){return zim.dragRect(this,e)},transform:function(e,t,o,n,i,r,a,s,l,c,d,u,h,f,g,p,m,z,v,b,y,w){return isDUO(arguments)?(e.obj=this,zim.transform(e)):zim.transform(this,e,t,o,n,i,r,a,s,l,c,d,u,h,f,g,p,m,z,v,b,y,w)},setSwipe:function(e){return zim.setSwipe(this,e)},gesture:function(e,t,o,n,i,r,a,s,l,c,d,u,h){return isDUO(arguments)?(e.obj=this,zim.gesture(e)):zim.gesture(this,e,t,o,n,i,r,a,s,l,c,d,u,h)},noGesture:function(e,t,o){if(isDUO(arguments))return e.obj=this,zim.noGesture(e);zim.noGesture(this,e,t,o)},gestureRect:function(e,t){return zim.gestureRect(this,e,t)},hitTestPoint:function(e,t,o){return zim.hitTestPoint(this,e,t,o)},hitTestReg:function(e,t){return zim.hitTestReg(this,e,t)},hitTestRect:function(e,t,o){return zim.hitTestRect(this,e,t,o)},hitTestCircle:function(e,t,o){return zim.hitTestCircle(this,e,t,o)},hitTestCircles:function(e,t){return zim.hitTestCircles(this,e,t)},hitTestBounds:function(e,t,o){return zim.hitTestBounds(this,e,t,o)},boundsToGlobal:function(e,t,o){return zim.boundsToGlobal(this,e,t,o)},hitTestGrid:function(e,t,o,n,i,r,a,s,l,c,d,u){return zim.hitTestGrid(this,e,t,o,n,i,r,a,s,l,c,d,u)},animate:function(e,t,o,n,i,r,a,s,l,c,d,u,h,f,g,p,m,z,v,b,y,w,x,C,T,A,k,E,M,S,j,I,O){return isDUO(arguments)?(e.target=this,zim.animate(e)):zim.animate(this,e,t,o,n,i,r,a,s,l,c,d,u,h,f,g,p,m,z,v,b,y,w,x,C,T,A,k,E,M,S,j,I,O)},pauseAnimate:function(){return this},stopAnimate:function(){return this},wiggle:function(e,t,o,n,i,r,a,s,l,c,d,u,h){return isDUO(arguments)?(e.target=this,zim.wiggle(e)):zim.wiggle(this,e,t,o,n,i,r,a,s,l,c,d,u,h)},loop:function(e,t,o,n,i){return zim.loop(this,e,t,o,n,i)},copyMatrix:function(e){return zim.copyMatrix(this,e)},cur:function(e){return zim.cur(this,e)},sha:function(e,t,o,n){return zim.sha(this,e,t,o,n)},pos:function(e,t,o,n,i){return isDUO(arguments)?(e.obj=this,zim.pos(e)):zim.pos(this,e,t,o,n,i)},mov:function(e,t){return zim.mov(this,e,t)},top:function(){return zim.top(this)},bot:function(){return zim.bot(this)},dep:function(e){return zim.dep(this,e)},alp:function(e){return zim.alp(this,e)},rot:function(e){return zim.rot(this,e)},siz:function(e,t,o){return zim.siz(this,e,t,o)},ske:function(e,t){return zim.ske(this,e,t)},reg:function(e,t){return zim.reg(this,e,t)},sca:function(e,t){return zim.sca(this,e,t)},scaleTo:function(e,t,o,n,i){return isDUO(arguments)?(e.obj=this,zim.scaleTo(e)):zim.scaleTo(this,e,t,o,n,i)},fit:function(e,t,o,n,i){return isDUO(arguments)?(e.obj=this,zim.fit(e)):zim.fit(this,e,t,o,n,i)},outline:function(e,t){return isDUO(arguments)?(e.obj=this,zim.outline(e)):zim.outline(this,e,t)},addTo:function(e,t){return zim.addTo(this,e,t)},removeFrom:function(e){return zim.removeFrom(this,e)},added:function(e,t,o){return zim.added(this,e,t,o)},centerReg:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.centerReg(e)):zim.centerReg(this,e,t,o)},center:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.center(e)):zim.center(this,e,t,o)},place:function(e){return zim.place(this,e)},placeReg:function(e){return zim.placeReg(this,e)},expand:function(e,t){return zim.expand(this,e,t)},setMask:function(e,t){return zim.setMask(this,e,t)},cloneProps:function(e){return e.alpha=this.alpha,e.rotation=this.rotation,e.mouseEnabled=this.mouseEnabled,e.tickEnabled=this.tickEnabled,e.name=this.name,e.regX=this.regX,e.regY=this.regY,e.visible=this.visible,e.shadow=this.shadow,zim.copyMatrix(e,this),e.compositeOperation=this.compositeOperation,e.snapToPixel=this.snapToPixel,e.filters=null==this.filters?null:this.filters.slice(0),e.mask=this.mask,e.hitArea=this.hitArea,this._bounds&&e.setBounds(this._bounds.x,this._bounds.y,this._bounds.width,this._bounds.height),e},cloneChildren:function(e){e.children.length&&e.removeAllChildren();for(var t=e.children,o=0,n=this.children.length;o<n;o++){var i=this.children[o].clone();i.parent=e,t.push(i)}return e}};if(!zot(t)){t=[];for(var n in o)t.push(n);return t}for(var i in o)o.hasOwnProperty(i)&&(e[i]=o[i]);return Object.defineProperty(e,"width",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:e.width*this.scaleX},set:function(e){var t=this.getBounds();if(zot(t)||0==t.width)zog("width needs bounds set with setBounds()");else{var o=e/t.width;this.scaleX=this.scaleY=o}}}),Object.defineProperty(e,"height",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:e.height*this.scaleY},set:function(e){var t=this.getBounds();if(zot(t)||0==t.height)zog("height needs bounds set with setBounds()");else{var o=e/t.height;this.scaleX=this.scaleY=o}}}),Object.defineProperty(e,"widthOnly",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:e.width*this.scaleX},set:function(e){var t=this.getBounds();if(zot(t)||0==t.width)zog("widthOnly needs bounds set with setBounds()");else{var o=e/t.width;this.scaleX=o}}}),Object.defineProperty(e,"heightOnly",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:e.height*this.scaleY},set:function(e){var t=this.getBounds();if(zot(t)||0==t.height)zog("heightOnly needs bounds set with setBounds()");else{var o=e/t.height;this.scaleY=o}}}),Object.defineProperty(e,"depth",{enumerable:!0,get:function(){return this._depth},set:function(e){if(this._depth=e,!zot(this.vrChannel)){var t=this.vrParallaxDistance?e*this.vrParallax*this.vrParallaxDistance:0;"left"==this.vrChannel?this.x=this.vrStartX+e+t:"right"==this.vrChannel&&(this.x=this.vrStartX-e+t)}}}),Object.defineProperty(e,"blendMode",{enumerable:!0,get:function(){return this.compositeOperation},set:function(e){this.compositeOperation=e}}),e}function zimplify(e){z_d("83.35"),document.Window=Window,document.Blob=Blob,zot(e)&&(e=[]),Array.isArray(e)||(e=[e]);var t=zimify(null,!0),o=["loop","stopAnimate","pauseAnimate","animate","wiggle"];for(var n in zim)(-1==t.indexOf(n)||0<=o.indexOf(n))&&-1==e.indexOf(n)&&(window[n]=zim[n])}var zim=function(m){return m.Wonder=function(n,i,r,a,e){var t;if(t=zob(m.Wonder,arguments,"wid, client, app, notes, server",this))return t;if(z_d("82"),zot(n))zog("zim.Wonder() - please provide Wonder ID (see http://zimjs.com/wonder/)");else{zot(e)&&(e="http://54.237.229.197:3001/wonder");var o=this;zot(m.wonderSession)&&(m.wonderSession="W"+m.rand(1e5,999999));var s,l=[],c=setInterval(g,1e3),d=0,u=setInterval(function(){28<d&&(l.push({id:n,c:i,a:r,n:a,k:s,t:"e",v:"frequency max - terminated",s:m.wonderSession}),zog("zim.Wonder() - frequency max - terminated"),o.dispose()),d=0},3e4);this.countsOff={},this.timesOff={},this.ordersOff={},this.count=function(e){p(e,"count")&&(s=e,l.push({id:n,c:i,a:r,n:a,k:e,t:"c",v:1,s:m.wonderSession}))};var h={};this.timeStart=function(e){p(e,"time")&&(o.timeEnd(e),h[s=e]=(new Date).getTime())};var f={};this.timePause=function(e){p(e,"time")&&(f[e]||(f[e]=(new Date).getTime()))},this.timeUnpause=function(e){if(p(e,"time")&&f[e]){var t=(new Date).getTime()-f[e];h[e]&&(h[e]+=t),delete f[e]}},this.timeEnd=function(e){if(p(e,"time")&&h[e]){var t=f[e]?f[e]:(new Date).getTime(),o=Math.round((t-h[e])/1e3);delete f[e],delete h[e],l.push({id:n,c:i,a:r,n:a,k:e,t:"t",v:o,s:m.wonderSession})}},this.order=function(e,t){p(e,"order")&&(s=e,zot(t)?zog("zim.Wonder order() - please provide an item"):l.push({id:n,c:i,a:r,n:a,k:e,t:"o",v:t,s:m.wonderSession}))},this.countOff=function(e){o.countsOff[e]=1},this.countOn=function(e){delete o.countOff[e]},this.timeOff=function(e){o.timesOff[e]=1},this.timeOn=function(e){delete o.timesOff[e]},this.orderOff=function(e){o.ordersOff[e]=1},this.orderOn=function(e){delete o.ordersOff[e]},this.dispose=function(){return g(),clearInterval(c),clearInterval(u),!0}}function g(){0<l.length&&(m.async(e+"?wonder="+JSON.stringify(l)),l=[],d++)}function p(e,t){return zot(e)?(zog("zim.Wonder "+t+" - please provide a keyword"),!1):!o[t+"sOff"][e]}},m}((zim=function(qe){if(qe.shuffle=function(e){if(z_d("8"),!zot(e)){var t,o,n=e.length;if(0==n)return e;for(;--n;)t=Math.floor(Math.random()*(n+1)),o=e[n],e[n]=e[t],e[t]=o;return e}},qe.rand=function(e,t,o,n){return z_d("9"),zot(e)&&zot(t)?Math.random():((zot(e)||isNaN(e))&&(e=0),(zot(t)||isNaN(t))&&(t=0),e%1==0&&t%1==0||(o=!1),zot(o)&&(o=!0),n&&.5<Math.random()&&(e*=-1,t*=-1),o&&(t<e?e++:e<t&&t++),0==e&&0==t?0:(i=0==t?Math.random()*e:Math.min(e,t)+Math.random()*(Math.max(e,t)-Math.min(e,t)),o?Math.floor(i):i));var i},qe.loop=function(e,t,o,n,i,r){var a;if(a=zob(qe.loop,arguments,"obj, call, reverse, step, start, end"))return a;if(z_d("9.5"),!zot(e)&&!zot(t)){zot(o)&&(o=!1),(zot(n)||n<=0)&&(n=1);var s="number"==typeof e?"number":e.constructor===Array?"array":e.constructor==={}.constructor?"object":e instanceof NodeList?"nodelist":"invalid";if("invalid"!=s)if("number"==s||"array"==s||"nodelist"==s){if(0==(d=f((u="number"==s?e:e.length)-1)))return;if(o)for(var l=i;r<=l;l-=n){if("number"==s)var c=t(l,d,i,r,e);else if("array"==s)c=t(e[l],l,d,i,r,e);else c=t(e.item(l),l,d,i,r,e);if(void 0!==c)return c}else for(l=i;l<=r;l+=n){if("number"==s)c=t(l,d,i,r,e);else if("array"==s)c=t(e[l],l,d,i,r,e);else c=t(e.item(l),l,d,i,r,e);if(void 0!==c)return c}}else if("object"==s){var d,u=0,h=[];for(var l in e)u++,h.push(l);if(0==(d=f(u-1)))return;if(o)for(l=i;r<=l;l-=n){if(void 0!==(c=t(h[l],e[h[l]],l,d,i,r,e)))return c}else for(l=i;l<=r;l+=n){if(void 0!==(c=t(h[l],e[h[l]],l,d,i,r,e)))return c}}}function f(e){return zot(i)&&(i=o?e:0),zot(r)&&(r=o?0:e),o&&i<r||!o&&r<i?0:(i<0&&r)<0||e<i&&e<r?0:(i=Math.max(0,Math.min(i,e)),r=Math.max(0,Math.min(r,e)),Math.floor((o?i-r:r-i)/n)+1)}},qe.timeout=function(t,o){if(z_d("9.7"),!zot(o)&&"function"==typeof o){zot(t)&&(t=1e3),t=zik(t);var n={startTime:Date.now(),time:0,paused:!1,done:!1},i=n.startTime;return n.pause=function(e){zot(e)&&(e=!0),e?cancelAnimationFrame(n.rid):(i=Date.now(),r()),n.paused=e},n.clear=function(){for(var e in n&&cancelAnimationFrame(n.rid),n)delete n[e];n.pause=function(){},n.clear=function(){}},r(),n}function r(){var e=Date.now();if(n.time+=e-i,i=e,n.time>=t)return n.done=!0,o(n),void n.clear();n.rid=requestAnimationFrame(r)}},qe.interval=function(e,o,t,n){if(z_d("9.8"),!zot(o)&&"function"==typeof o&&(zot(e)&&(e=1e3),zot(n)&&(n=!1),zot(t)||!(isNaN(t)||t<=0))){zot(t)&&(t=-1);var i,r={count:0,total:t,paused:!1,time:e,active:!0};return n&&setTimeout(function(){o(r),s()},10),r.pause=function(e,t){zot(e)&&(e=!0),e?(clearTimeout(i),clearTimeout(r.id),cancelAnimationFrame(r.rid),r.pauseTimeLeft=r.interval-(Date.now()-r.startTime)):(i=setTimeout(function(){r.count++,o(r),a(),s()},t?0:r.pauseTimeLeft),r.pauseTimeLeft=null),r.paused=e},r.clear=function(){r.active=!1,clearTimeout(i),cancelAnimationFrame(r.rid),clearTimeout(r.id);var e=r.count;for(var t in r)delete r[t];r.active=!1,r.count=e,r.pause=function(){},r.clear=function(){}},a(),r}function a(){r.startTime=Date.now(),r.interval=zik(r.time),r.id=setTimeout(function(){r.paused||r.active&&(r.rid=requestAnimationFrame(a),r.count++,o(r),s())},r.interval)}function s(){-1!=t&&r.count>=(n?r.total-1:r.total)&&r.clear()}},qe.copy=function(e,t){if(z_d("10"),zot(t)&&(t=!1),null==e||!(e instanceof Array||e.constructor=={}.constructor))return t&&e.clone?e.clone():e;if(e instanceof Array){for(var o=[],n=0;n<e.length;n++)o[n]=qe.copy(e[n],t);return o}if(e.constructor=={}.constructor){var i={};for(var r in e){var a=qe.copy(e[r],t);e.hasOwnProperty(r)&&(i[r]=a)}return i}},qe.arraysEqual=function(e,t,o){if(z_d("11"),zot(e)||zot(t))return!1;if(zot(o)&&(o=!0),e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]instanceof Array&&t[n]instanceof Array){if(!qe.arraysEqual(e[n],t[n],o))return!1}else{if(o&&e[n]!=t[n])return!1;if(!o)return qe.arraysEqual(e.sort(),t.sort(),!0)}return!0},qe.isEmpty=function(e){if(z_d("11.5"),!zot(e)){var t=0;for(var o in e){t++;break}return 0==t}},qe.isJSON=function(e){z_d("11.6");try{return JSON.parse(e).constructor=={}.constructor}catch(e){return!1}},qe.merge=function(){z_d("12");var e,t,o={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&(o[t]=arguments[e][t]);return o},qe.zut=function(e){if(zot(e)||"object"==typeof e)return!0},qe.decimals=function(e,t,o,n,i,r,a){if(z_d("13"),zot(e))return 0;zot(t)&&(t=1),zot(o)&&(o=0),zot(n)&&(n=0),zot(n)&&(n=0),zot(i)&&(i=!0),zot(r)&&(r=!1);var s=Math.round(e*Math.pow(10,t))/Math.pow(10,t),l=qe.sign(s);if(0<o){var c=String(s).indexOf("."),d=String(s).length;c<0&&(c=d++,s+=".");for(var u=0;u<o-(d-c-1);u++)s+="0"}if(0<n){-1==l&&(s=s.substr(1,s.length-1));c=String(s).indexOf("."),d=String(s).length;var h=c<0?d:c;for(u=0;u<n-h;u++)s="0"+s;-1==l&&(s="-"+s)}return 0<o+n&&!i&&0==Number(s)&&(s=0),r&&(s=String(s).replace(".",":")),qe.zut(a)?s:null},qe.sign=function(e){return z_d("13.1"),e?e<0?-1:1:0},qe.constrain=function(e,t,o,n){if(z_d("13.2"),!zot(e))return zot(t)&&(t=0),zot(o)&&(o=Number.MAX_VALUE),o<t&&(o=max2=t,t=max2),zot(n)&&(n=!1),n&&e<0?Math.max(-o,Math.min(e,-t)):Math.max(t,Math.min(e,o))},qe.dist=function(e,t,o,n){if(z_d("13.3"),!zot(e)&&!zot(t))return zot(o)&&(o=0),zot(n)&&(n=0),Math.sqrt(Math.pow(o-e,2)+Math.pow(n-t,2))},qe.angle=function(e,t,o,n){if(z_d("13.4"),!zot(e)&&!zot(t))return zot(o)&&(o=e,e=0),zot(n)&&(n=t,t=0),(180*Math.atan2(n-t,o-e)/Math.PI+360)%360},qe.makeID=function(e,t,o){var n;z_d("13.5"),zot(e)&&(e="mixed"),zot(t)&&(t=5),zot(o)&&(o="uppercase");var i=[2,3,4,5,6,7,8,9],r="abcdefghjkmnpqrstuvwxyz".split("");n=e.constructor===Array?e:"numbers"==e?i:"letters"==e?r:i.concat(r);for(var a,s,l="",c=0;c<t;c++)a=n[Math.floor(Math.random()*n.length)],s=Math.random(),"uppercase"==o||"mixed"==o&&.5<s?a.toUpperCase&&(a=a.toUpperCase()):a.toLowerCase&&(a=a.toLowerCase()),l+=String(a);return l},qe.smoothStep=function(e,t,o){z_d("13.7");var n=qe.constrain((e-t)/(o-t),0,1);return n*n*n*(n*(6*n-15)+10)},qe.Noise=function(e){"use strict";z_d("13.9"),zot(e)&&(e=1e6*Math.random());var t=e;this.seed=e;var W=this,N={};function o(e){var t=new Uint32Array(1);return t[0]=1664525*e[0]+1013904223,t}function n(e,t,o){this.dx=-t-e*N.SQUISH_2D,this.dy=-o-e*N.SQUISH_2D,this.xsb=t,this.ysb=o}function i(e,t,o,n){this.dx=-t-e*N.SQUISH_3D,this.dy=-o-e*N.SQUISH_3D,this.dz=-n-e*N.SQUISH_3D,this.xsb=t,this.ysb=o,this.zsb=n}function r(e,t,o,n,i){this.dx=-t-e*N.SQUISH_4D,this.dy=-o-e*N.SQUISH_4D,this.dz=-n-e*N.SQUISH_4D,this.dw=-i-e*N.SQUISH_4D,this.xsb=t,this.ysb=o,this.zsb=n,this.wsb=i}N.NORM_2D=1/47,N.NORM_3D=1/103,N.NORM_4D=1/30,N.SQUISH_2D=(Math.sqrt(3)-1)/2,N.SQUISH_3D=(Math.sqrt(4)-1)/3,N.SQUISH_4D=(Math.sqrt(5)-1)/4,N.STRETCH_2D=(1/Math.sqrt(3)-1)/2,N.STRETCH_3D=(1/Math.sqrt(4)-1)/3,N.STRETCH_4D=(1/Math.sqrt(5)-1)/4,N.base2D=[[1,1,0,1,0,1,0,0,0],[1,1,0,1,0,1,2,1,1]],N.base3D=[[0,0,0,0,1,1,0,0,1,0,1,0,1,0,0,1],[2,1,1,0,2,1,0,1,2,0,1,1,3,1,1,1],[1,1,0,0,1,0,1,0,1,0,0,1,2,1,1,0,2,1,0,1,2,0,1,1]],N.base4D=[[0,0,0,0,0,1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,4,1,1,1,1],[1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1]],N.gradients2D=[5,2,2,5,-5,2,-2,5,5,-2,2,-5,-5,-2,-2,-5],N.gradients3D=[-11,4,4,-4,11,4,-4,4,11,11,4,4,4,11,4,4,4,11,-11,-4,4,-4,-11,4,-4,-4,11,11,-4,4,4,-11,4,4,-4,11,-11,4,-4,-4,11,-4,-4,4,-11,11,4,-4,4,11,-4,4,4,-11,-11,-4,-4,-4,-11,-4,-4,-4,-11,11,-4,-4,4,-11,-4,4,-4,-11],N.gradients4D=[3,1,1,1,1,3,1,1,1,1,3,1,1,1,1,3,-3,1,1,1,-1,3,1,1,-1,1,3,1,-1,1,1,3,3,-1,1,1,1,-3,1,1,1,-1,3,1,1,-1,1,3,-3,-1,1,1,-1,-3,1,1,-1,-1,3,1,-1,-1,1,3,3,1,-1,1,1,3,-1,1,1,1,-3,1,1,1,-1,3,-3,1,-1,1,-1,3,-1,1,-1,1,-3,1,-1,1,-1,3,3,-1,-1,1,1,-3,-1,1,1,-1,-3,1,1,-1,-1,3,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,3,1,1,-1,1,3,1,-1,1,1,3,-1,1,1,1,-3,-3,1,1,-1,-1,3,1,-1,-1,1,3,-1,-1,1,1,-3,3,-1,1,-1,1,-3,1,-1,1,-1,3,-1,1,-1,1,-3,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,3,1,-1,-1,1,3,-1,-1,1,1,-3,-1,1,1,-1,-3,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3],N.lookupPairs2D=[0,1,1,0,4,1,17,0,20,2,21,2,22,5,23,5,26,4,39,3,42,4,43,3],N.lookupPairs3D=[0,2,1,1,2,2,5,1,6,0,7,0,32,2,34,2,129,1,133,1,160,5,161,5,518,0,519,0,546,4,550,4,645,3,647,3,672,5,673,5,674,4,677,3,678,4,679,3,680,13,681,13,682,12,685,14,686,12,687,14,712,20,714,18,809,21,813,23,840,20,841,21,1198,19,1199,22,1226,18,1230,19,1325,23,1327,22,1352,15,1353,17,1354,15,1357,17,1358,16,1359,16,1360,11,1361,10,1362,11,1365,10,1366,9,1367,9,1392,11,1394,11,1489,10,1493,10,1520,8,1521,8,1878,9,1879,9,1906,7,1910,7,2005,6,2007,6,2032,8,2033,8,2034,7,2037,6,2038,7,2039,6],N.lookupPairs4D=[0,3,1,2,2,3,5,2,6,1,7,1,8,3,9,2,10,3,13,2,16,3,18,3,22,1,23,1,24,3,26,3,33,2,37,2,38,1,39,1,41,2,45,2,54,1,55,1,56,0,57,0,58,0,59,0,60,0,61,0,62,0,63,0,256,3,258,3,264,3,266,3,272,3,274,3,280,3,282,3,2049,2,2053,2,2057,2,2061,2,2081,2,2085,2,2089,2,2093,2,2304,9,2305,9,2312,9,2313,9,16390,1,16391,1,16406,1,16407,1,16422,1,16423,1,16438,1,16439,1,16642,8,16646,8,16658,8,16662,8,18437,6,18439,6,18469,6,18471,6,18688,9,18689,9,18690,8,18693,6,18694,8,18695,6,18696,9,18697,9,18706,8,18710,8,18725,6,18727,6,131128,0,131129,0,131130,0,131131,0,131132,0,131133,0,131134,0,131135,0,131352,7,131354,7,131384,7,131386,7,133161,5,133165,5,133177,5,133181,5,133376,9,133377,9,133384,9,133385,9,133400,7,133402,7,133417,5,133421,5,133432,7,133433,5,133434,7,133437,5,147510,4,147511,4,147518,4,147519,4,147714,8,147718,8,147730,8,147734,8,147736,7,147738,7,147766,4,147767,4,147768,7,147770,7,147774,4,147775,4,149509,6,149511,6,149541,6,149543,6,149545,5,149549,5,149558,4,149559,4,149561,5,149565,5,149566,4,149567,4,149760,9,149761,9,149762,8,149765,6,149766,8,149767,6,149768,9,149769,9,149778,8,149782,8,149784,7,149786,7,149797,6,149799,6,149801,5,149805,5,149814,4,149815,4,149816,7,149817,5,149818,7,149821,5,149822,4,149823,4,149824,37,149825,37,149826,36,149829,34,149830,36,149831,34,149832,37,149833,37,149842,36,149846,36,149848,35,149850,35,149861,34,149863,34,149865,33,149869,33,149878,32,149879,32,149880,35,149881,33,149882,35,149885,33,149886,32,149887,32,150080,49,150082,48,150088,49,150098,48,150104,47,150106,47,151873,46,151877,45,151881,46,151909,45,151913,44,151917,44,152128,49,152129,46,152136,49,152137,46,166214,43,166215,42,166230,43,166247,42,166262,41,166263,41,166466,48,166470,43,166482,48,166486,43,168261,45,168263,42,168293,45,168295,42,168512,31,168513,28,168514,31,168517,28,168518,25,168519,25,280952,40,280953,39,280954,40,280957,39,280958,38,280959,38,281176,47,281178,47,281208,40,281210,40,282985,44,282989,44,283001,39,283005,39,283208,30,283209,27,283224,30,283241,27,283256,22,283257,22,297334,41,297335,41,297342,38,297343,38,297554,29,297558,24,297562,29,297590,24,297594,21,297598,21,299365,26,299367,23,299373,26,299383,23,299389,20,299391,20,299584,31,299585,28,299586,31,299589,28,299590,25,299591,25,299592,30,299593,27,299602,29,299606,24,299608,30,299610,29,299621,26,299623,23,299625,27,299629,26,299638,24,299639,23,299640,22,299641,22,299642,21,299645,20,299646,21,299647,20,299648,61,299649,60,299650,61,299653,60,299654,59,299655,59,299656,58,299657,57,299666,55,299670,54,299672,58,299674,55,299685,52,299687,51,299689,57,299693,52,299702,54,299703,51,299704,56,299705,56,299706,53,299709,50,299710,53,299711,50,299904,61,299906,61,299912,58,299922,55,299928,58,299930,55,301697,60,301701,60,301705,57,301733,52,301737,57,301741,52,301952,79,301953,79,301960,76,301961,76,316038,59,316039,59,316054,54,316071,51,316086,54,316087,51,316290,78,316294,78,316306,73,316310,73,318085,77,318087,77,318117,70,318119,70,318336,79,318337,79,318338,78,318341,77,318342,78,318343,77,430776,56,430777,56,430778,53,430781,50,430782,53,430783,50,431e3,75,431002,72,431032,75,431034,72,432809,74,432813,69,432825,74,432829,69,433032,76,433033,76,433048,75,433065,74,433080,75,433081,74,447158,71,447159,68,447166,71,447167,68,447378,73,447382,73,447386,72,447414,71,447418,72,447422,71,449189,70,449191,70,449197,69,449207,68,449213,69,449215,68,449408,67,449409,67,449410,66,449413,64,449414,66,449415,64,449416,67,449417,67,449426,66,449430,66,449432,65,449434,65,449445,64,449447,64,449449,63,449453,63,449462,62,449463,62,449464,65,449465,63,449466,65,449469,63,449470,62,449471,62,449472,19,449473,19,449474,18,449477,16,449478,18,449479,16,449480,19,449481,19,449490,18,449494,18,449496,17,449498,17,449509,16,449511,16,449513,15,449517,15,449526,14,449527,14,449528,17,449529,15,449530,17,449533,15,449534,14,449535,14,449728,19,449729,19,449730,18,449734,18,449736,19,449737,19,449746,18,449750,18,449752,17,449754,17,449784,17,449786,17,451520,19,451521,19,451525,16,451527,16,451528,19,451529,19,451557,16,451559,16,451561,15,451565,15,451577,15,451581,15,451776,19,451777,19,451784,19,451785,19,465858,18,465861,16,465862,18,465863,16,465874,18,465878,18,465893,16,465895,16,465910,14,465911,14,465918,14,465919,14,466114,18,466118,18,466130,18,466134,18,467909,16,467911,16,467941,16,467943,16,468160,13,468161,13,468162,13,468163,13,468164,13,468165,13,468166,13,468167,13,580568,17,580570,17,580585,15,580589,15,580598,14,580599,14,580600,17,580601,15,580602,17,580605,15,580606,14,580607,14,580824,17,580826,17,580856,17,580858,17,582633,15,582637,15,582649,15,582653,15,582856,12,582857,12,582872,12,582873,12,582888,12,582889,12,582904,12,582905,12,596982,14,596983,14,596990,14,596991,14,597202,11,597206,11,597210,11,597214,11,597234,11,597238,11,597242,11,597246,11,599013,10,599015,10,599021,10,599023,10,599029,10,599031,10,599037,10,599039,10,599232,13,599233,13,599234,13,599235,13,599236,13,599237,13,599238,13,599239,13,599240,12,599241,12,599250,11,599254,11,599256,12,599257,12,599258,11,599262,11,599269,10,599271,10,599272,12,599273,12,599277,10,599279,10,599282,11,599285,10,599286,11,599287,10,599288,12,599289,12,599290,11,599293,10,599294,11,599295,10],N.p2D=[0,0,1,-1,0,0,-1,1,0,2,1,1,1,2,2,0,1,2,0,2,1,0,0,0],N.p3D=[0,0,1,-1,0,0,1,0,-1,0,0,-1,1,0,0,0,1,-1,0,0,-1,0,1,0,0,-1,1,0,2,1,1,0,1,1,1,-1,0,2,1,0,1,1,1,-1,1,0,2,0,1,1,1,-1,1,1,1,3,2,1,0,3,1,2,0,1,3,2,0,1,3,1,0,2,1,3,0,2,1,3,0,1,2,1,1,1,0,0,2,2,0,0,1,1,0,1,0,2,0,2,0,1,1,0,0,1,2,0,0,2,2,0,0,0,0,1,1,-1,1,2,0,0,0,0,1,-1,1,1,2,0,0,0,0,1,1,1,-1,2,3,1,1,1,2,0,0,2,2,3,1,1,1,2,2,0,0,2,3,1,1,1,2,0,2,0,2,1,1,-1,1,2,0,0,2,2,1,1,-1,1,2,2,0,0,2,1,-1,1,1,2,0,0,2,2,1,-1,1,1,2,0,2,0,2,1,1,1,-1,2,2,0,0,2,1,1,1,-1,2,0,2,0],N.p4D=[0,0,1,-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,0,-1,1,0,0,0,0,1,-1,0,0,0,1,0,-1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,-1,0,0,-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,2,1,1,0,0,1,1,1,-1,0,1,1,1,0,-1,0,2,1,0,1,0,1,1,-1,1,0,1,1,0,1,-1,0,2,0,1,1,0,1,-1,1,1,0,1,0,1,1,-1,0,2,1,0,0,1,1,1,-1,0,1,1,1,0,-1,1,0,2,0,1,0,1,1,-1,1,0,1,1,0,1,-1,1,0,2,0,0,1,1,1,-1,0,1,1,1,0,-1,1,1,1,4,2,1,1,0,4,1,2,1,0,4,1,1,2,0,1,4,2,1,0,1,4,1,2,0,1,4,1,1,0,2,1,4,2,0,1,1,4,1,0,2,1,4,1,0,1,2,1,4,0,2,1,1,4,0,1,2,1,4,0,1,1,2,1,2,1,1,0,0,3,2,1,0,0,3,1,2,0,0,1,2,1,0,1,0,3,2,0,1,0,3,1,0,2,0,1,2,0,1,1,0,3,0,2,1,0,3,0,1,2,0,1,2,1,0,0,1,3,2,0,0,1,3,1,0,0,2,1,2,0,1,0,1,3,0,2,0,1,3,0,1,0,2,1,2,0,0,1,1,3,0,0,2,1,3,0,0,1,2,2,3,1,1,1,0,2,1,1,1,-1,2,2,0,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,2,0,0,0,2,3,1,0,1,1,2,1,-1,1,1,2,2,0,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,2,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,2,0,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,2,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,0,2,0,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,2,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,2,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,0,0,2,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,0,2,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,0,2,2,1,1,1,-1,0,1,1,1,0,-1,0,0,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,0,0,0,0,0,2,1,-1,1,1,0,1,0,1,1,-1,0,0,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,0,0,0,0,0,2,1,-1,1,0,1,1,0,1,-1,1,0,0,0,0,0,2,1,-1,0,1,1,1,0,-1,1,1,0,0,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,2,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,2,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,2,2,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,0,2,0,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,2,0,0,2,1,-1,1,0,1,1,0,1,-1,1,2,0,2,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,0,0,2,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,0,2,0,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,2,0,2,1,1,-1,0,1,1,1,0,-1,1,2,0,0,0,2,2,1,-1,1,0,1,1,0,1,-1,1,2,0,0,0,2,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,0,2,3,1,1,0,0,0,2,2,0,0,0,2,1,1,1,-1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,1,-1,3,1,0,0,1,0,2,0,0,2,0,2,1,1,1,-1,3,1,1,0,0,0,2,2,0,0,0,2,1,1,-1,1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,-1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,1,-1,1,3,1,1,0,0,0,2,2,0,0,0,2,1,-1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,1,-1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,-1,1,1,3,1,0,1,0,0,2,0,2,0,0,2,-1,1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,-1,1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,-1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,4,1,1,1,1,3,3,2,0,1,0,3,1,0,2,0,4,1,1,1,1,3,3,0,2,1,0,3,0,1,2,0,4,1,1,1,1,3,3,2,0,0,1,3,1,0,0,2,4,1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,4,1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,4,1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,1,-1,3,3,2,0,1,0,3,1,0,2,0,2,1,1,1,-1,3,3,0,2,1,0,3,0,1,2,0,2,1,1,1,-1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,-1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,1,-1,1,3,3,0,2,0,1,3,0,1,0,2,2,1,1,-1,1,3,3,2,0,1,0,3,1,0,2,0,2,1,-1,1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,-1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,1,-1,1,1,3,3,0,2,1,0,3,0,1,2,0,2,-1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,2,-1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,-1,1,1,1];for(var a=[],s=0;s<N.p2D.length;s+=4){for(var l=N.base2D[N.p2D[s]],c=null,d=null,u=0;u<l.length;u+=3)d=new n(l[u],l[u+1],l[u+2]),null===c?a[s/4]=d:c.next=d,c=d;d.next=new n(N.p2D[s+1],N.p2D[s+2],N.p2D[s+3])}this.lookup2D=[];for(s=0;s<N.lookupPairs2D.length;s+=2)this.lookup2D[N.lookupPairs2D[s]]=a[N.lookupPairs2D[s+1]];var h=[];for(s=0;s<N.p3D.length;s+=9){for(l=N.base3D[N.p3D[s]],c=null,d=null,u=0;u<l.length;u+=4)d=new i(l[u],l[u+1],l[u+2],l[u+3]),null===c?h[s/9]=d:c.next=d,c=d;d.next=new i(N.p3D[s+1],N.p3D[s+2],N.p3D[s+3],N.p3D[s+4]),d.next.next=new i(N.p3D[s+5],N.p3D[s+6],N.p3D[s+7],N.p3D[s+8])}this.lookup3D=[];for(s=0;s<N.lookupPairs3D.length;s+=2)this.lookup3D[N.lookupPairs3D[s]]=h[N.lookupPairs3D[s+1]];var f=[];for(s=0;s<N.p4D.length;s+=16){for(l=N.base4D[N.p4D[s]],c=null,d=null,u=0;u<l.length;u+=5)d=new r(l[u],l[u+1],l[u+2],l[u+3],l[u+4]),null===c?f[s/16]=d:c.next=d,c=d;d.next=new r(N.p4D[s+1],N.p4D[s+2],N.p4D[s+3],N.p4D[s+4],N.p4D[s+5]),d.next.next=new r(N.p4D[s+6],N.p4D[s+7],N.p4D[s+8],N.p4D[s+9],N.p4D[s+10]),d.next.next.next=new r(N.p4D[s+11],N.p4D[s+12],N.p4D[s+13],N.p4D[s+14],N.p4D[s+15])}this.lookup4D=[];for(s=0;s<N.lookupPairs4D.length;s+=2)this.lookup4D[N.lookupPairs4D[s]]=f[N.lookupPairs4D[s+1]];this.perm=new Uint8Array(256),this.perm2D=new Uint8Array(256),this.perm3D=new Uint8Array(256),this.perm4D=new Uint8Array(256);var g=new Uint8Array(256);for(s=0;s<256;s++)g[s]=s;(e=new Uint32Array(1))[0]=t,e=o(o(o(e)));for(s=255;0<=s;s--){e=o(e);var p=new Uint32Array(1);p[0]=(e[0]+31)%(s+1),p[0]<0&&(p[0]+=s+1),this.perm[s]=g[p[0]],this.perm2D[s]=14&this.perm[s],this.perm3D[s]=this.perm[s]%24*3,this.perm4D[s]=252&this.perm[s],g[p[0]]=g[s]}this.simplex1D=function(e){return W.simplex2D(e,1)},this.simplex2D=function(e,t){var o=(e+t)*N.STRETCH_2D,n=[e+o,t+o],i=n[0],r=n[1],a=[Math.floor(i),Math.floor(r)],s=a[0],l=a[1],c=(s+l)*N.SQUISH_2D,d=[e-(s+c),t-(l+c)],u=d[0],h=d[1],f=[i-s,r-l],g=f[0],p=f[1],m=g+p,z=new Uint32Array(4);z[0]=g-p+1,z[1]=m,z[2]=m+p,z[3]=m+g;for(var v=z[0]|z[1]<<1|z[2]<<2|z[3]<<4,b=W.lookup2D[v],y=0;void 0!==b;){var w=[u+b.dx,h+b.dy],x=w[0],C=w[1],T=2-x*x-C*C;if(0<T){var A=[s+b.xsb,l+b.ysb],k=A[0],E=A[1],M=W.perm2D[W.perm[255&k]+E&255];y+=(T*=T)*T*(N.gradients2D[M]*x+N.gradients2D[M+1]*C)}b=b.next}return y*N.NORM_2D},this.simplex3D=function(e,t,o){var n=(e+t+o)*N.STRETCH_3D,i=[e+n,t+n,o+n],r=i[0],a=i[1],s=i[2],l=[Math.floor(r),Math.floor(a),Math.floor(s)],c=l[0],d=l[1],u=l[2],h=(c+d+u)*N.SQUISH_3D,f=[e-(c+h),t-(d+h),o-(u+h)],g=f[0],p=f[1],m=f[2],z=[r-c,a-d,s-u],v=z[0],b=z[1],y=z[2],w=v+b+y,x=new Uint32Array(7);x[0]=b-y+1,x[1]=v-b+1,x[2]=v-y+1,x[3]=w,x[4]=w+y,x[5]=w+b,x[6]=w+v;for(var C=x[0]|x[1]<<1|x[2]<<2|x[3]<<3|x[4]<<5|x[5]<<7|x[6]<<9,T=W.lookup3D[C],A=0;void 0!==T;){var k=[g+T.dx,p+T.dy,m+T.dz],E=k[0],M=k[1],S=k[2],j=2-E*E-M*M-S*S;if(0<j){var I=[c+T.xsb,d+T.ysb,u+T.zsb],O=I[0],P=I[1],D=I[2],B=W.perm3D[W.perm[W.perm[255&O]+P&255]+D&255];A+=(j*=j)*j*(N.gradients3D[B]*E+N.gradients3D[B+1]*M+N.gradients3D[B+2]*S)}T=T.next}return A*N.NORM_3D},this.simplex4D=function(e,t,o,n){var i=(e+t+o+n)*N.STRETCH_4D,r=[e+i,t+i,o+i,n+i],a=r[0],s=r[1],l=r[2],c=r[3],d=[Math.floor(a),Math.floor(s),Math.floor(l),Math.floor(c)],u=d[0],h=d[1],f=d[2],g=d[3],p=(u+h+f+g)*N.SQUISH_4D,m=e-(u+p),z=t-(h+p),v=o-(f+p),b=n-(g+p),y=[a-u,s-h,l-f,c-g],w=y[0],x=y[1],C=y[2],T=y[3],A=w+x+C+T,k=new Uint32Array(11);k[0]=C-T+1,k[1]=x-C+1,k[2]=x-T+1,k[3]=w-x+1,k[4]=w-C+1,k[5]=w-T+1,k[6]=A<<6,k[7]=A+T,k[8]=A+C,k[9]=A+x,k[10]=A+w;for(var E=k[0]|k[1]<<1|k[2]<<2|k[3]<<3|k[4]<<4|k[5]<<5|k[6]<<6|k[7]<<8|k[8]<<11|k[9]<<14|k[10]<<17,M=W.lookup4D[E],S=0;void 0!==M;){var j=[m+M.dx,z+M.dy,v+M.dz,b+M.dw],I=j[0],O=j[1],P=j[2],D=j[3],B=2-I*I-O*O-P*P-D*D;if(0<B){var L=[u+M.xsb,h+M.ysb,f+M.zsb,g+M.wsb],Y=L[0],X=L[1],_=L[2],R=L[3],F=W.perm4D[W.perm[W.perm[W.perm[255&Y]+X&255]+_&255]+R&255];S+=(B*=B)*B*(N.gradients4D[F]*I+N.gradients4D[F+1]*O+N.gradients4D[F+2]*P+N.gradients4D[F+3]*D)}M=M.next}return S*N.NORM_4D}},qe.Damp=function(e,t){z_d("14");var o;if(o=zob(qe.Damp,arguments,"startValue, damp",this))return o;this.lastValue=zot(e)?0:e,this.damp=zot(t)?.1:t},qe.Damp.prototype.convert=function(e){return this.lastValue=this.lastValue+(e-this.lastValue)*this.damp},qe.Damp.prototype.immediate=function(e){return this.lastValue=e,this},qe.Proportion=function(t,o,n,i,r,a){var e,s,l;if(e=zob(qe.Proportion,arguments,"baseMin, baseMax, targetMin, targetMax, factor, targetRound",this))return e;z_d("15"),zot(n)&&(n=0),zot(i)&&(i=1),zot(r)&&(r=1),zot(a)&&(a=!1),this.convert=function(e){if(!isNaN(e))return e=Math.max(e,t),e=Math.min(e,o),s=(e-t)/(o-t),l=0<r?n+(i-n)*s:i-(i-n)*s,a&&(l=Math.round(l)),l}},qe.ProportionDamp=function(e,t,o,n,i,r,a){var s;if(s=zob(qe.ProportionDamp,arguments,"baseMin, baseMax, targetMin, targetMax, damp, factor, targetRound",this))return s;z_d("16"),zot(o)&&(o=0),zot(n)&&(n=1),zot(i)&&(i=.1),zot(r)&&(r=1),zot(a)&&(a=!1),this.damp=i;var l,c,d,u,h=this,f=0;l=e,f=o;var g=setInterval(p,20);function p(){isNaN(l)||(l=Math.max(l,e),l=Math.min(l,t),c=(l-e)/(t-e),d=n-o,f+=((u=0<r?o+d*c:n-d*c)-f)*h.damp)}this.immediate=function(e){return h.convert(e),p(),f=u,a&&(f=Math.round(f)),h},this.convert=function(e){return l=e,a?Math.round(f):f},this.dispose=function(){return clearInterval(g),!0}},qe.Dictionary=function(e){z_d("17"),this.length=0,this.unique=e;var o=this.objects=[],n=this.values=[];this.add=function(e,t){zot(e)||(zot(t)&&(t=!0),this.unique&&this.remove(e),o.push(e),n.push(t),this.length++)},this.at=function(e){if(!zot(e)){var t=o.indexOf(e);return-1<t?n[t]:null}},this.remove=function(e){if(zot(e))return!1;var t=o.indexOf(e);return-1<t&&(o.splice(t,1),n.splice(t,1),this.length--,!0)},this.dispose=function(){return n=o=null,!(this.length=null)}},qe.swapProperties=function(e,t,o){if(z_d("17.1"),zot(t)||zot(o)||zot(t[e])||zot(o[e]))return!1;var n=o[e];return o[e]=t[e],t[e]=n,!0},qe.swapHTML=function(e,t){return z_d("17.2"),qe.swapProperties("innerHTML",zid(e),zid(t))},qe.scrollX=function(e,t){return z_d("18"),qe.abstractScroll("X","Left",e,t)},qe.scrollY=function(e,t){return z_d("19"),qe.abstractScroll("Y","Top",e,t)},qe.abstractScroll=function(e,t,o,n){z_d("20");var i="X"==e?"Y":"X";if(zot(o)){var r=navigator.applicationName;if(-1!=navigator.userAgent.indexOf("Safari")||"Safari"==r);return document.documentElement&&document.documentElement["scroll"+t]||document.body["scroll"+t]}if(zot(n))window.scrollTo(qe["scroll"+i](),o);else{n<50&&(n=50);var a=n/50,s=qe["scroll"+e](),l=(o-s)/a,c=0,d=setInterval(function(){c++,s+=l,window.scrollTo(qe["scroll"+i](),s),a<=c&&(window.scrollTo(qe["scroll"+i](),o),clearInterval(d))},50)}return o},qe.windowWidth=function(){return z_d("21"),isNaN(window.innerWidth)?window.clientWidth:window.innerWidth},qe.windowHeight=function(){return z_d("22"),isNaN(window.innerHeight)?window.clientHeight:window.innerHeight},qe.getQueryString=function(e){if(z_d("22.5"),zot(e)&&(e=location.search.replace("?","")),""!=e){for(var t=e.split("&"),o={},n=0;n<t.length;n++){var i=t[n].split("=");void 0===o[i[0]]?o[i[0]]=decodeURIComponent(i[1]):"string"==typeof o[i[0]]?o[i[0]]=[o[i[0]],decodeURIComponent(i[1])]:o[i[0]].push(decodeURIComponent(i[1]))}return o}},qe.urlEncode=function(e){z_d("23");e=(e+"").toString();return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},qe.urlDecode=function(e){return z_d("24"),decodeURIComponent((e+"").replace(/\+/g,"%20"))},qe.setCookie=function(e,t,o){if(z_d("25"),!zot(e)&&!zot(t)){if(o){var n=new Date;n.setTime(n.getTime()+24*o*60*60*1e3);var i="; expires="+n.toGMTString()}else i="";return document.cookie=e+"="+escape(t)+i+"; path=/",!0}},qe.getCookie=function(e){z_d("26");var t,o=document.cookie.split(/;\s*/),n=new Array;for(s=0;s<o.length;s++)n[(t=o[s].split("="))[0]]=t[1];if(void 0!==n[e])return unescape(n[e])},qe.deleteCookie=function(e){return z_d("27"),!zot(qe.getCookie(e))&&(qe.setCookie(e,"",-1),!0)},qe.convertColor=function(e,t){if(z_d("27.5"),zot(t)&&(t=!1),t)3==(e=e.replace("#","")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2));else if("#"==e.charAt(0))return e;var o=["black","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],n=["000000","f0f8ff","faebd7","00ffff","7fffd4","f0ffff","f5f5dc","ffe4c4","ffebcd","0000ff","8a2be2","a52a2a","deb887","5f9ea0","7fff00","d2691e","ff7f50","6495ed","fff8dc","dc143c","00ffff","00008b","008b8b","b8860b","a9a9a9","a9a9a9","006400","bdb76b","8b008b","556b2f","ff8c00","9932cc","8b0000","e9967a","8fbc8f","483d8b","2f4f4f","2f4f4f","00ced1","9400d3","ff1493","00bfff","696969","696969","1e90ff","b22222","fffaf0","228b22","ff00ff","dcdcdc","f8f8ff","ffd700","daa520","808080","808080","008000","adff2f","f0fff0","ff69b4","cd5c5c","4b0082","fffff0","f0e68c","e6e6fa","fff0f5","7cfc00","fffacd","add8e6","f08080","e0ffff","fafad2","d3d3d3","d3d3d3","90ee90","ffb6c1","ffa07a","20b2aa","87cefa","778899","778899","b0c4de","ffffe0","00ff00","32cd32","faf0e6","ff00ff","800000","66cdaa","0000cd","ba55d3","9370db","3cb371","7b68ee","00fa9a","48d1cc","c71585","191970","f5fffa","ffe4e1","ffe4b5","ffdead","000080","fdf5e6","808000","6b8e23","ffa500","ff4500","da70d6","eee8aa","98fb98","afeeee","db7093","ffefd5","ffdab9","cd853f","ffc0cb","dda0dd","b0e0e6","800080","663399","ff0000","bc8f8f","4169e1","8b4513","fa8072","f4a460","2e8b57","fff5ee","a0522d","c0c0c0","87ceeb","6a5acd","708090","708090","fffafa","00ff7f","4682b4","d2b48c","008080","d8bfd8","ff6347","40e0d0","ee82ee","f5deb3","ffffff","f5f5f5","ffff00","9acd32"];return t?o[-1!=n.indexOf(e.toLowerCase())?n.indexOf(e):0]:"#"+n[-1!=o.indexOf(e.toLowerCase())?o.indexOf(e):0]},qe.mobile=function(e){return z_d("28"),zot(e)&&(e=!0),/ip(hone|od|ad)/i.test(navigator.userAgent)?"ios":/android|nexus/i.test(navigator.userAgent)?"android":/blackberry/i.test(navigator.userAgent)?"blackberry":/nokia|phone|mobile/i.test(navigator.userAgent)?"windows":/opera mini|webos/i.test(navigator.userAgent)?"other":!(!e||void 0===window.orientation)},qe.async=function(e,t){if(z_d("29"),!zot(e)){var o,n=document.createElement("script");if(t){var i=t.toString().split(/\n/,1)[0].match(/^function\s?([^\s(]*)/)[1];qe.async[i]=(o=n,function(e){o&&o.parentNode.removeChild(o),o=null,t(e)})}else qe.async.z_s&&qe.async.z_s.parentNode&&qe.async.z_s.parentNode.removeChild(qe.async.z_s),qe.async.z_s=n;e.match(/\?/)||(e+="?"),n.setAttribute("src",e+"&r="+Math.random()),document.getElementsByTagName("head")[0].appendChild(n)}},qe.extend=function(e,t,o,n,i){var r;if(r=zob(qe.extend,arguments,"subclass, superclass, override, prefix, prototype"))return r;if(!zot(e)&&!zot(t)||!zon){zot(n)&&(n="super"),zot(o)&&(o=[]),Array.isArray(o)||(o=[o]),zot(i)&&(i=!0);var a={};for(var s in e.prototype)Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(e.prototype,s));for(s in h.prototype=t.prototype,e.prototype=new h,a)Object.defineProperty(e.prototype,s,Object.getOwnPropertyDescriptor(a,s));var l=e.prototype,c=Object.getPrototypeOf&&Object.getPrototypeOf(l)||l.__proto__;if(c){var d;l[(n+="_")+"constructor"]=c.constructor;for(var u=0;u<o.length;u++)"function"==typeof c[d=o[u]]&&(l[n+d]=c[d]);if(i)for(d in c)l.hasOwnProperty(d)&&"function"==typeof c[d]&&(l[n+d]=c[d])}return e}function h(){this.constructor=e}zog("zim.extend() - please supply a class and its superclass")},"undefined"==typeof createjs)return zon&&zog("ZIM >= 4.3.0 requires createjs namespace to be loaded (import createjs before zim)"),qe;function ve(e,t){t?(e.mouseChildren=!0,e.mouseEnabled=!0,e._enabled=!0):(e.mouseChildren=!1,e.mouseEnabled=!1,e._enabled=!1)}qe.Stage=function(e){z_d("50.44"),this.cjsStage_constructor(e),this.type="Stage",this.cache=function(e,t,o,n,i,r){if(zot(o))if(zot(e)){var a=this.getBounds();if(!zot(a)){var s=0<this.borderWidth?this.borderWidth/2:0;e=a.x-s,t=a.y-s,o=a.width+2*s,n=a.height+2*s}}else o=e,n=t,t=e=0;return this.cjsStage_cache(e,t,o,n,i,r),this},this.loop=function(e,t,o,n,i){return qe.loop(this,e,t,o,n,i)},this.hitTestGrid=function(e,t,o,n,i,r,a,s,l,c,d,u){return qe.hitTestGrid(this,e,t,o,n,i,r,a,s,l,c,d,u)},this.clone=function(){return this.cloneChildren(this.cloneProps(new qe.Stage(e)))}},qe.extend(qe.Stage,createjs.Stage,["cache","clone"],"cjsStage",!1),qe.StageGL=function(e,t){z_d("50.45"),this.cjsStageGL_constructor(e,t),this.type="StageGL",this.cache=function(e,t,o,n,i,r){if(zot(o))if(zot(e)){var a=this.getBounds();if(!zot(a)){var s=0<this.borderWidth?this.borderWidth/2:0;e=a.x-s,t=a.y-s,o=a.width+2*s,n=a.height+2*s}}else o=e,n=t,t=e=0;return this.cjsStageGL_cache(e,t,o,n,i,r),this},this.loop=function(e,t,o,n,i){return qe.loop(this,e,t,o,n,i)},this.loop=function(e,t,o,n,i){return qe.loop(this,e,t,o,n,i)},this.clone=function(){return this.cloneChildren(this.cloneProps(new qe.StageGL(e)))}},qe.extend(qe.StageGL,createjs.StageGL,["cache","clone"],"cjsStageGL",!1),qe.Container=function(e,t,o,n){if(z_d("50.5"),this.cjsContainer_constructor(),this.type="Container",zot(o))i=0,r=e,a=0,s=t;else var i=e,r=o,a=t,s=n;zot(s)&&(s=r),zot(e)||this.setBounds(i,a,r,s),this.cache=function(e,t,o,n,i,r){var a=this.getBounds();if(zot(o))if(zot(e)){if(!zot(a)){var s=0<this.borderWidth?this.borderWidth/2:0;e=a.x-s,t=a.y-s,o=a.width+2*s,n=a.height+2*s}}else o=e,n=t,t=e=0;return this.cjsContainer_cache(e,t,o,n,i,r),a&&this.setBounds(a.x,a.y,a.width,a.height),this},this.clone=function(){return this.cloneChildren(this.cloneProps(new qe.Container(i,a,r,s)))}},zimify(qe.Container.prototype),qe.extend(qe.Container,createjs.Container,["cache","clone"],"cjsContainer",!1),qe.Shape=function(e,t,o,n,i){z_d("50.6"),this.cjsShape_constructor(i),this.type="Shape";var r=this;if(zot(o))a=0,s=e,l=0,c=t;else var a=e,s=o,l=t,c=n;zot(c)&&(c=s),zot(e)||this.setBounds(a,l,s,c),this.cache=function(e,t,o,n,i,r){if(zot(o))if(zot(e)){var a=this.getBounds();if(!zot(a)){var s=0<this.borderWidth?this.borderWidth/2:0;e=a.x-s,t=a.y-s,o=a.width+2*s,n=a.height+2*s}}else o=e,n=t,t=e=0;return this.cjsShape_cache(e,t,o,n,i,r),this},this.clone=function(e){zot(e)&&(e=!0);var t=r.cloneProps(new qe.Shape(s,c,a,l,i));return t.graphics=e?r.graphics.clone():r.graphics,t}},qe.extend(qe.Shape,createjs.Shape,["cache","clone"],"cjsShape",!1),zimify(qe.Shape.prototype),qe.Bitmap=function(s,l,c,e){z_d("50.7"),this.cjsBitmap_constructor(s);var d=this;this.type="Bitmap",this.id=d.fileID=e,zot(l)||zot(c)||d.setBounds(0,0,l,c),zot(l)&&(l=100),zot(c)&&(c=100),zimDefaultFrame&&(zimDefaultFrame.canvas.getContext("2d")?this.imageData=zimDefaultFrame.canvas.getContext("2d").createImageData(l,c):this.imageData=document.createElement("canvas").getContext("2d").createImageData(l,c),this.drawImageData=function(e,t,o,n,i,r){if(zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=0),zot(n)&&(n=0),zot(i)&&(i=l),zot(r)&&(r=c),!d.proxyCanvas){var a=d.proxyCanvas=document.createElement("canvas");a.setAttribute("width",l),a.setAttribute("height",c),d.proxyContext=a.getContext("2d"),s=d.image=a}d.proxyContext&&d.proxyContext.putImageData(d.imageData,e,t,o,n,i,r)},zot(s)&&d.drawImageData(),s.match&&s.match(/data:image/i)&&setTimeout(function(){d.stage&&d.stage.update(),setTimeout(function(){d.stage&&d.stage.update()},50)},50)),this.clone=function(){return this.cloneProps(new qe.Bitmap(s,l,c,d.fileID))}},qe.Bitmap.fromData=function(e,t){var o=new qe.Bitmap(e);setTimeout(function(){t(o)},50)},qe.extend(qe.Bitmap,createjs.Bitmap,"clone","cjsBitmap",!1),zimify(qe.Bitmap.prototype),qe.Sprite=function(e,t,o,n,i,r,a,s,l,c,d,u,h,f,g){var p;if(p=zob(qe.Sprite,arguments,"image, cols, rows, count, offsetX, offsetY, spacingX, spacingY, width, height, animations, json, id, globalControl, spriteSheet",this))return p;this.type="Sprite",z_d("50.8");var m,D=this;if(zot(u)&&!zot(e)){zot(t)&&(t=1),zot(o)&&(o=1),zot(n)&&(n=t*o),zot(i)&&(i=0),zot(r)&&(r=0),zot(a)&&(a=0),zot(s)&&(s=0),zot(l)&&(l=e.width),zot(c)&&(c=e.height);var z=(l-i+a)/t-a,v=(c-r+s)/o-s,b=[],y=0;e:for(var w=0;w<o;w++)for(var x=0;x<t;x++){if(++y>n)break e;b.push([i+x*(z+a),r+w*(v+s),z,v])}A(e,b,d)}else if(g)d=(m=g).animations;else{if(!u)return;if(b=u.frames,d=u.animations,zot(e)){var C=u.images?u.images[0]:null,T=C.split("/").pop();if("EmptyAsset"!=frame.asset(T).type)A(frame.asset(T),b,d);else if("EmptyAsset"!=frame.asset(C).type){frame.asset(C);A(frame.asset(C),b,d)}else m=new createjs.SpriteSheet(u)}else A(e,b,d)}function A(e,t,o){var n={images:[e.image],frames:t,animations:o||[]};m=new createjs.SpriteSheet(n)}this.animations=d,this.cjsSprite_constructor(m),zot(h)&&(h=qe.makeID()),this.id=h,zot(f)&&(f=!0),D.globalControl=f;var B,L=0;this.parseFrames=function(e,t,o,n){var r=[],a=Number.MAX_VALUE,s=0;if(zot(e))zot(t)&&(t=0),zot(o)&&(o=D.totalFrames-1),l(t,o);else{if(zot(D.animations)||zot(D.animations[e]))return[];i(D.animations[e])}function i(e){var t;Array.isArray(e)?(l((t=e)[0],t[1],t[3]),t[2]&&!zot(D.animations[t[2]])&&i(D.animations[t[2]])):e.constructor=={}.constructor?function(e){if(zot(e.frames))return;zot(e.speed)&&(e.speed=1);for(var t=0;t<e.frames.length;t++)e.speed<a&&(a=e.speed),e.speed>s&&(s=e.speed),r.push({f:e.frames[t],s:e.speed});e.next&&!zot(D.animations[e.next])&&i(D.animations[e.next])}(e):isNaN(e)||r.push({f:Math.floor(e),s:1})}function l(e,t,o){if(zot(o)&&(o=1),e<t)for(var n=e;n<=t;n++)i(n);else for(n=t;n<=e;n++)i(e-n);function i(e){o<a&&(a=o),s<o&&(s=o),r.push({f:e,s:o})}}if(n)return r;a=qe.constrain(qe.decimals(a),.1),s=qe.constrain(qe.decimals(s),.1);for(var c,d=[],u=a!=s,h=0;h<r.length;h++)if(c=r[h],u)for(var f=0;f<qe.constrain(Math.round(a<1?c.s/a:c.s),.1);f++)d.push(c.f);else d.push(c.f);return d},this.run=function(e,t,o,n,i,r,a,s,l,c,d,u,h,f,g,p,m,z,v,b,y,w,x,C,T){var A,k;if(A=zob(this.run,arguments,"time, label, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, startFrame, endFrame, tweek, id, globalControl"))return A;if(zot(x)&&(x=1),zot(C)||(D.id=C),zot(T)||(D.globalControl=T),Array.isArray(t)){var E,M;k=[];for(var S,j=0,I=0;I<t.length;I++){(E=t[I]).lookup=D.parseFrames(E.label,E.startFrame,E.endFrame),0==I&&(S=E.lookup[0]),delete E.startFrame,delete E.endFrame,E.obj=qe.merge(E.obj,{normalizedFrame:E.lookup.length-1}),E.set=qe.merge(E.set,{normalizedFrames:{noZik:E.lookup},normalizedFrame:0}),zot(E.wait)&&(E.wait=j*x),M=E.label,delete E.label,k.push(E),j=0;var O=zot(E.time)?e:E.time;0<w-y&&(j=O/(w-y)/2)}if(0==k.length)return this;1==k.length?(e=k[0].time,t=M,P()):D.gotoAndStop(S)}else P();function P(){B=D.parseFrames(t,y,w),L=0,D.gotoAndStop(B[L]),y=w=null,k={normalizedFrame:B.length-1}}if(zot(e)&&(e=1e3),D.running&&D.stopAnimate(D.id),D.running=!0,!Array.isArray(k)){j=0;0<w-y&&(j=e/Math.abs(w-y)/2),B&&0<B.length&&(j=e/B.length/2),zot(c)&&(c=j*x),zot(p)&&(p=j*x)}return qe.animate({target:D,obj:k,time:e,ease:"linear",call:function(){o&&"function"==typeof o&&o(n),D.running=!1},params:n,wait:i,waitedCall:r,waitedParams:a,loop:s,loopCount:l,loopWait:c,loopCall:d,loopParams:u,loopWaitCall:h,loopWaitParams:f,rewind:g,rewindWait:p,rewindCall:m,rewindParams:z,rewindWaitCall:v,rewindWaitParams:b,override:!1,id:D.id}),D.runPaused=!1,D},this.runPaused=!0,this.pauseRun=function(e){return zot(e)&&(e=!0),D.runPaused=e,D.globalControl?qe.pauseAnimate(e,D.id):D.pauseAnimate(e,D.id),D},this.stopRun=function(){return D.runPaused=!0,D.running=!1,D.globalControl?qe.stopAnimate(D.id):D.stopAnimate(D.id),D},Object.defineProperty(this,"frame",{get:function(){return this.currentFrame},set:function(e){e=Math.round(e),this.paused?this.gotoAndStop(e):this.gotoAndPlay(e)}}),Object.defineProperty(this,"normalizedFrame",{get:function(){return L},set:function(e){L=Math.round(e),this.gotoAndStop(B[L])}}),Object.defineProperty(this,"normalizedFrames",{get:function(){return B},set:function(e){B=e}}),Object.defineProperty(this,"totalFrames",{get:function(){return m.getNumFrames()},set:function(e){zog("zim.Sprite - totalFrames is read only")}}),this.clone=function(){return this.cloneProps(new qe.Sprite(e,t,o,n,i,r,a,s,l,c,d,u,null,f,g))}},qe.extend(qe.Sprite,createjs.Sprite,"clone","cjsSprite",!1),zimify(qe.Sprite.prototype),qe.MovieClip=function(e,t,o,n){var i;if(i=zob(qe.MovieClip,arguments,"mode, startPosition, loop, labels",this))return i;this.type="MovieClip",z_d("50.9"),this.cjsMovieClip_constructor(e,t,o,n),this.clone=function(){return this.cloneProps(new qe.MovieClip(e,t,o,n))}},qe.extend(qe.MovieClip,createjs.MovieClip,"clone","cjsMovieClip",!1),zimify(qe.MovieClip.prototype),qe.Circle=function(e,t,o,n,i){var r;if(r=zob(qe.Circle,arguments,"radius, color, borderColor, borderWidth, dashed",this))return r;z_d("51"),this.zimContainer_constructor(),this.type="Circle",zot(e)&&(e=50),zot(i)&&(i=!1),!zot(o)&&zot(n)?n=1:!zot(n)&&zot(o)&&(o="black"),zot(t)&&(t=0<n?"rgba(0,0,0,0)":"black");var a=this,s=e,l=t,c=o,d=n;this.mouseChildren=!1;var u=this.shape=new createjs.Shape;this.addChild(u);var h,f,g,p,m=u.graphics;function z(){m.c(),a.colorCommand=h=m.f(l).command,(zot(d)||0<d)&&(zot(c)&&zot(d)||(zot(c)&&(c="black"),a.borderColorCommand=f=m.s(c).command,a.borderWidthCommand=g=m.ss(d).command,i&&(a.borderDashedCommand=p=m.sd([10,10],5).command))),m.dc(0,0,s),a.setBounds(-s,-s,2*s,2*s)}z(),Object.defineProperty(a,"color",{get:function(){return l},set:function(e){zot(e)&&(e="black"),l=e,h.style=l}}),Object.defineProperty(a,"borderColor",{get:function(){return c},set:function(e){c=e,f?f.style=c:z()}}),Object.defineProperty(a,"borderWidth",{get:function(){return d},set:function(e){0<e||(e=0),d=e,g&&0!=d?(g.width=d,i&&(p.segments=[20,10],p.offset=5)):z()}}),Object.defineProperty(a,"radius",{get:function(){return s},set:function(e){s=e,z()}}),this.clone=function(){return a.cloneProps(new qe.Circle(a.radius,a.color,a.borderColor,a.borderWidth,i))}},qe.extend(qe.Circle,qe.Container,"clone","zimContainer",!1),qe.Rectangle=function(e,t,o,n,i,r,a,s){var l;if(l=zob(qe.Rectangle,arguments,"width, height, color, borderColor, borderWidth, corner, flatBottom, dashed",this))return l;z_d("52"),this.zimContainer_constructor(),this.type="Rectangle",zot(e)&&(e=100),zot(t)&&(t=100),zot(r)&&(r=0),zot(a)&&(a=!1),zot(s)&&(s=!1),!zot(n)&&zot(i)?i=1:!zot(i)&&zot(n)&&(n="black"),zot(o)&&(o=0<i?"rgba(0,0,0,0)":"black");var c=this,d=o,u=n,h=i;this.mouseChildren=!1;var f=this.shape=new createjs.Shape;this.addChild(f);var g,p,m,z=f.graphics;function v(){z.c(),c.colorCommand=g=z.f(d).command,(zot(h)||0<h)&&(zot(u)&&zot(h)||(zot(u)&&(u="black"),c.borderColorCommand=p=z.s(u).command,c.borderWidthCommand=m=z.ss(h).command,s&&(c.borderDashedCommand=borderDashedObj=z.sd([10,10],5).command))),a?z.rc(0,0,e,t,r,r,0,0):0<r?z.rr(0,0,e,t,r):z.r(0,0,e,t),c.setBounds(0,0,e,t)}v(),Object.defineProperty(c,"color",{get:function(){return d},set:function(e){zot(e)&&(e="black"),d=e,g.style=d}}),Object.defineProperty(c,"borderColor",{get:function(){return u},set:function(e){u=e,p?p.style=u:v()}}),Object.defineProperty(c,"borderWidth",{get:function(){return h},set:function(e){0<e||(e=0),h=e,m&&0!=h?(m.width=h,s&&(borderDashedObj.segments=[20,10],borderDashedObj.offset=5)):v()}}),this.clone=function(){return c.cloneProps(new qe.Rectangle(e,t,c.color,c.borderColor,c.borderWidth,r,a,s))}},qe.extend(qe.Rectangle,qe.Container,"clone","zimContainer",!1),qe.Triangle=function(l,c,e,t,o,n,d,u,h){var i;if(i=zob(qe.Triangle,arguments,"a, b, c, color, borderColor, borderWidth, center, adjust, dashed",this))return i;z_d("53"),this.zimContainer_constructor(),this.type="Triangle",zot(l)&&(l=100),zot(c)&&(c=l),zot(e)&&(e=c),-1==e&&(e=Math.sqrt(Math.pow(l,2)+Math.pow(c,2))),zot(d)&&(d=!0),zot(u)&&(u=0),!zot(o)&&zot(n)?n=1:!zot(n)&&zot(o)&&(o="black"),zot(t)&&(t=0<n?"rgba(0,0,0,0)":"black");var f=this,g=t,p=o,m=n;this.mouseChildren=!1;var r=[l,c,e];r.sort(function(e,t){return t-e}),aa=r[0],bb=r[1],cc=r[2];var z=[r.indexOf(l),r.indexOf(c),r.indexOf(e)];if(aa>bb+cc)zog("zim display - Triangle(): invalid triangle lengths");else{var v=this.shape=new createjs.Shape;this.addChild(v);var b,y,w,x=v.graphics;a(),Object.defineProperty(f,"color",{get:function(){return g},set:function(e){zot(e)&&(e="black"),g=e,b.style=g}}),Object.defineProperty(f,"borderColor",{get:function(){return p},set:function(e){p=e,y?y.style=p:a()}}),Object.defineProperty(f,"borderWidth",{get:function(){return m},set:function(e){0<e||(e=0),m=e,w&&0!=m?(w.width=m,h&&(borderDashedObj.segments=[20,10],borderDashedObj.offset=5)):a()}}),this.clone=function(){return f.cloneProps(new qe.Triangle(l,c,e,f.color,f.borderColor,f.borderWidth,d,u,h))}}function a(){x.c(),f.colorCommand=b=x.f(g).command,(zot(m)||0<m)&&(zot(p)&&zot(m)||(zot(p)&&(p="black"),f.borderColorCommand=y=x.s(p).command,f.borderWidthCommand=w=x.ss(m).command,h&&(f.borderDashedCommand=borderDashedObj=x.sd([10,10],5).command))),x.mt(0,0),f.one={x:0,y:0},x.lt(l,0),f.two={x:l,y:0};var e=180*Math.acos((Math.pow(bb,2)+Math.pow(cc,2)-Math.pow(aa,2))/(2*bb*cc))/Math.PI,t=180*Math.asin(bb*Math.sin(e*Math.PI/180)/aa)/Math.PI,o=[e,t,180-e-t];f.angles=[o[z[1]],o[z[2]],o[z[0]]];var n=f.angles[1],i=Math.cos(n*Math.PI/180)*c,r=Math.sin(n*Math.PI/180)*c,a=Math.max(l,l-i),s=r;f.setBounds(0,0,a,s),v.y=s,x.lt(l-i,0-r),f.three={x:l-i,y:0-r},x.cp(),d&&(f.regX=a/2,f.regY=s/2),u&&(f.shape.y+=u)}},qe.extend(qe.Triangle,qe.Container,"clone","zimContainer"),qe.Squiggle=function(e,k,E,M,S,j,I,O,P,D,t,o,n,B,L){var i;if(i=zob(qe.Squiggle,arguments,"color, thickness, points, length, controlLength, controlType, lockControlType, showControls, lockControls, handleSize, toggle, move, ctrlclick, dashed, onTop",this))return i;z_d("53.2"),zot(k)&&(k=6),zot(M)&&(M=300),zot(E)&&(E=5);var Y="number"==typeof E?E:E.length;if(0!=Y){zot(S)&&(S=M/Y),this.zimContainer_constructor(M,S),this.type="Squiggle",zot(B)&&(B=!1),zot(e)&&(e=frame.blue),e.style&&(this.colorCommand=e,e="black"),zot(j)&&(j="mirror"),zot(I)&&(I=!1),zot(O)&&(O=!0);var X=O;zot(P)&&(P=!1),zot(D)&&(D=qe.mobile()?20:10),zot(t)&&(t=!0),zot(o)&&(o=!0),zot(n)&&(n=!1),this.toggle=t,this.move=o,this.lockControlType=I,this.ctrlclick=n,this.num=Y,zot(L)&&(L=!0);var _,R,F,W,N,G,H,V,U,Z=this,K=(this.types=["mirror","straight","free","none"],e),q=k,r=Z.move;s(),Object.defineProperty(Z,"move",{get:function(){return o},set:function(e){o!=e&&((o=e)?Q():J())}}),Object.defineProperty(Z,"toggle",{get:function(){return t},set:function(e){t!=e&&((t=e)?Z.move&&Q():!X&&Z.move&&J())}});var a=P;Object.defineProperty(Z,"lockControls",{get:function(){return a},set:function(e){(a=e)?(Z.controls.mouseChildren=!1,Z.controls.mouseEnabled=!1):(Z.controls.mouseChildren=!0,Z.controls.mouseEnabled=!0)}}),Z.lockControls=a,Object.defineProperty(Z,"controlsVisible",{get:function(){return X},set:function(e){(X=e)?Z.showControls():Z.hideControls()}}),Object.defineProperty(Z,"color",{get:function(){return K},set:function(e){zot(e)&&(e="black"),K=e,R.style=K}}),Object.defineProperty(Z,"thickness",{get:function(){return q},set:function(e){0<e||(e=0),q=e,F&&0!=q?(F.width=q,B&&(W.segments=[20,10],W.offset=5)):drawShape()}}),Object.defineProperty(Z,"points",{get:function(){for(var e,t,o=[],n=0;n<_.length;n++)t=_[n],e=[qe.decimals(t[0].x),qe.decimals(t[0].y),qe.decimals(t[1].x),qe.decimals(t[1].y),qe.decimals(t[2].x),qe.decimals(t[2].y),qe.decimals(t[3].x),qe.decimals(t[3].y)],t[4]&&"straight"!==t[4]&&e.push(t[4]),o.push(e);return o},set:function(e){Z.dispose(),E=e,Z.shape&&(Z.shape.graphics.clear(),Z.sticks.graphics.clear(),Z.controls.noDrag(),Z.removeAllChildren(),delete Z.shape,delete Z.sticks,delete Z.controls),s(),Z.lockControls=a}}),Object.defineProperty(Z,"pointObjects",{get:function(){return _},set:function(e){zon&&zog("Squiggle() - pointObjects is read only - but its contents can be manipulated - use squiggle.update() after changes")}}),this.dispose=function(){if(Z.shape){Z.shape.cursor="default";for(var e=0;e<Z.points.length;e++)Z.points[e][1].removeAllEventListeners();for(e=0;e<N.length;e++)N[e].removeAllEventListeners();Z.sticks.removeFrom(Z),Z.controls.removeFrom(Z),Z.shape.removeAllEventListeners(),Z.controls.removeAllEventListeners(),Z.removeAllEventListeners(),Z.toggleStageEvent&&Z.stage.off("stagemousedown",Z.toggleStageEvent)}}}function s(){Z.num=Y="number"==typeof E?E:E.length,Y=Math.max(2,Y),S=M/Y,G=Z.shape=(new qe.Shape).addTo(Z);var o=Z.sticks=(new qe.Shape).addTo(Z),m=G.graphics;m.c();var z=o.graphics;z.c();var e,t,n,i,r,a,s,l,c=D/10*8,d=D,u=qe.mobile(),h=Z.controls=(new qe.Container).addTo(Z).drag({onTop:!u});_=[],N=[];for(var f=0;f<Y;f++){if(n=(new qe.Container).addTo(h),"number"==typeof E){var g=zik(S);t=new qe.Container(g,k).pos(f*M/(Y-1)-g/2,f%2*g).addTo(Z),a=new qe.Circle(c,frame.light,frame.dark,2).centerReg(t).pos(g/2,0),i=new qe.Rectangle(d,d,T(j),frame.dark,2).centerReg(t).pos(0,0),r=new qe.Rectangle(d,d,T(j),frame.dark,2).centerReg(t).pos(g,0);var p=t.localToLocal(a.x,a.y,h);a.x=p.x,a.y=p.y,a.addTo(n);var v=t.localToLocal(i.x,i.y,h);i.x="none"==j?0:v.x-a.x,i.y="none"==j?0:v.y-a.y,i.addTo(n);var b=t.localToLocal(r.x,r.y,h);r.x="none"==j?0:b.x-a.x,r.y="none"==j?0:b.y-a.y,r.addTo(n),n.pos(a.x,a.y),a.x=0,a.y=0,"none"==j&&a.addTo(n)}else s=(l=E[f])[8]?l[8]:j,n=(new qe.Container).addTo(h).pos(l[0],l[1]),a=new qe.Circle(c,frame.light,frame.dark,2).centerReg(n).pos(l[2],l[3]),i=new qe.Rectangle(d,d,T(s),frame.dark,2).centerReg(n,0).pos(l[4],l[5]),r=new qe.Rectangle(d,d,T(s),frame.dark,2).centerReg(n,0).pos(l[6],l[7]);N.push(a),a.mySet=n,a.rect1=i,a.rect2=r,a.index=f,u?a.on("mousedown",x):a.on("dblclick",C),i.ball=a,(i.other=r).ball=a,r.other=i,u&&(a.expand(),i.expand(),r.expand()),e=[n,a,i,r,l?l[8]:j],_.push(e)}var y,w=!1;function x(e){w?(e.preventDefault(),C(e)):(w=!0,setTimeout(function(){w=!1},300))}function C(e){if(!Z.lockControlType){var t=e.target,o=_[t.index][4]?_[t.index][4]:j;Math.abs(t.rect1.x)<=2&&Math.abs(t.rect1.y)<=2&&Math.abs(t.rect2.x)<=2&&Math.abs(t.rect2.y)<=2&&(o="none"),"none"==o&&t.parent.addChildAt(t,0),"none"==(o=Z.types[(Z.types.indexOf(o)+(frame.shiftKey?-1:1)+Z.types.length)%Z.types.length])&&(t.rect1.x=t.rect1.y=t.rect2.x=t.rect2.y=0,t.parent.addChild(t),e.stopImmediatePropagation()),_[t.index][4]=o,t.rect1.color=T(o),t.rect2.color=T(o),A();var n=new createjs.Event("change");n.controlType="bezierSwitch",Z.dispatchEvent(n),t.stage.update()}}function T(e){var t={mirror:frame.purple,free:frame.yellow,none:frame.blue};return t[e]?t[e]:frame.pink}function A(){m.c();var e=qe.mobile()?10:6;if(k<e){m.s("rgba(0,0,0,.01)").ss(e);var t=(r=_[0][0]).localToLocal(_[0][1].x,_[0][1].y,G);m.mt(t.x,t.y);for(var o=0;o<_.length;o++){var n=o,i=(o+1)%_.length,r=_[n][0],a=_[n][1],s=_[n][2],l=_[n][3],c=_[i][0],d=_[i][1],u=_[i][2],h=(_[i][3],r.localToLocal(l.x,l.y,G)),f=c.localToLocal(u.x,u.y,G),g=c.localToLocal(d.x,d.y,G);o!=_.length-1&&m.bt(h.x,h.y,f.x,f.y,g.x,g.y)}}Z.colorCommand||(Z.colorCommand=R=m.s(K).command),Z.thicknessCommand||(Z.thicknessCommand=F=m.ss(q).command),B&&(Z.dashedCommand||(Z.dashedCommand=W=m.sd([10,10],5).command)),t=(r=_[0][0]).localToLocal(_[0][1].x,_[0][1].y,G),m.mt(t.x,t.y),z.c().s(frame.darker).ss(1);for(o=0;o<_.length;o++){n=o,i=(o+1)%_.length,r=_[n][0],a=_[n][1],s=_[n][2],l=_[n][3],c=_[i][0],d=_[i][1],u=_[i][2],_[i][3],h=r.localToLocal(l.x,l.y,G),f=c.localToLocal(u.x,u.y,G),g=c.localToLocal(d.x,d.y,G);o!=_.length-1&&m.bt(h.x,h.y,f.x,f.y,g.x,g.y);t=r.localToLocal(a.x,a.y,G);var p=r.localToLocal(s.x,s.y,G);0==o&&(s.visible=0),0!=o&&z.mt(t.x,t.y).lt(p.x,p.y),o!=_.length-1&&z.mt(t.x,t.y).lt(h.x,h.y),o==_.length-1&&(l.visible=0)}B&&m.append(Z.dashedCommand),m.append(Z.thicknessCommand),m.append(Z.colorCommand)}A(),h.on("mousedown",function(e){if(!Z.lockControls)if(y={x:e.target.x,y:e.target.y},e.target.rect1){(t=e.target).startX=t.x,t.startY=t.y,t.rect1.startX=t.rect1.x,t.rect1.startY=t.rect1.y,t.rect2.startX=t.rect2.x,t.rect2.startY=t.rect2.y}else{var t,o=e.target,n=(t=o.ball).index,i=j;if(zot(_[n][4])||(i=_[n][4]),"straight"==i){var r=o.other,a=r.x-t.x,s=r.y-t.y;r.stickLength=Math.sqrt(Math.pow(a,2)+Math.pow(s,2))}}}),h.on("pressmove",function(e){if(!Z.lockControls){if(e.target.rect1){var t=(n=e.target).x-n.startX,o=n.y-n.startY;n.rect1.x=n.rect1.startX+t,n.rect1.y=n.rect1.startY+o,n.rect2.x=n.rect2.startX+t,n.rect2.y=n.rect2.startY+o}else{var n,i=e.target,r=i.other,a=(n=i.ball).index,s=j;if(zot(_[a][4])||(s=_[a][4]),"straight"==s||"mirror"==s){var l=i.x-n.x,c=i.y-n.y;if("mirror"==s)r.x=n.x-l,r.y=n.y-c;else{var d=Math.atan2(c,l),u=-r.stickLength*Math.cos(d+Math.PI),h=-r.stickLength*Math.sin(d+Math.PI);r.x=n.x-u,r.y=n.y-h}}}A()}}),h.on("pressup",function(e){if(!Z.lockControls){var t=e.target.x!=y.x||e.target.y!=y.y,o=new createjs.Event("change");if(e.target.rect1){o.controlType="bezierPoint";var n=e.target,i=n.mySet,r=n.rect1,a=n.rect2;r.x-=n.x,r.y-=n.y,a.x-=n.x,a.y-=n.y,i.x+=n.x,i.y+=n.y,n.x=0,n.y=0}else o.controlType="bezierHandle";t&&Z.dispatchEvent(o)}}),Z.changeControl=function(e,t,o,n,i,r,a,s,l){var c;if(c=zob(Z.changeControl,arguments,"index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY"))return c;if(zot(e))for(var d=0;d<_.length;d++)Z.changeControl(d,t,o,n,i,r,a,s);else{var u=_[e];"none"==(u[4]=t)?(zot(a)||(u[2].x=a),zot(s)||(u[2].y=s),u[2].pos(u[1].x,u[1].y),u[3].pos(u[1].x,u[1].y),u[1].parent.addChild(u[1])):(zot(o)||(u[2].x=o),zot(n)||(u[2].y=n),zot(i)||(u[3].x=i),zot(r)||(u[3].y=r),zot(a)||(u[1].x=a),zot(s)||(u[1].y=s),u[1].parent.addChildAt(u[1],0)),l&&(Z.update(),Z.stage&&Z.stage.update())}},Z.update=function(){return A(),Z},G.drag({onTop:!1}),H=G.on("mousedown",function(){y={x:G.x,y:G.y},L&&Z.parent.setChildIndex(Z,Z.parent.numChildren-1)}),V=G.on("pressmove",function(){h.x=G.x,h.y=G.y,o.x=G.x,o.y=G.y}),U=G.on("pressup",function(){var e=G.x!=y.x||G.y!=y.y;if(Z.x+=G.x,Z.y+=G.y,h.x=h.y=o.x=o.y=G.x=G.y=0,e){var t=new createjs.Event("change");t.controlType="move",Z.dispatchEvent(t)}Z.stage.update()}),Z.move||J(!0);Z.on("mousedown",function(){Z.toggle&&(X||(Z.showControls(),Z.dispatchEvent("controlsshow")))});Z.added(function(){Z.toggleStageEvent=Z.stage.on("stagemousedown",function(e){Z.toggle&&Z.stage&&X&&!Z.hitTestPoint(e.stageX,e.stageY,!1)&&(Z.hideControls(),Z.dispatchEvent("controlshide"))})}),Z.on("click",function(){Z.ctrlclick&&zimDefaultFrame.ctrlKey&&setTimeout(function(){Z.clone(!0).addTo(Z.stage).mov(0,100),Z.toggle&&(Z.hideControls(),Z.dispatchEvent("controlshide"));var e=new createjs.Event("change");e.controlType="move",Z.dispatchEvent(e),Z.stage.update()},50)}),Z.hideControls=function(){return h.visible=!1,o.visible=!1,X=!1,Z.stage&&Z.stage.update(),!Z.toggle&&Z.move&&J(),Z},O||Z.hideControls(),Z.showControls=function(){return h.visible=!0,o.visible=!0,X=!0,h.pos(G.x,G.y),o.pos(G.x,G.y),Z.addChildAt(G,0),Z.move&&!Z.toggle&&Q(),Z.stage&&Z.stage.update(),Z},Z.recordData=function(e){zot(e)&&(e=!1);var t={type:"Blob",index:Z.parent?Z.parent.getChildIndex(Z):-1,x:Z.x,y:Z.y,points:Z.recordPoints(),color:Z.color,thickness:Z.thickness,move:Z.move,toggle:Z.toggle,controlsVisible:X};return e?JSON.stringify(t):t},Z.setData=function(e,t){if(!zot(e)){if(t)try{e=JSON.parse(e)}catch(e){return}var o=e.index;zot(o)&&(o=-1),delete e.index;var n=e.points;for(var i in zot(n)||Z.setPoints(n),delete e.points,Z.num=n.length,e)Z[i]=e[i];return Z.parent&&Z.parent.setChildIndex(Z,o),Z.update(),Z}},Z.recordPoints=function(e){zot(e)&&(e=!1);var t=Z.points;if(e){if(!o){var o=new qe.Pane({container:Z.stage,width:500,height:500,drag:!0}),n=new qe.TextArea(400,400);n.centerReg(o)}n.text=JSON.stringify(t),o.show()}return t},Z.setPoints=function(e){for(var t,o,n=0;n<e.length;n++)t=_[n],o=e[n],zot(t)||(t[0].x=o[0],t[0].y=o[1],t[1].x=o[2],t[1].y=o[3],t[2].x=o[4],t[2].y=o[5],t[3].x=o[6],t[3].y=o[7],t[4]=o[8]);return Z.update(),Z},Z.clone=function(e){e?Z.colorCommand:Z.color,e?Z.colorCommand:Z.color;return Z.cloneProps(new qe.Squiggle(e?Z.colorCommand:Z.color,Z.lineWidth,Z.recordPoints(),M,S,j,I,h.visible,P,D,Z.toggle,Z.move,Z.ctrlclick,B))}}function Q(){r||(r=!0,G.drag({onTop:!1}),H=G.on("mousedown",H),V=G.on("pressmove",V),U=G.on("pressup",U))}function J(e){(e||r)&&(r=!1,G.noDrag(),G.off("mousedown",H),G.off("pressmove",V),G.off("pressup",U))}},qe.extend(qe.Squiggle,qe.Container,"clone","zimContainer",!1),qe.Blob=function(e,t,o,k,E,M,S,j,I,O,P,n,D,i,B,L){var r;if(r=zob(qe.Blob,arguments,"color, borderColor, borderWidth, points, radius, controlLength, controlType, lockControlType, showControls, lockControls, handleSize, toggle, move, ctrlclick, dashed, onTop",this))return r;z_d("53.5"),zot(E)&&(E=100),this.zimContainer_constructor(-E,-E,2*E,2*E),this.type="Blob",zot(B)&&(B=!1),!zot(t)&&zot(o)?o=1:!zot(o)&&zot(t)&&(t="black"),zot(e)&&(e=0<o?"rgba(0,0,0,0)":frame.green),e.style&&(this.colorCommand=e,e="black"),t&&t.style&&(this.borderColorCommand=t,t="black"),zot(k)&&(k=4);var Y="number"==typeof k?k:k.length;zot(M)&&(M=4*E/Y),zot(S)&&(S="straight"),zot(j)&&(j=!1),zot(I)&&(I=!0);var X=I;zot(O)&&(O=!1),zot(P)&&(P=qe.mobile()?20:10),zot(n)&&(n=!0),zot(D)&&(D=!0),zot(i)&&(i=!1),this.toggle=n,this.move=D,this.lockControlType=j,this.ctrlclick=i,this.num=Y,zot(L)&&(L=!0);var _,R,F,W,N,G,H,V,U,Z,K=this,q=(this.types=["mirror","straight","free","none"],e),Q=t,J=o,a=K.move;function s(){if(!((Y="number"==typeof k?k:k.length)<=0)){M=4*E/Y,H=K.shape=(new qe.Shape).addTo(K);var o=K.sticks=(new qe.Shape).addTo(K),p=H.graphics;p.c();var m=o.graphics;m.c();var e,t,n,i,r,a,s,l,c=P/10*8,d=P,u=qe.mobile(),h=K.controls=(new qe.Container).addTo(K).drag({onTop:!u});_=[],G=[];for(var f=0;f<Y;f++){if(n=(new qe.Container).addTo(h),"number"==typeof k){var g=zik(M);(t=new qe.Container(g,E).reg(g/2,E).addTo(K)).rotation=f/Y*360,a=new qe.Circle(c,frame.light,frame.dark,2).centerReg(t).pos(g/2,0),i=new qe.Rectangle(d,d,T(S),frame.dark,2).centerReg(t).pos(0,0),r=new qe.Rectangle(d,d,T(S),frame.dark,2).centerReg(t).pos(g,0);var z=t.localToLocal(a.x,a.y,h);a.x=z.x,a.y=z.y,a.addTo(n);var v=t.localToLocal(i.x,i.y,h);i.x="none"==S?0:v.x-a.x,i.y="none"==S?0:v.y-a.y,i.addTo(n);var b=t.localToLocal(r.x,r.y,h);r.x="none"==S?0:b.x-a.x,r.y="none"==S?0:b.y-a.y,r.addTo(n),n.pos(a.x,a.y),a.x=0,a.y=0,"none"==S&&a.addTo(n)}else s=(l=k[f])[8]?l[8]:S,n=(new qe.Container).addTo(h).pos(l[0],l[1]),a=new qe.Circle(c,frame.light,frame.dark,2).centerReg(n).pos(l[2],l[3]),i=new qe.Rectangle(d,d,T(s),frame.dark,2).centerReg(n,0).pos(l[4],l[5]),r=new qe.Rectangle(d,d,T(s),frame.dark,2).centerReg(n,0).pos(l[6],l[7]);G.push(a),a.mySet=n,a.rect1=i,a.rect2=r,a.index=f,u?a.on("mousedown",x):a.on("dblclick",C),i.ball=a,(i.other=r).ball=a,r.other=i,u&&(a.expand(),i.expand(),r.expand()),e=[n,a,i,r,l?l[8]:S],_.push(e)}var y,w=!1;A(),h.on("mousedown",function(e){if(!K.lockControls)if(y={x:e.target.x,y:e.target.y},e.target.rect1){(t=e.target).startX=t.x,t.startY=t.y,t.rect1.startX=t.rect1.x,t.rect1.startY=t.rect1.y,t.rect2.startX=t.rect2.x,t.rect2.startY=t.rect2.y}else{var t,o=e.target,n=(t=o.ball).index,i=S;if(zot(_[n][4])||(i=_[n][4]),"straight"==i){var r=o.other,a=r.x-t.x,s=r.y-t.y;r.stickLength=Math.sqrt(Math.pow(a,2)+Math.pow(s,2))}}}),h.on("pressmove",function(e){if(!K.lockControls){if(e.target.rect1){var t=(n=e.target).x-n.startX,o=n.y-n.startY;n.rect1.x=n.rect1.startX+t,n.rect1.y=n.rect1.startY+o,n.rect2.x=n.rect2.startX+t,n.rect2.y=n.rect2.startY+o}else{var n,i=e.target,r=i.other,a=(n=i.ball).index,s=S;if(zot(_[a][4])||(s=_[a][4]),"straight"==s||"mirror"==s){var l=i.x-n.x,c=i.y-n.y;if("mirror"==s)r.x=n.x-l,r.y=n.y-c;else{var d=Math.atan2(c,l),u=-r.stickLength*Math.cos(d+Math.PI),h=-r.stickLength*Math.sin(d+Math.PI);r.x=n.x-u,r.y=n.y-h}}}A()}}),h.on("pressup",function(e){if(!K.lockControls){var t=e.target.x!=y.x||e.target.y!=y.y,o=new createjs.Event("change");if(e.target.rect1){o.controlType="bezierPoint";var n=e.target,i=n.mySet,r=n.rect1,a=n.rect2;r.x-=n.x,r.y-=n.y,a.x-=n.x,a.y-=n.y,i.x+=n.x,i.y+=n.y,n.x=0,n.y=0}else o.controlType="bezierHandle";t&&K.dispatchEvent(o)}}),K.changeControl=function(e,t,o,n,i,r,a,s,l){var c;if(c=zob(K.changeControl,arguments,"index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY"))return c;if(zot(e)){for(var d=0;d<_.length;d++)K.changeControl(d,t,o,n,i,r,a,s);return K}var u=_[e];return"none"==(u[4]=t)?(zot(a)||(u[1].x=a),zot(s)||(u[1].y=s),u[2].pos(u[1].x,u[1].y),u[3].pos(u[1].x,u[1].y),u[1].parent.addChild(u[1])):(zot(a)||(u[1].x=a),zot(s)||(u[1].y=s),zot(o)||(u[2].x=o),zot(n)||(u[2].y=n),zot(i)||(u[3].x=i),zot(r)||(u[3].y=r),u[1].parent.addChildAt(u[1],0)),l&&(K.update(),K.stage&&K.stage.update()),K},K.update=function(){return A(),K},H.drag({onTop:!1}),V=H.on("mousedown",function(){y={x:H.x,y:H.y},L&&K.parent.setChildIndex(K,K.parent.numChildren-1)}),U=H.on("pressmove",function(){h.x=H.x,h.y=H.y,o.x=H.x,o.y=H.y}),Z=H.on("pressup",function(){var e=H.x!=y.x||H.y!=y.y;if(K.x+=H.x,K.y+=H.y,h.x=h.y=o.x=o.y=H.x=H.y=0,e){var t=new createjs.Event("change");t.controlType="move",K.dispatchEvent(t)}K.stage.update()}),D||ee(!0);K.on("mousedown",function(){K.toggle&&(X||(K.showControls(),K.dispatchEvent("controlsshow")))});K.added(function(){K.toggleStageEvent=K.stage.on("stagemousedown",function(e){K.toggle&&K.stage&&X&&!K.hitTestPoint(e.stageX,e.stageY,!1)&&(K.hideControls(),K.dispatchEvent("controlshide"))})}),K.on("click",function(){K.ctrlclick&&zimDefaultFrame.ctrlKey&&setTimeout(function(){K.clone(!0).addTo(K.stage).mov(100),K.toggle&&(K.hideControls(),K.dispatchEvent("controlshide"));var e=new createjs.Event("change");e.controlType="move",K.dispatchEvent(e),K.stage.update()},50)}),K.hideControls=function(){return h.visible=!1,o.visible=!1,X=!1,K.stage&&K.stage.update(),!K.toggle&&K.move&&ee(),K},I||K.hideControls(),K.showControls=function(){return h.visible=!0,o.visible=!0,X=!0,h.pos(H.x,H.y),o.pos(H.x,H.y),K.addChildAt(H,0),K.move&&!K.toggle&&$(),K.stage&&K.stage.update(),K},K.recordData=function(e){zot(e)&&(e=!1);var t={type:"Blob",index:K.parent?K.parent.getChildIndex(K):-1,x:K.x,y:K.y,points:K.recordPoints(),color:K.color,borderColor:K.borderColor,borderWidth:K.borderWidth,move:K.move,toggle:K.toggle,controlsVisible:X};return e?JSON.stringify(t):t},K.setData=function(e,t){if(!zot(e)){if(t)try{e=JSON.parse(e)}catch(e){return}var o=e.index;zot(o)&&(o=-1),delete e.index;var n=e.points;for(var i in zot(n)||K.setPoints(n),delete e.points,this.num=n.length,e)K[i]=e[i];return K.parent&&K.parent.setChildIndex(K,o),K}},K.recordPoints=function(e){zot(e)&&(e=!1);var t=K.points;if(e){if(!o){var o=new qe.Pane({container:K.stage,width:500,height:500,drag:!0}),n=new qe.TextArea(400,400);n.centerReg(o)}n.text=JSON.stringify(t),o.show()}return t},K.setPoints=function(e){for(var t,o,n=0;n<e.length;n++)t=_[n],o=e[n],zot(t)||(t[0].x=o[0],t[0].y=o[1],t[1].x=o[2],t[1].y=o[3],t[2].x=o[4],t[2].y=o[5],t[3].x=o[6],t[3].y=o[7],t[4]=o[8]);return K.update(),K},K.clone=function(e){e?K.colorCommand:K.color,e?K.colorCommand:K.color;return K.cloneProps(new qe.Blob(e?K.colorCommand:K.color,e?K.borderColorCommand:K.borderColor,K.borderWidth,K.recordPoints(),E,M,S,j,h.visible,O,P,K.toggle,K.move,K.ctrlclick,B))}}function x(e){w?(e.preventDefault(),C(e)):(w=!0,setTimeout(function(){w=!1},300))}function C(e){if(!K.lockControlType){var t=e.target,o=_[t.index][4]?_[t.index][4]:S;Math.abs(t.rect1.x)<=2&&Math.abs(t.rect1.y)<=2&&Math.abs(t.rect2.x)<=2&&Math.abs(t.rect2.y)<=2&&(o="none"),"none"==o&&t.parent.addChildAt(t,0),"none"==(o=K.types[(K.types.indexOf(o)+(frame.shiftKey?-1:1)+K.types.length)%K.types.length])&&(t.rect1.x=t.rect1.y=t.rect2.x=t.rect2.y=0,t.parent.addChild(t),e.stopImmediatePropagation()),_[t.index][4]=o,t.rect1.color=T(o),t.rect2.color=T(o),A();var n=new createjs.Event("change");n.controlType="bezierSwitch",K.dispatchEvent(n),t.stage.update()}}function T(e){var t={mirror:frame.purple,free:frame.yellow,none:frame.blue};return t[e]?t[e]:frame.pink}function A(){p.c(),K.colorCommand||(K.colorCommand=R=p.f(q).command),(zot(J)||0<J)&&(zot(Q)&&zot(J)||(zot(Q)&&(Q="black"),K.borderColorCommand||(K.borderColorCommand=F=p.s(Q).command),K.borderWidthCommand||(K.borderWidthCommand=W=p.ss(J).command),B&&(K.borderDashedCommand||(K.borderDashedCommand=N=p.sd([10,10],5).command))));var e=(i=_[0][0]).localToLocal(_[0][1].x,_[0][1].y,H);p.mt(e.x,e.y),m.c().s(frame.darker).ss(1);for(var t=0;t<_.length;t++){var o=t,n=(t+1)%_.length,i=_[o][0],r=_[o][1],a=_[o][2],s=_[o][3],l=_[n][0],c=_[n][1],d=_[n][2],u=(_[n][3],i.localToLocal(s.x,s.y,H)),h=l.localToLocal(d.x,d.y,H),f=l.localToLocal(c.x,c.y,H);p.bt(u.x,u.y,h.x,h.y,f.x,f.y);e=i.localToLocal(r.x,r.y,H);var g=i.localToLocal(a.x,a.y,H);m.mt(e.x,e.y).lt(g.x,g.y),m.mt(e.x,e.y).lt(u.x,u.y)}p.append(K.colorCommand),B&&p.append(K.borderDashedCommand),K.borderWidthCommand&&p.append(K.borderWidthCommand),K.borderColorCommand&&p.append(K.borderColorCommand)}}function $(){a||(a=!0,H.drag({onTop:!1}),V=H.on("mousedown",V),U=H.on("pressmove",U),Z=H.on("pressup",Z))}function ee(e){(e||a)&&(a=!1,H.noDrag(),H.off("mousedown",V),H.off("pressmove",U),H.off("pressup",Z))}s(),Object.defineProperty(K,"move",{get:function(){return D},set:function(e){D!=e&&((D=e)?$():ee())}}),Object.defineProperty(K,"toggle",{get:function(){return n},set:function(e){n!=e&&((n=e)?K.move&&$():!X&&K.move&&ee())}}),Object.defineProperty(K,"controlsVisible",{get:function(){return X},set:function(e){(X=e)?K.showControls():K.hideControls()}});var l=O;Object.defineProperty(K,"lockControls",{get:function(){return l},set:function(e){(l=e)?(K.controls.mouseChildren=!1,K.controls.mouseEnabled=!1):(K.controls.mouseChildren=!0,K.controls.mouseEnabled=!0)}}),K.lockControls=l,Object.defineProperty(K,"color",{get:function(){return q},set:function(e){zot(e)&&(e="black"),q=e,R.style=q}}),Object.defineProperty(K,"borderColor",{get:function(){return Q},set:function(e){Q=e,F?F.style=Q:drawShape()}}),Object.defineProperty(K,"borderWidth",{get:function(){return J},set:function(e){0<e||(e=0),J=e,W&&0!=J?(W.width=J,B&&(N.segments=[20,10],N.offset=5)):drawShape()}}),Object.defineProperty(K,"points",{get:function(){for(var e,t,o=[],n=0;n<_.length;n++)t=_[n],e=[qe.decimals(t[0].x),qe.decimals(t[0].y),qe.decimals(t[1].x),qe.decimals(t[1].y),qe.decimals(t[2].x),qe.decimals(t[2].y),qe.decimals(t[3].x),qe.decimals(t[3].y)],t[4]&&"straight"!==t[4]&&e.push(t[4]),o.push(e);return o},set:function(e){K.dispose(),k=e,K.shape&&(K.shape.graphics.clear(),K.sticks.graphics.clear(),K.controls.noDrag(),K.removeAllChildren(),delete K.shape,delete K.sticks,delete K.controls),s(),K.lockControls=l}}),Object.defineProperty(K,"pointObjects",{get:function(){return _},set:function(e){zon&&zog("Blob() - pointObjects is read only - but its contents can be manipulated - use blob.update() after changes")}}),this.dispose=function(){if(K.shape){K.shape.cursor="default";for(var e=0;e<K.points.length;e++)K.points[e][1].removeAllEventListeners();for(e=0;e<G.length;e++)G[e].removeAllEventListeners();K.sticks.removeFrom(K),K.controls.removeFrom(K),K.shape.removeAllEventListeners(),K.controls.removeAllEventListeners(),K.removeAllEventListeners(),K.toggleStageEvent&&K.stage.off("stagemousedown",K.toggleStageEvent)}}},qe.extend(qe.Blob,qe.Container,"clone","zimContainer",!1),qe.Label=function(e,n,t,o,i,r,a,s,l,c,d,u,h,f,g,p,m,z,v,b,y,w,x){var C;if(C=zob(qe.Label,arguments,"text, size, font, color, rollColor, shadowColor, shadowBlur, align, valign, lineWidth, lineHeight, fontOptions, backing, outlineColor, outlineWidth, backgroundColor, backgroundBorderColor, backgroundBorderWidth, backgroundCorner, backgroundDashed, padding, paddingHorizontal, paddingVertical",this))return C;z_d("54"),this.zimContainer_constructor(),this.type="Label",zot(e)&&(e="LABEL");var T=!1;""===e&&(e=" ",T=!0),zot(n)&&(n=36),zot(t)&&(t="arial"),zot(o)&&(o="black"),zot(i)&&(i=o),zot(r)&&(r=-1),zot(a)&&(a=14),zot(s)&&(s="left"),zot(l)&&(l="top"),zot(u)&&(u=""),!zot(f)&&zot(g)&&(g=Math.round(.2*n)),!zot(g)&&zot(f)&&(f="#000000"),zot(g)&&(g=0),zot(y)&&(y=10),zot(w)&&(w=y),zot(x)&&(x=y);var A=this;this.mouseChildren=!1;var k=this.label=new createjs.Text(String(e),u+" "+n+"px "+t,o);if(k.textAlign=s,k.lineWidth=c,k.lineHeight=d,k.textBaseline="alphabetic",0<g){var E=this.outlineLabel=k.clone();E.color=f,E.outline=g,this.addChild(E)}function M(){var e,t=k.getBounds();if("top"==l?(k.y=n-n/6,E&&(E.y=n-n/6),e=0):"center"==l||"middle"==l?(e=-t.height/2,k.y=.3*n,E&&(E.y=.3*n)):e=-t.height,h){var o=h.getBounds();A.setBounds(o.x,o.y,o.width,o.height)}else zot(p)?(A.setBounds(t.x,e,t.width,t.height),S.graphics.c().f("black").r(A.getBounds().x,A.getBounds().y,A.getBounds().width,A.getBounds().height)):(A.setBounds(t.x,e,t.width,t.height),A.removeChild(A.background),A.background=new qe.Rectangle(A.getBounds().width+2*w,A.getBounds().height+2*x,p,m,z,v,null,b),qe.center(A.background,A,0));qe.center(k,A),k.y+=n/32,E&&(qe.center(E,A,A.numChildren-2),E.y+=n/32)}if(-1!=r&&0<a&&(k.shadow=new createjs.Shadow(r,3,3,a)),this.addChild(k),zot(h)&&zot(p)){var S=new createjs.Shape;A.hitArea=S}M(),zot(h)||(this.backing=h,qe.center(h,this,0)),Object.defineProperty(A,"text",{get:function(){return" "==k.text&&T?"":k.text},set:function(e){T=!1,""===e&&(e=" ",T=!0),k.text=String(e),E&&(E.text=String(e)),M()}}),Object.defineProperty(A,"color",{get:function(){return o},set:function(e){i==o&&(i=e),o=e,k.color=o,qe.OPTIMIZE||!zns&&OPTIMIZE||!A.stage||A.stage.update()}}),Object.defineProperty(A,"outlineColor",{get:function(){return f},set:function(e){f=e,E&&(E.color=f),qe.OPTIMIZE||!zns&&OPTIMIZE||!A.stage||A.stage.update()}}),Object.defineProperty(A,"rollColor",{get:function(){return i},set:function(e){i=e}}),this._enabled=!0,Object.defineProperty(A,"enabled",{get:function(){return A._enabled},set:function(e){ve(A,e),k.color=o,A.mouseChildren=!1,qe.OPTIMIZE||!zns&&OPTIMIZE||!A.stage||A.stage.update()}}),this.showRollColor=function(e){return zot(e)&&(e=!0),k.color=e?i:o,A.stage&&A.stage.update(),A},this.on("mouseover",function(e){A.showRollColor()}),this.on("mouseout",function(e){A.showRollColor(!1)}),this.clone=function(){return A.cloneProps(new qe.Label(A.text,n,t,o,i,r,a,s,l,c,d,u,zot(h)?null:h.clone(),f,g,p,m,z,v,b,y,w,x))},this.dispose=function(){return A.removeAllEventListeners(),!0}},qe.extend(qe.Label,qe.Container,"clone","zimContainer"),qe.Button=function(r,a,t,o,n,i,s,l,c,d,u,h,f,g,p,m,z,v,b,y,w,x,C,T,A,k,E,M,S,j,I,O){var e;if(e=zob(qe.Button,arguments,"width, height, label, color, rollColor, borderColor, borderRollColor, borderWidth, corner, shadowColor, shadowBlur, hitPadding, gradient, gloss, flatBottom, dashed, backing, rollBacking, rollPersist, icon, rollIcon, toggle, rollToggle, toggleEvent, wait, waitTime, waitColor, rollWaitColor, waitTextColor, rollWaitTextColor, waitModal, waitEnabled",this))return e;z_d("55"),this.zimContainer_constructor(),this.type="Button",zot(r)&&(r=200),zot(a)&&(a=60),zot(o)&&(o="#C60"),zot(n)&&(n="#F93"),zot(E)&&(E=o),zot(M)&&(M=n),zot(i)&&(i=null),zot(s)&&(s=zot(i)?null:i),zot(l)&&(l=null),zot(c)&&(c=20),zot(d)&&(d="rgba(0,0,0,.3)"),zot(u)&&(u=14),zot(h)&&(h=0),zot(f)&&(f=0),zot(g)&&(g=0),zot(p)&&(p=!1),zot(t)&&(t=zot(y)?"PRESS":""),!zot(x)&&zot(T)&&(T=qe.mobile()?"mousedown":"click"),"string"!=typeof t&&"number"!=typeof t||(t=new qe.Label(t,36,"arial","white",null,null,null,"center","middle")),zot(b)&&(b=!1),this.rollPersist=b,zot(m)&&(m=!1),zot(x)||"Label"!=x.type||zon&&zog("ZIM Button() - do not pass Label to toggle parameter - just pass a String");var P,D=this;this.mouseChildren=!1,this.cursor="pointer",D.focus=!1,zot(z)?P=new qe.Rectangle(r,a,o,i,l,c,p,m):((P=z).x=r/2,P.y=a/2,zot(v)||(v.x=r/2,v.y=a/2,this.rollBacking=v)),this.addChild(P),this.backing=P,zot(y)||(this.addChild(y),y.x=r/2,y.y=a/2,this.icon=y),zot(w)||((this.rollIcon=w).x=r/2,w.y=a/2);var B,L,Y=p?0:c;if(0<f&&zot(z)){var X=new createjs.Shape;X.graphics.lf(["rgba(255,255,255,"+f+")","rgba(0,0,0,"+f+")"],[0,1],0,0,0,a-l),X.graphics.rc(l/2,l/2,r-l,a-l,c,c,Y,Y),P.addChild(X)}if(0<g&&zot(z)){var _=new createjs.Shape;_.graphics.f("rgba(255,255,255,"+g+")"),_.graphics.rc(l/2,l/2,r-l,(a-l)/2,c,c,0,0),_.graphics.f("rgba(0,0,0,"+g+")"),_.graphics.rc(l/2,a/2,r-l,(a-l)/2,0,0,Y,Y),P.addChild(_)}function R(){(L=new createjs.Shape).graphics.f("#000").r(-h,-h,r+2*h,a+2*h),D.hitArea=B=L}0<h&&R(),-1!=d&&0<u&&(P.shadow=new createjs.Shadow(d,3,3,u),zot(v)||(v.shadow=new createjs.Shadow(d,3,3,u))),this.setBounds(0,0,r,a),this.addChild(t),t.center(this),t.y+=1,this.label=t;var F,W,N,G,H,V=!1,U=D.waiting=!1,Z=D.label.color,K=D.label.rollColor;this.on("mousedown",function(){V=!0,zot(A)||D.waiting||(U=!0,zot(O)&&(O=!0),I&&(H=D.stage.on("stagemousedown",function(e){D.hitTestPoint(e.stageX,e.stageY)||D.clearWait()},null,!0)),setTimeout(function(){D.waiting=!0},50),W=t.text,N=o,zot(S)||(D.label.color=S),zot(j)||(D.label.rollColor=j),G=D.enabled,!O&&D.enabled&&(D.enabled=!1),D.text=A,P.color=E,zot(k)&&(k=3e4),F&&F.clear(),F=timeout(k,function(){D.enabled||(D.enabled=G),D.clearWait(),D.dispatchEvent("waited")}),D.stage&&D.stage.update())}),this.clearWait=function(){return F&&(H&&D.stage.off("stagemousedown",H),F.clear(),D.text=W,P.color=N,D.label.color=Z,D.label.rollColor=K,setTimeout(function(){D.waiting=!1},55),U=!1,D.stage&&D.stage.update()),D},this.removeWait=function(){return D.clearWait(),A=null,D},this.on("pressup",function(){V=!1,D.rollPersist&&!q&&Q()});var q=!1;function Q(){zot(z)?(P.color=U?E:o,P.borderColor=i):zot(v)||(zot(y)&&D.toggled?(D.removeChild(C),D.addChildAt(x,0)):(D.removeChild(v),D.addChildAt(z,0))),zot(w)||(D.toggled?(D.removeChild(C),D.addChild(x)):(D.removeChild(w),D.addChild(y))),D.label.showRollColor(!1),D.stage&&D.stage.update()}this.on("mouseover",function(e){q=!0,zot(z)?(P.color=U?M:n,P.borderColor=s):zot(v)||(zot(y)&&D.toggled?(D.removeChild(x),D.addChildAt(C,0)):(D.removeChild(z),D.addChildAt(v,0)));zot(w)||(D.toggled?(D.removeChild(x),D.addChild(C)):(D.removeChild(y),D.addChild(w)));D.label.showRollColor(),D.stage&&D.stage.update()}),this.on("mouseout",function e(t){q=!1;D.off("mouseout",e);D.rollPersist&&V||Q()}),this.toggled=!1,this.toggleObj=x,this.rollToggle=C;var J=t.text;function $(){"string"==typeof x?(D.text=D.toggled?x:J,qe.OPTIMIZE||!zns&&OPTIMIZE||!D.stage||D.stage.update()):zot(y)?D.setBackings(D.toggled?x:z,D.toggled?C:v):D.setIcons(D.toggled?x:y,D.toggled?C:w)}function ee(e,t,o,n,i){D.contains(D[e])?(D.removeChild(D[e]),D.addChildAt(o,i)):D.contains(D[t])&&(D.removeChild(D[t]),D.addChildAt(n,i)),D[e]=o,D[t]=n,D[e]&&(D[e].x=r/2,D[e].y=a/2),D[t]&&(D[t].x=r/2,D[t].y=a/2),qe.OPTIMIZE||!zns&&OPTIMIZE||!D.stage||D.stage.update()}zot(x)||this.on(T,function(){U||(D.toggled=!D.toggled,$(D.toggled))}),Object.defineProperty(D,"text",{get:function(){return" "==t.text?"":t.text},set:function(e){t.text=e,t.center(this),t.y+=1}}),Object.defineProperty(D,"color",{get:function(){return o},set:function(e){o=e,P.color?P.color=o:zon&&zog("zim.Button - backing has no color property"),qe.OPTIMIZE||!zns&&OPTIMIZE||!D.stage||D.stage.update()}}),Object.defineProperty(D,"rollColor",{get:function(){return n},set:function(e){n=e}}),Object.defineProperty(D,"borderColor",{get:function(){return i},set:function(e){i=e,P.borderColor&&(P.borderColor=e)}}),Object.defineProperty(D,"borderRollColor",{get:function(){return s},set:function(e){s=e}}),Object.defineProperty(D,"hitPadding",{get:function(){return h},set:function(e){0==(h=e)?B&&(this.hitArea=null):R()}}),this._enabled=!0,Object.defineProperty(D,"enabled",{get:function(){return D._enabled},set:function(e){ve(D,e),D.mouseChildren=!1,t.color=t.color,qe.OPTIMIZE||!zns&&OPTIMIZE||!D.stage||D.stage.update()}}),this.setBackings=function(e,t){return ee("backing","rollBacking",e,t,0),D},this.setIcons=function(e,t){return ee("icon","rollIcon",e,t,D.numChildren-1),D},this.toggle=function(e){return zot(e)?D.toggled=!D.toggled:D.toggled=e,$(),D},this.clone=function(){var e=new qe.Button(r,a,t.clone(),o,n,i,s,l,c,d,u,h,f,g,p,m,zot(z)?null:z.clone(),zot(v)?null:v.clone(),b,zot(y)?null:y.clone(),zot(w)?null:w.clone(),zot(x)?null:"string"==typeof x?x:x.clone(),zot(C)?null:C.clone(),T,A,k,E,M,S,j,I,O);return D.cloneProps(e)},this.dispose=function(){return D.removeAllEventListeners(),D.removeChild(P),D.removeChild(v),D.removeChild(y),D.removeChild(D.label),D.label&&D.label.dispose(),y=v=P=null,!(D.label=null)}},qe.extend(qe.Button,qe.Container,"clone","zimContainer",!1),qe.CheckBox=function(t,o,e,n,i,r){var a;if(a=zob(qe.CheckBox,arguments,"size, label, startChecked, color, margin, indicatorType",this))return a;z_d("56"),this.zimContainer_constructor(),this.type="CheckBox",zot(t)&&(t=60),zot(o)&&(o=null),"string"!=typeof o&&"number"!=typeof o||(o=new qe.Label(o,5*t/6,"arial",n));var s=!zot(e)&&e;zot(n)&&(n="#111"),zot(i)&&(i=10),"box"!=r&&"square"!=r&&"x"!=r&&(r="check"),this.setBounds(-i,-i,t+2*i,t+2*i);var l=this;this.cursor="pointer";var c=new qe.Shape,d=c.graphics;d.f("rgba(255,255,255,.5)").r(0,0,t,t),d.s(n).ss(t/10).r(t/7,t/7,t-t/7*2,t-t/7*2),this.addChild(c);var u=t;o&&(this.addChild(o),o.x=1.3*t+i,o.y=t/8,this.label=o,this.setBounds(-i,-i,t+3*i+o.getBounds().width,Math.max(t+2*i,o.getBounds().height)),u=o.x+o.width);var h=new qe.Shape;(d=h.graphics).f("rgba(0,0,0,.01)").r(this.getBounds().x,this.getBounds().y,u+2*i,this.getBounds().height),this.hitArea=h;var f=new qe.Shape,g=f.graphics,p="#000";"check"==r?g.f(p).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"):"box"==r||"square"==r?g.f(p).dr(-35,-35,70,70):g.f(p).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg");f.setBounds(-47.5,-47.5,95,95);var m=t/161;f.scaleX=f.scaleY=m,f.alpha=.9,f.x=t/2,f.y=t/2,s&&this.addChild(f),this.on((zns?"mousedown"==qe.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(e){s=!s,l.setChecked(s),l.dispatchEvent("change")}),Object.defineProperty(l,"checked",{get:function(){return s},set:function(e){l.setChecked(e)}}),Object.defineProperty(l,"text",{get:function(){if(o)return o.text},set:function(e){o&&(o.text=e,qe.OPTIMIZE||!zns&&OPTIMIZE||!l.stage||l.stage.update())}}),Object.defineProperty(f,"color",{get:function(){return p},set:function(e){s&&l.removeChild(f),f=new createjs.Shape,g=f.graphics,p=e,g.f(p).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"),f.scaleX=f.scaleY=m,f.alpha=.9,f.x=t/2,f.y=t/2,s&&l.addChild(f),qe.OPTIMIZE||!zns&&OPTIMIZE||!l.stage||l.stage.update()}}),Object.defineProperty(l,"check",{get:function(){return f},set:function(e){zog("ZIM CheckBox - check is read only")}}),this._enabled=!0,Object.defineProperty(l,"enabled",{get:function(){return l._enabled},set:function(e){ve(l,e)}}),this.setChecked=function(e){return zot(e)&&(e=!0),(s=e)?l.addChild(f):l.removeChild(f),qe.OPTIMIZE||!zns&&OPTIMIZE||!l.stage||l.stage.update(),l},this.clone=function(){return l.cloneProps(new qe.CheckBox(t,o.clone(),e,n,i,r))},this.dispose=function(){return l.removeAllEventListeners(),!0}},qe.extend(qe.CheckBox,qe.Container,"clone","zimContainer",!1),qe.RadioButtons=function(l,a,s,c,d,u,o){var e;if(e=zob(qe.RadioButtons,arguments,"size, buttons, vertical, color, spacing, margin, always",this))return e;z_d("57"),this.zimContainer_constructor(),this.type="RadioButtons",zot(l)&&(l=60),l=Math.max(5,l),zot(a)&&(a=["A","B","C"]),zot(s)&&(s=!0),zot(c)&&(c="#111"),zot(d)&&(d=s?.2*l:l),zot(u)&&(u=l/5);var h,f=this;if(this.cursor="pointer",this.labels=[],this.dots=[],"string"==typeof a){var t=a;a=[];for(var n=0;n<t.length;n++)a.push({label:t[n]})}var g=new qe.Container;function i(e){var t=g.getChildIndex(e.target);o&&f.selectedIndex==t||(f.setSelected(t),f.dispatchEvent("change"))}this.addChild(g),function(){for(var e,t,o=!1,n=a.length-1;0<=n;n--)(e=a[n]).selected&&!0===e.selected&&(o?e.selected="false":(o=!0,f.id=e.id));g.removeAllChildren(),f.buttons=[];for(var i=0,n=0;n<a.length;n++){if("string"==typeof(e=a[n])||"number"==typeof e){var r={selected:!1,label:new qe.Label(e,5*l/6,"arial",c)};e=r}(e.label&&"string"==typeof e.label||"number"==typeof e.label)&&(e.label=new qe.Label(e.label,5*l/6,"arial",c)),f.labels.push(e.label),e.index=n,a[n]=e,(t=p(e.selected,e.label)).type="RadioButton",(t.obj=e).selected&&(h=t.obj),g.addChild(t),s?(t.y=i,i+=t.getBounds().height+d):(t.x=i,i+=t.getBounds().width+d)}}();for(var r=0;r<g.numChildren;r++)g.getChildAt(r).on((zns?"mousedown"==qe.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",i);function p(e,t){var o=new qe.Container;f.buttons.push(o),o.mouseChildren=!1,o.setBounds(-u,-u,l+2*u,l+2*u);var n=new qe.Shape,i=n.graphics;i.f("rgba(255,255,255,.5)").dc(l/2,l/2,l/1.85),i.s(c).ss(l/9).dc(l/2,l/2,l/2-l/2/5),o.addChild(n);var r=o.check=new qe.Circle(l/5.2,"rgba(0,0,0,.7)");f.dots.push(r),r.mouseEnabled=!1,r.alpha=.95,r.regX=r.regY=-l/2;var a=l;t&&(o.addChild(t),t.x=o.getBounds().width,t.y=l/8,o.setBounds(-u,-u,l+2*u+t.getBounds().width,Math.max(l+2*u,t.getBounds().height)),a=t.x+t.width,o.text=t.text),e&&(o.addChild(r),f.label=t,f.label&&(f.text=t.text));var s=new qe.Shape;return(i=s.graphics).f("rgba(0,0,0,.01)").r(o.getBounds().x,o.getBounds().y,a+2*u,o.getBounds().height),o.hitArea=s,o}this.getBounds()||this.setBounds(0,0,l,l),this.setBounds(-u,-u,this.getBounds().width+u,this.getBounds().height+u),this.setSelected=function(e){if(zot(e)&&(e=-1),-1==e||g.getChildAt(e)){for(var t,o=0;o<g.numChildren;o++)(t=g.getChildAt(o)).removeChild(t.check);if(0<=e){t=g.getChildAt(e);var n=-2;h&&(n=h.index),h=t.obj}return-1==e||n==h.index?(h=null,f.id=null,f.label=null,f.text=""):(t.addChild(t.check),f.id=h.id,f.label=h.label,f.label&&(f.text=f.label.text)),qe.OPTIMIZE||!zns&&OPTIMIZE||!f.stage||f.stage.update(),f}},Object.defineProperty(f,"selected",{get:function(){return h},set:function(e){zog("ZIM RadioButton - selected is read only")}}),Object.defineProperty(f,"selectedIndex",{get:function(){return h?h.index:-1},set:function(e){var t=e;o&&f.selectedIndex==t||f.setSelected(t)}}),this._enabled=!0,Object.defineProperty(f,"enabled",{get:function(){return f._enabled},set:function(e){ve(f,e)}}),this.clone=function(){for(var e=qe.copy(a),t=0;t<e.length;t++)e[t].label=e[t].label.clone();return f.cloneProps(new qe.RadioButtons(l,e,s,c,d,u,o))},this.dispose=function(){for(var e=0;e<g.numChildren;e++)g.getChildAt(e).removeAllEventListeners();return f.removeAllEventListeners(),!0}},qe.extend(qe.RadioButtons,qe.Container,"clone","zimContainer",!1),qe.Pane=function(a,s,n,i,r,l,c,d,u,h,f,g,p,m,z,v,b,y,w,x,C,T){var e;if(e=zob(qe.Pane,arguments,"width, height, label, color, drag, resets, modal, corner, backdropColor, shadowColor, shadowBlur, center, displayClose, backdropClose, backing, fadeTime, container, bar, barColor, barHeight, close, closeColor",this))return e;z_d("58"),this.zimContainer_constructor(),this.type="Pane";var t="zim display - Pane(): Please pass in a reference to a container with bounds set as first parameter";if(zot(b)){if(!zimDefaultFrame)return void zog(t);b=zimDefaultFrame.stage}else{if(!b.getBounds)return void zog(t);if(zot(b.getStage))return void zog("zim display - Pane(): The container must have a stage property")}zot(a)&&(a=200),zot(s)&&(s=200),zot(n)&&(n=null),"string"!=typeof n&&"number"!=typeof n||(n=new qe.Label(n,40,"arial","black")),zot(i)&&(i="white"),zot(r)&&(r=!1),zot(l)&&(l=!0),zot(c)&&(c=!0),zot(d)&&(d=20),zot(u)&&(u="rgba(0,0,0,.2)"),zot(h)&&(h="rgba(0,0,0,.3)"),zot(f)&&(f=20),zot(g)&&(g=!0),zot(p)&&(p=!0),r&&(p=!1),zot(m)&&(m=!0),zot(v)&&(v=0);var o=this.backdrop=new qe.Shape;o.type="CreateJS_Shape";var A=o.graphics;A.f(u),A.drawRect(-5e3,-5e3,1e4,1e4),this.setBounds(-a/2,-s/2,a,s);var k=this;o.on((zns?"mousedown"==qe.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",m?O:function(e){e.stopImmediatePropagation()});var E,M,S,j,I=new qe.Dictionary(!0);function O(e){P(),b.stage.update(),k.dispatchEvent("close"),e.stopImmediatePropagation()}(o.on("mousedown",function(e){e.stopImmediatePropagation()}),c&&this.addChild(o),E=zot(z)?this.display=new qe.Rectangle({width:a,height:s,color:i,corner:d}):z,p&&(E.cursor="pointer",E.on((zns?"mousedown"==qe.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",O)),-1!=h&&0<f&&(E.shadow=new createjs.Shadow(h,8,8,f)),E.on("click",function(e){e.stopImmediatePropagation()}),this.resetX,this.resetY,r)&&(E.cursor="pointer",E.on("mousedown",function(e){isNaN(k.resetX)&&(k.resetX=k.x),isNaN(k.resetY)&&(k.resetY=k.y),M=e.stageX-k.x,S=e.stageY-k.y,E.cursor="pointer"}),E.on("pressmove",function(e){var t,o,n,i=(t=e.stageX-M,o=e.stageY-S,t=Math.max(a/2,Math.min(b.getBounds().width-a/2,t)),o=Math.max(s/2,Math.min(b.getBounds().height-s/2,o)),{x:t,y:o});k.x=i.x,k.y=i.y;for(var r=0;r<k.numChildren;r++)(n=k.getChildAt(r)).constructor!=qe.TextArea&&n.constructor!=qe.Loader||n.resize();b.stage.update()}),this.on("pressup",function(e){E.cursor="pointer",b.stage.update()}));if(E.centerReg(this),n&&(this.addChild(n),qe.center(n,this),this.label=n,this.text=n.text,n.mouseEnabled=!1),!zot(y)){"string"==typeof y&&(y=new qe.Label(y)),barTitle=y,zot(x)&&(x=1.5*barTitle.height),zot(w)&&(w="rgba(0,0,0,.2)"),k.bar=y=new qe.Container(a,x).centerReg(k).mov(0,-s/2+x/2),y.mouseEnabled=!1,y.mouseChildren=!1;k.bar.backing=new qe.Rectangle(a,x,w,null,null,.95*d,!0).addTo(y);barTitle.center(y).pos(20)}C&&(zot(T)&&(T="#555"),(C=k.close=new qe.Shape(-40,-40,80,80)).graphics.f(T).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),y?C.addTo(k).scaleTo(y,null,50).mov(a/2-30,-s/2+x/2).expand(40):C.addTo(k).sca(.3).mov(a/2-33,-s/2+30),C.cursor="pointer",C.on((zns?"mousedown"==qe.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",O));function P(){function e(){var e;b.removeChild(k);for(var t=0;t<k.numChildren;t++)if((e=k.getChildAt(t)).constructor==qe.TextArea||e.constructor==qe.Loader){var o={obj:e,depth:k.getChildIndex(e)};I.add(e,o)}for(t=k.numChildren-1;0<=t;t--)(e=k.getChildAt(t)).constructor!=qe.TextArea&&e.constructor!=qe.Loader||k.removeChild(e);if(qe.OPTIMIZE||!zns&&OPTIMIZE||b.stage.update(),l&&(isNaN(k.resetX)||(k.x=k.resetX),isNaN(k.resetY)||(k.y=k.resetY)),k.zimAccessibility){var n=k.zimAccessibility;n.resize(k),j?j.focus():k.zimTabTag.nextSibling.focus(),setTimeout(function(){n.talk("Pane has been closed.")},50)}}0<v?k.animate({obj:{alpha:0},time:v,call:e}):e()}Object.defineProperty(k,"text",{get:function(){return" "==n.text?"":n.text},set:function(e){n.text=e}}),this._enabled=!0,Object.defineProperty(k,"enabled",{get:function(){return k._enabled},set:function(e){ve(k,e)}}),this.hide=function(){return P(),k},this.show=function(){g&&isNaN(k.resetX)&&(k.x=b.getBounds().width/2,k.y=b.getBounds().height/2),b.addChild(k);for(var e=0;e<I.length;e++)k.addChildAt(I.values[e].obj,I.values[e].depth);if(0<v?(k.alpha=0,k.animate({alpha:1},v)):b.stage&&b.stage.update(),k.zimAccessibility){var t=k.zimAccessibility;setTimeout(function(){t.activatedObject&&(j=t.activatedObject.zimTabTag)},50),t.resize(k),t.tabIndex=k.zimTabIndex}return k},this.toggle=function(){return b.contains(k)?k.hide():k.show(),k},this.clone=function(){var e=n.x,t=n.y,o=k.cloneProps(new qe.Pane(a,s,n.clone(),i,r,l,c,d,u,h,f,g,p,m,zot(z)?z.clone():null,v,b,y,w,x,C,T));return o.label.x=e,o.label.y=t,o},this.dispose=function(){return E.removeAllEventListeners(),C&&C.removeAllEventListeners(),k.removeChild(E),!(E=null)}},qe.extend(qe.Pane,qe.Container,"clone","zimContainer",!1),qe.Window=function(d,u,o,n,h,i,f,g,p,m,e,r,a,s,l,c,z,v,b,y,w,t,x){var C;if(C=zob(qe.Window,arguments,"width, height, color, borderColor, borderWidth, padding, corner, swipe, indicatorActive, indicatorDrag, indicatorColor, indicatorAlpha, indicatorFade, slide, slideDamp, slideSnap, interactive, shadowColor, shadowBlur, paddingHorizontal, paddingVertical, scrollWheel, damp",this))return C;z_d("58.1"),this.zimContainer_constructor(),this.type="Window",zot(d)&&(d=300),zot(u)&&(u=200),zot(o)&&(o="#333"),zot(n)&&(n="#999"),zot(h)&&(h=1),zot(i)&&(i=10),zot(f)&&(f=0),zot(g)&&(g=!0),zot(p)&&(p=!0),zot(m)&&(m=!1),zot(e)&&(e=n),zot(r)&&(r=.3),zot(a)&&(a=!0),m&&(a=!1),zot(s)&&(s=!0),zot(l)&&(l=.6),zot(c)&&(c="vertical"),zot(z)&&(z=!0),zot(v)&&(v="rgba(0,0,0,.3)"),zot(b)&&(b=20),zot(w)&&(w=i),zot(y)&&(y=i),zot(t)&&(t=!0);var T=this;this.scrollX=this.scrollY=this.scrollXMax=this.scrollYMax=0;var A=this.backing=new qe.Shape;this.addChild(A);var k=new createjs.Shape,E=k.graphics;this.addChild(k);var M=this.content=new qe.Container;if(this.addChild(M),M.mask=k,!z)var S=new createjs.Shape;if(0<h){var j=new createjs.Shape;this.addChild(j)}function I(){T.setBounds(0,0,d,u),A.graphics.c().f(o).rr(0,0,d,u,f),-1!=v&&0<b&&(A.shadow=new createjs.Shadow(v,8,8,b)),0<h&&j.graphics.c().s(n).ss(h).rr(0,0,d,u,f)}I();var O,P,D,B,L,Y,X,_,R,F,W=this.indicator={};if(W.color=e,W.size=6,W.minSize=2*W.size,W.spacing=3.5+h/2,W.margin=0,W.corner=W.size/2,W.showTime=500,W.fadeTime=3e3,p){var N=W.horizontal=new qe.Shape,G=N.graphics;N.alpha=r,this.addChild(N),m&&N.drag({localBounds:!0});var H=W.vertical=new qe.Shape,V=H.graphics;H.alpha=r,this.addChild(H),m&&H.drag({localBounds:!0})}function U(){qe.dragRect(M,new createjs.Rectangle(0,0,D?-T.scrollXMax:0,B?-T.scrollYMax:0))}this.update=function(){p&&(G.clear(),V.clear()),L=p?W.size+2*W.spacing:0,Y=M.getBounds().width,X=M.getBounds().height,D=d-y<Y&&(p||!0===g||"auto"==g||"horizontal"==g),B=u-w<X&&(p||!0===g||"auto"==g||"vertical"==g),T.scrollXMax=Y+2*y-d+(B?L+W.margin:0),T.scrollYMax=X+2*w-u+(D?L+W.margin:0),E.clear();var e=h/2,t=h/2,o=d-(B&&p?W.size+2*W.spacing:0)-(B?0:h),n=u-(D&&p?W.size+2*W.spacing:0)-(D?0:h);E.f("rgba(0,0,0,.01)").rr(e,t,o,n,f),z||(S.graphics.c().f("red").dr(e,t,o,n),M.hitArea=S);var i=Math.max(f,Math.min(W.corner,W.spacing)),r=i+h/2,a=i+(B?L:0)+h/2,s=i+h/2,l=i+(D?L:0)+h/2;if(D&&p&&(indicatorLength=Math.max(W.minSize,(d-r-a)*(d-r-a)/(Y+y+W.margin)),G.f(W.color).rr(0,0,indicatorLength,W.size,W.corner),N.x=r,N.y=u-W.size-W.spacing,O=new qe.Proportion(-T.scrollXMax,0,r,d-indicatorLength-a,-1),m)){N.setBounds(0,0,indicatorLength,W.size);var c=new createjs.Rectangle(r,N.y,d-indicatorLength-r-a,0);N.dragRect(c),N.proportion=new qe.Proportion(c.x,c.x+c.width,0,-T.scrollXMax),N.off("pressmove",_),_=N.on("pressmove",function(){T.dispatchEvent("scrolling"),M.x=N.proportion.convert(N.x)})}if(B&&p&&(indicatorLength=Math.max(W.minSize,(u-s-l)*(u-s-l)/(X+w+W.margin)),V.f(W.color).rr(0,0,W.size,indicatorLength,W.corner),H.x=d-W.size-W.spacing,H.y=s,P=new qe.Proportion(-T.scrollYMax,0,s,u-indicatorLength-l,-1),m)){H.setBounds(0,0,W.size,indicatorLength);c=new createjs.Rectangle(H.x,s,0,u-indicatorLength-s-l);H.dragRect(c),H.proportion=new qe.Proportion(c.y,c.y+c.height,0,-T.scrollYMax),H.off("pressmove",R),R=H.on("pressmove",function(){T.dispatchEvent("scrolling"),he=M.y=H.proportion.convert(H.y)})}$(),clearTimeout(F),F=setTimeout(function(){U()},300)},this.resize=function(e,t){return zot(e)&&(e=d),zot(t)&&(t=u),d=e,u=t,I(),T.update(),he=M.y,x&&ge.immediate(he),T},this.add=function(e){if(me(e),e.getBounds())return M.addChild(e),0==e.x&&(e.x=y),0==e.y&&(e.y=w),T.update(),T;zog("SwipeBox.add() - please add content with bounds set")};var Z,K,q,Q=!(this.remove=function(e){return M.removeChild(e),T.update(),T});function J(){he=M.y,x&&ge.immediate(he),p&&$()}function $(){T.dispatchEvent("scrolling"),S&&(S.x=-M.x,S.y=-M.y),D&&p&&(N.x=O.convert(M.x)),B&&p&&(H.y=P.convert(M.y))}function ee(e){qe.Ticker.remove(J),Q=!1,D&&a&&qe.animate(N,{alpha:0},W.fadeTime),B&&a&&qe.animate(H,{alpha:0},W.fadeTime)}if(g&&M.on("mousedown",function(){Q||qe.Ticker.add(J,M.stage),Q=!0,D&&p&&a&&qe.animate(N,{alpha:r},W.showTime),B&&p&&a&&qe.animate(H,{alpha:r},W.showTime)}),this.on("added",function(){if(me(T),!g)return;qe.drag({obj:M,currentTarget:!0,localBounds:!0,slide:s,slideDamp:l,slideSnap:(!0===g||"auto"==g||"vertical"==g)&&c}),M.getBounds()&&0<M.getBounds().width&&setTimeout(function(){U()},300)},null,!0),s?M.on("slidestop",ee):M.on("mousedown",function(){M.stage.on("stagemouseup",ee,null,!0)}),z){var te,oe,ne;M.on("mousedown",function(e){te=e.stageX,oe=Date.now()}),M.on("click",function(e){Date.now()-oe<600&&Math.abs(e.stageX-te)<5&&(T.contentMouse=M.globalToLocal(e.stageX,e.stageY),T.dispatchEvent("select"))}),M.on("mouseover",function(){ne=Date.now(),qe.Ticker.add(ue,M.stage)}),M.on("mouseout",function(){de||(T.dispatchEvent("hoverout"),de=!0);qe.Ticker.remove(ue)});var ie=0,re=0,ae=0,se=0,le=300,ce=2,de=!1;function ue(){if(!M.stage)return de||(T.dispatchEvent("hoverout"),de=!0),void qe.Ticker.remove(ue);Math.abs(ie-M.stage.mouseX)>ce||Math.abs(re-M.stage.mouseY)>ce?(de||(T.dispatchEvent("hoverout"),de=!0),ne=Date.now(),ie=M.stage.mouseX,re=M.stage.mouseY):Date.now()-ne>le&&((Math.abs(ae-M.stage.mouseX)>ce||Math.abs(se-M.stage.mouseY)>ce)&&(T.contentMouse=M.globalToLocal(M.stage.mouseX,M.stage.mouseY),T.dispatchEvent("hoverover"),ae=M.stage.mouseX,se=M.stage.mouseY,de=!1),ne=Date.now())}}var he=T.scrollY;if(t){function fe(e){if(T.dispatchEvent("scrolling"),B&&T.stage&&T.hitTestPoint(e.stageX,e.stageY)){zot(e)&&(e=event);var t=e.detail?-19*e.detail:e.wheelDelta;zot(t)&&(t=-19*e.deltaY),he+=t,he=Math.max(-T.scrollYMax,Math.min(0,he)),x||(T.scrollY=he,M.stage.update())}}Z=window.addEventListener("mousewheel",fe),K=window.addEventListener("wheel",fe),q=window.addEventListener("DOMMouseScroll",fe)}var ge,pe=!1;function me(e){x&&!pe&&e.stage&&(pe=!0,ge=new qe.Damp(T.scrollY,x),qe.Ticker.add(function(){Q||zot(he)||(T.scrollY=ge.convert(he))},e.stage))}Object.defineProperty(T,"scrollX",{get:function(){return M.x},set:function(e){M.x=e,$()}}),Object.defineProperty(T,"scrollY",{get:function(){return M.y},set:function(e){M.y=e,$()}}),this.clone=function(e){zot(e)&&(e=!0);var t=T.cloneProps(new qe.Window(d,u,o,n,h,i,f,g,p,m,W.color,r,a,s,l,c,z,v,b,y,w));return e&&(T.content.cloneChildren(t.content),t.update()),t},this.dispose=function(){return t&&(window.removeEventListener("mousewheel",Z),window.removeEventListener("wheel",K),window.removeEventListener("DOMMouseScroll",q)),T.removeAllEventListeners(),N.off("pressmove",_),H.off("pressmove",R),M.removeAllEventListeners(),qe.Ticker.remove(ue),qe.Ticker.remove(J),qe.noDrag(M),!0}},qe.extend(qe.Window,qe.Container,"clone","zimContainer",!1),qe.Waiter=function(i,r,e,t,o,n,a,s){var l;if(l=zob(qe.Waiter,arguments,"container, speed, color, circleColor, corner, shadowColor, shadowBlur, fadeTime",this))return l;z_d("59"),this.zimContainer_constructor(),this.type="Waiter";var c="zim display - Waiter(): Please pass in a reference to a container with bounds set as first parameter";if(zot(i)){if(!zimDefaultFrame)return void zog(c);i=zimDefaultFrame.stage}else{if(!i.getBounds)return void zog(c);if(zot(i.stage))return void zog("zim display - Waiter(): The container must have a stage property")}zot(r)&&(r=600),zot(e)&&(e="orange"),zot(t)&&(t="white"),zot(o)&&(o=16),zot(n)&&(n="rgba(0,0,0,.3)"),zot(a)&&(a=14),zot(s)&&(s=0);this.setBounds(-52,-20,104,40);var d=this,u=this.display=new qe.Shape;this.addChild(u),u.setBounds(0,0,104,40),u.regX=52,u.regY=20;var h=u.graphics;h.f(e),h.rr(0,0,104,40,o),-1!=n&&0<a&&(u.shadow=new createjs.Shadow(n,3,3,a)),u.on("click",function(e){e.stopImmediatePropagation()});var f,g,p,m=new qe.Container;this.addChild(m);for(var z=0;z<3;z++)(f=new createjs.Shape).graphics.f(t).dc(0,0,12),f.x=32*(z-1),m.addChild(f),f.cache(-12,-12,24,24),f.alpha=0;this.hide=function(){function e(){if(d.parent&&d.parent.removeChild(d),i.stage.update(),d.zimAccessibility){var e=d.zimAccessibility;e.resize(d),g?g.focus():d.zimTabTag.nextSibling.focus(),setTimeout(function(){e.talk("Waiter has finished.")},50)}}return 0<s?d.animate({obj:{alpha:0},time:s,call:e}):e(),d},this.show=function(){for(var e,t=0,o=0;o<m.numChildren;o++)d.alpha=0,createjs.Tween.get(d,{override:!0}).to({alpha:1},300),p=setTimeout(function(){m&&(e=m.getChildAt(t),createjs.Tween.get(e,{loop:!0}).to({alpha:1},r/3/2).wait(r/3).to({alpha:0},r/3).wait(r-r/3-r/3/2),t++)},o*r/3);if(d.ticker=createjs.Ticker.on("tick",function(){i.stage.update()}),d.x=i.getBounds().width/2,d.y=i.getBounds().height/2,i.addChild(d),0<s&&(d.alpha=0,d.animate({alpha:1},s)),d.zimAccessibility){var n=d.zimAccessibility;setTimeout(function(){n.activatedObject&&(g=n.activatedObject.zimTabTag)},50),n.resize(d),n.talk(d.zimTabTag.getAttribute("aria-label"))}return d},this.clone=function(){return d.cloneProps(new qe.Waiter(i,r,e,t,o,n,a,s))},this.dispose=function(){return d.ticker&&createjs.Ticker.off("tick",d.ticker),clearInterval(p),u.removeAllEventListeners(),d.removeChild(u),d.removeChild(m),!(m=u=null)}},qe.extend(qe.Waiter,qe.Container,"clone","zimContainer",!1),qe.Indicator=function(e,t,n,i,r,o,a,s,l,c,d,u,h,f){var g;if(g=zob(qe.Indicator,arguments,"width, height, num, color, offColor, borderColor, backingColor, indicatorType, fill, scale, lightScale, press, shadowColor, shadowBlur",this))return g;z_d("60"),this.zimContainer_constructor(),this.type="Indicator",zot(e)&&(e=300),zot(t)&&(t=50),zot(n)&&(n=6),zot(i)&&(i="#f58e25"),zot(r)&&(r="#666"),r<0&&(r="rgba(0,0,0,.01)"),o<0&&(o=null),zot(a)&&(a=-1),zot(s)&&(s="dot"),zot(l)&&(l=!1),zot(c)&&(c=1),zot(d)&&(d=1),zot(u)&&(u=!1),zot(h)&&(h="rgba(0,0,0,.3)"),zot(f)&&(f=5);var p,m=(zns?"mousedown"==qe.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",z=this;this.lights=[];new qe.Container;if(-1!=a){var v=new qe.Rectangle(e,t,a);this.addChild(v),this.backing=v}var b,y=this.lightsContainer=new qe.Container;this.addChild(y);var w=.5*t,x=e/(n+1),C=new createjs.Shape;"square"==s||"box"==s?C.graphics.f("black").dr(-x/2/d+w/2,-t/2+w/2,x/d,t):C.graphics.f("black").dr(-x/2/d,-t/2,x/d,t);for(var T=0;T<n;T++)"square"==s||"box"==s?((b=new qe.Rectangle(w,w,r,o)).regX=b.width/2,b.regY=b.height/2):b=new qe.Circle(w/2,r,o),this.lights.push(b),b.znum=T,b.scaleX=b.scaleY=d,b.hitArea=C,b.x=x+x*T,b.y=t/2,y.addChild(b);if(y.setBounds(0,0,e,t),y.regX=y.x=e/2,y.regY=y.y=t/2,this.addChild(y),-1!=h&&0<f&&(y.shadow=new createjs.Shadow(h,2,2,f)),u){y.cursor="pointer";y.on(m,function(e){p!=e.target.znum&&(A(p=e.target.znum),z.dispatchEvent("change"))})}function A(e){var t;n<=e&&(e=-1);for(var o=0;o<n;o++)t=l&&o<e?i:r,o==e&&(t=i),y.getChildAt(o).color=t;z.zimAccessibility&&z.zimAccessibility.changeTitle(z),qe.OPTIMIZE||!zns&&OPTIMIZE||!z.stage||z.stage.update()}y.scaleX=y.scaleY=c,Object.defineProperty(this,"selectedIndex",{get:function(){return p},set:function(e){p=Math.floor(e),A(p=qe.constrain(p,-1,n-1))}}),Object.defineProperty(this,"num",{get:function(){return n},set:function(e){zon&&zog("num is read only")}}),this._enabled=!0,Object.defineProperty(z,"enabled",{get:function(){return z._enabled},set:function(e){ve(z,e)}}),this.clone=function(){return z.cloneProps(new qe.Indicator(e,t,n,i,r,o,a,s,l,c,d,u,h,f))},this.dispose=function(){return z.removeAllEventListeners(),!0}},qe.extend(qe.Indicator,qe.Container,"clone","zimContainer",!1),qe.Stepper=function(n,e,o,t,s,l,i,r,a,c,d,u,h,f,g,p,m,z,v,b,y,w,x,C,T,A,k,E,M,S){var j;if(j=zob(qe.Stepper,arguments,"list, width, color, borderColor, label, vertical, arrows, corner, shadowColor, shadowBlur, continuous, display, press, hold, holdDelay, holdSpeed, drag, dragSensitivity, dragRange, stepperType, min, max, step, step2, arrows2, arrows2Scale, keyEnabled, keyArrows, rightForward, downForward",this))return j;z_d("61"),this.zimContainer_constructor(),this.type="Stepper",zot(n)&&(n=[0,1,2,3,4,5,6,7,8,9]),zot(e)&&(e=200),zot(o)&&(o="white"),zot(t)&&(t=null),zot(s)&&(s=""),"string"!=typeof s&&"number"!=typeof s||(s=new qe.Label(s,64,"arial","#555",null,null,null,"center")),zot(l)&&(l=!1),zot(i)&&(i=!0),zot(r)&&(r=16),zot(a)&&(a="rgba(0,0,0,.3)"),zot(c)&&(c=14),zot(d)&&(d=!1),zot(u)&&(u=!0),zot(h)&&(h=!0),zot(f)&&(f=!0),zot(g)&&(g=400),zot(p)&&(p=200),zot(m)&&(m=!0),(zot(z)||z<=0)&&(z=.1),zot(v)&&(v=200),zot(b)&&(b="list"),zot(y)&&(y=0),zot(w)&&(w=100),zot(x)&&(x=1),zot(C)&&(C=x),zot(T)&&C!=x&&"number"==b&&(T=!0),zot(A)&&(A=.5),zot(k)&&(k=!0),zot(E)&&(E=!0),zot(M)&&(M=!0),zot(S)&&(S="number"!=b);var I,O,P,D,B=this,L=100,Y=x,X=1;if("number"==b){if(y=Number(y),w=Number(w),NaN==y&&(y=0),NaN==w&&(w=100),w<y){X=-1;var _=w;w=y,y=_,O=w}else O=y;this.min=y,this.max=w,y<0&&0<w&&(O=0),x=Math.abs(x),P=Math.max(W(x),W(C))}else if("letter"==b){n="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),"string"!=typeof y&&(y="A"),"string"!=typeof w&&(w="Z"),y=y.substr(0,1).toUpperCase(),w=w.substr(0,1).toUpperCase();var R=n.indexOf(y);R<0&&(y="A",R=0);var F=n.indexOf(w);F<0&&(w="Z",F=n.length),F<R&&(n.reverse(),R=n.length-1-R,F=n.length-1-F),n=n.splice(R,F-R+1)}else b="list";function W(e){var t=String(e).split(".")[1];return t=t?t.length:0}var N=0,G=0;m&&this.on("mousedown",function(e){B.zimAccessibility&&B.zimAccessibility.aria||(this.stage.mouseMoveOutside=!0,N=e.rawX,G=e.rawY,D=this.stage.on("stagemousemove",function(e){N=e.rawX,G=e.rawY}))},null,!0),(this.label=s).mouseChildren=!1;s.mouseEnabled=!1;var H,V,U,Z,K,q,Q,J,$,ee,te,oe,ne,ie=!1;if(i||T){var re=new createjs.Shape;re.graphics.f("rgba(255,255,255,.11)").r(0,0,150,150),re.regX=75,re.regY=87.5}if(i&&(Z=this.containerPrev=new qe.Container,this.addChild(Z),Z.hitArea=re,K=this.arrowPrev=new qe.Triangle(L,80,80,o),-1!=a&&0<c&&(Z.shadow=new createjs.Shadow(a,3,3,c)),Z.addChild(K),Z.cursor="pointer",Z.on("mousedown",function(e){if(!B.zimAccessibility||!B.zimAccessibility.aria){Y=x;var t=l?S?1:-1:M?-1:1;de(t),le(t)}}),f&&Z.on("pressup",ce),l?(Z.rotation=180,Z.x=e/2,Z.y=u?Z.height+25+L+Z.height/2+25:2*Z.height):(Z.rotation=-90,Z.x=Z.height/2,Z.y=Z.width/2)),u){var ae,se=this.textBox=new qe.Shape;se.cursor="pointer",this.addChild(se),se.setBounds(0,0,e,L),null!=t&&se.graphics.s(t).ss(1.5),se.graphics.f(o).rr(0,0,e,L,r),-1!=a&&0<c&&(se.shadow=new createjs.Shadow(a,3,3,c)),i&&(l?i&&(se.y=K.height+25):i&&(se.x=K.height+25)),this.addChild(s),0<n.length&&(I=0,s.text=n[I]),s.x=50+se.x+se.getBounds().width/2,s.y=se.y+(se.getBounds().height-s.getBounds().height)/2,se.on("mousedown",function(e){B.zimAccessibility&&B.zimAccessibility.aria||(ae=B.currentValue,h&&de(1),le(1,!0),"number"==b&&(clearTimeout(U),ie=!0,U=setTimeout(function(){ie=!1},200)))}),se.on("pressup",function(){B.zimAccessibility&&B.zimAccessibility.aria||ie&&(he(O=Math.round(O),O),B.currentValue!=ae&&B.dispatchEvent("change"),ae=B.currentValue)})}else 0<n.length&&(I=0);function le(i,r,a){if(f){oe=B.stage.mouseX,holdY=B.stage.mouseY,0==oe&&(oe=1),0==holdY&&(holdY=1),m||(z=1),ne=new qe.Proportion(0,v,p,p*z);var s=p;H=setTimeout(function(){!0,function n(){V=setTimeout(function(){var e=i;if(m){var t=Math.abs(N-oe),o=Math.abs(G-holdY);l?(r||a||(t=0),a&&(o=0)):(r||a||(o=0),a&&(t=0)),(10<=t||10<=o)&&(o<t?(Y=l?C:x,e=0<N-oe?1:-1,s=ne.convert(Math.abs(oe-N))):(Y=l?x:C,e=0<G-holdY?1:-1,"number"!=b&&S||(e*=-1),s=ne.convert(Math.abs(holdY-G))))}de(e),n()},s)}()},g)}}function ce(){B.zimAccessibility&&B.zimAccessibility.aria||(!1,clearTimeout(H),clearTimeout(V))}function de(e){var t;if("number"==b){var o=O;O+=Y*e*X,O=qe.decimals(O,P),d?O>B.max?O=B.min:O<B.min&&(O=B.max):(O>B.max?(O=1==x?B.max:o,u&&(se.cursor="default")):u&&(se.cursor="pointer"),O<B.min&&(O=1==x?B.min:o))}else{if(t=I+e,d)t>n.length-1&&(t=0),t<0&&(t=n.length-1);else{if(t>n.length-1)return void(u&&(se.cursor="default"));if(u&&(se.cursor="pointer"),t<0)return}I=t}he("number"==b?O:n[I],"number"==b?O:I),B.currentValue!=ae&&B.dispatchEvent("change"),ae=B.currentValue}function ue(){B.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function he(e,t){I=t,u&&("number"==b&&0!=e&&0<P&&(e=qe.decimals(e,P,!0)),s.text=e,s.x=se.x+se.getBounds().width/2,s.y=se.y+(se.getBounds().height-s.getBounds().height)/2),i&&(Z.alpha=1,K.color=o,Z.cursor="pointer",q.alpha=1,Q.color=o,q.cursor="pointer",d||("number"==b?(I==B.min&&(0<X?fe():ge()),I==B.max&&(0<X?ge():fe())):(0==I&&(l?ge():fe()),I==n.length-1&&(l?fe():ge())))),!q||qe.OPTIMIZE||!zns&&OPTIMIZE||!q.stage?!s||qe.OPTIMIZE||!zns&&OPTIMIZE||!s.stage||s.stage.update():q.stage.update(),B.zimAccessibility&&B.zimAccessibility.changeTitle(B,null,!0)}function fe(){i&&(Z.alpha=.8,K.color="#aaa",Z.cursor="default")}function ge(){i&&(q.alpha=.8,Q.color="#aaa",q.cursor="default")}i&&(q=this.containerNext=new qe.Container,this.addChild(q),q.hitArea=re.clone(),Q=this.arrowNext=new qe.Triangle(L,80,80,o),-1!=a&&0<c&&(q.shadow=new createjs.Shadow(a,3,3,c)),q.addChild(Q),q.cursor="pointer",q.on("mousedown",function(e){if(!B.zimAccessibility||!B.zimAccessibility.aria){Y=x;var t=l?S?-1:1:M?1:-1;de(t),le(t)}}),f&&q.on("pressup",ce),l?(q.rotation=0,q.x=e/2,q.y=q.getBounds().height/2):(q.rotation=90,q.x=u?se.x+se.getBounds().width+q.getBounds().height/2+25:Z.x+Z.getBounds().width,q.y=q.getBounds().width/2)),f&&u&&se.on("pressup",ce),T&&((J=this.prev2=new qe.Container).hitArea=re.clone(),$=this.arrowPrev2=new qe.Triangle(L,80,80,"rgba(0,0,0,.2)",o,2),J.addChild($),J.cursor="pointer",J.sca(A),J.alpha=.5,J.on("mousedown",function(e){if(!B.zimAccessibility||!B.zimAccessibility.aria){Y=C;var t=l?M?-1:1:S?1:-1;de(t),le(t,null,!0)}}),f&&J.on("pressup",ce),(ee=this.next2=new qe.Container).hitArea=re.clone(),te=this.arrowNext2=new qe.Triangle(L,80,80,"rgba(0,0,0,.2)",o,2),ee.addChild(te),ee.cursor="pointer",ee.sca(A),ee.alpha=.5,ee.on("mousedown",function(e){if(!B.zimAccessibility||!B.zimAccessibility.aria){Y=C;var t=l?M?1:-1:S?-1:1;de(t),le(t,null,!0)}}),f&&ee.on("pressup",ce),l?(J.y=this.height/2,J.x=-J.width/2-25*Math.max(.2,Math.min(1,A)),J.rotation=270,ee.y=this.height/2,ee.x=this.width+ee.width/2+25*Math.max(.2,Math.min(1,A)),ee.rotation=90):(ee.x=this.width/2,ee.y=-ee.height/2-25*Math.max(.2,Math.min(1,A)),ee.rotation=0,J.x=this.width/2,J.y=this.height+J.height/2+25*Math.max(.2,Math.min(1,A)),J.rotation=180),this.addChild(J,ee)),Object.defineProperty(this,"stepperArray",{get:function(){if("number"==b){n=[];for(var e=B.min;e<=B.max;e+=Math.min(x,C))n.push(qe.decimals(e,P,null,!1))}return n},set:function(e){n=e,B.selectedIndex=B.selectedIndex}}),he("number"==b?O:n[I],"number"==b?O:I),Object.defineProperty(this,"selectedIndex",{get:function(){return"number"==b?B.stepperArray.indexOf(B.currentValue):I},set:function(e){zot(e)||("number"==b?(I=Math.min(B.stepperArray.length-1,Math.max(0,e)),he(O=B.stepperArray[I],O)):(e=Math.min(n.length-1,Math.max(0,e)),he(n[I=e],I)))}}),Object.defineProperty(this,"currentValue",{get:function(){return"number"==b?O:n[I]},set:function(e){if(!zot(e))if("number"==b){if(e=Number(e),B.max>B.min){if(e>B.max||e<B.min)return}else if(e<B.max||e>B.min)return;if(newIndex=B.stepperArray.indexOf(e),newIndex<0)return;I=newIndex,he(O=B.stepperArray[I],O)}else{if(!(-1<n.indexOf(e)))return;if((e=n.indexOf(e))==B.selectedIndex)return;he(n[I=e],I)}}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return B.currentValue},set:function(e){String(e)!=String(B.currentValue)&&(B.currentValue=e,B.dispatchEvent("change"))}}),Object.defineProperty(this,"continuous",{get:function(){return d},set:function(e){d=e,"number"==b?he(O,O):he(n[B.selectedIndex],B.selectedIndex)}}),this._enabled=!0,Object.defineProperty(B,"enabled",{get:function(){return B._enabled},set:function(e){ve(B,e),e?("number"==b?he(O,O):he(n[B.selectedIndex],B.selectedIndex),window.addEventListener("keydown",B.keyDownEvent)):(fe(),ge(),window.removeEventListener("keydown",B.keyDownEvent),u&&(s.mouseChildren=!1),u&&(s.mouseEnabled=!1)),!q||qe.OPTIMIZE||!zns&&OPTIMIZE||!q.stage?!s||qe.OPTIMIZE||!zns&&OPTIMIZE||!s.stage||s.stage.update():q.stage.update()}}),Object.defineProperty(this,"keyFocus",{get:function(){return zns?qe.KEYFOCUS==B:KEYFOCUS==B},set:function(e){zns?qe.KEYFOCUS=B:KEYFOCUS=B}}),(zns?qe.KEYFOCUS:KEYFOCUS)||ue(),this.on("mousedown",function(){ue()});var pe=!1,me=!1,ze=!1;this.on("mousedown",function(){B.zimAccessibility&&B.zimAccessibility.aria||(B.focus=!0,ze=me=!(pe=!0))}),this.keyDownEvent=function(e){if(B.stage&&(B.zimAccessibility&&B.focus||!B.zimAccessibility&&B.keyFocus)){e||(e=event);var t,o=e.keyCode;if(E&&37<=o&&o<=40){var n=S?40:38,i=M?39:37,r=S?38:40,a=M?37:39;o==n||o==i?(Y=l&&o==n||!l&&o==i?x:C,de(1)):o!=r&&o!=a||(Y=l&&o==r||!l&&o==a?x:C,de(-1))}if(k)if("number"==b)!e.shiftKey&&48<=o&&o<=57?t=o-48:96<=o&&o<=105?t=o-96:190==o?me=!0:173==o||189==o?(B.currentValue=-1*B.currentValue,B.currentValue!=ae&&B.dispatchEvent("change"),ae=B.currentValue,ze=!ze):46==o&&(me=!(pe=!0)),pe&&!zot(t)?(me&&(t/=10),ze&&(t*=-1),B.currentValue=t,pe=!1,B.currentValue!=ae&&B.dispatchEvent("change"),ae=B.currentValue):zot(t)||(me&&(t=String(t/10).substr(1)),B.currentValue=Number(Math.floor(Number(s.text))+String(t)),B.currentValue!=ae&&B.dispatchEvent("change"),ae=B.currentValue);else B.currentValue=String.fromCharCode(e.keyCode),B.currentValue!=ae&&B.dispatchEvent("change"),ae=B.currentValue}},window.addEventListener("keydown",this.keyDownEvent),this.next=function(){de(1)},this.prev=function(){de(-1)},this.clone=function(){return B.cloneProps(new qe.Stepper(n,e,o,t,s.clone(),l,i,r,a,c,d,u,h,f,g,p,m,z,v,b,y,w,x,C,T,A,k,E,M,S))},this.dispose=function(){return B.removeAllEventListeners(),window.removeEventListener("keydown",B.keyDownEvent),B.stage&&B.stage.off(D),!0}},qe.zut=function(e){if(zot(e)||!e.key)return!0;qe.async("https://zimjs.com/gamdata.php?id="+e.key+"&player="+e.player+"&score="+e.score+"&reverse="+e.info.reverse+"&total="+e.info.total+"&allowZero="+e.info.allowZero,e.info.type)},qe.extend(qe.Stepper,qe.Container,"clone","zimContainer",!1),qe.Slider=function(a,s,t,l,e,o,n,c,i,r,d,u,h,f){var g;if(g=zob(qe.Slider,arguments,"min, max, step, button, barLength, barWidth, barColor, vertical, useTicks, inside, keyArrows, keyArrowsStep, keyArrowsH, keyArrowsV",this))return g;if(z_d("62"),this.zimContainer_constructor(),this.type="Slider",zot(a)&&(a=0),zot(s)&&(s=10),s-a!=0){if(zot(t)&&(t=0),zot(e)&&(e=300),zot(o)&&(o=3),zot(n)&&(n="#666"),zot(c)&&(c=!1),zot(i)&&(i=!1),zot(r)&&(r=!1),zot(d)&&(d=!0),zot(h)&&(h=!0),zot(f)&&(f=!0),zot(u)&&(u=(s-a)/100),zot(l)){var p=30,m=40;c&&(p=50,m=40),l=new qe.Button(p,m,"","#fff","#ddd","#666",null,1,0,null,null,30)}var z,v;l.rollPersist=!0,c?(z=l.width,r?(v=e,this.setBounds(0,0,z,v)):(v=e+l.height,this.setBounds(-l.width/2,-l.height/2,z,v))):(v=Math.max(l.height,o),r?(z=e,this.setBounds(0,0,z,v)):(z=e+l.width,this.setBounds(-l.width/2,-l.height/2,z,v)));var b,y,w,x,C,T,A,k=this,E=a,M=0;if(this.button=l,this.cursor="pointer",i&&0!=t){x=this.ticks=new qe.Shape,this.addChild(x),(C=x.graphics).ss(1).s(n);var S=Math.round((s-a)/t),j=(s-a)/S;if(j!=t&&zon&&zog("zim.Slider() : non-divisible step ("+t+") adjusted"),t=j,r)var I=(e-(c?l.height:l.width))/Math.abs(S);else I=e/Math.abs(S)}if(c){var O=r?l.height/2:0;if((b=this.bar=new qe.Rectangle(o,e,n)).expand(20,0),b.centerReg(this),l.centerReg(this),w=b.getBounds(),y=new createjs.Rectangle(b.x,w.y+O,0,w.height-2*O),i&&0!=t){for(var P=0;P<=Math.abs(S);P++)C.mt(0,O+I*P).lt(20,O+I*P);x.x=b.x+15}}else{O=r?l.width/2:0;if((b=this.bar=new qe.Rectangle(e,o,n)).expand(0,20),b.centerReg(this),l.centerReg(this),w=b.getBounds(),y=new createjs.Rectangle(w.x+O,b.y,w.width-2*O,0),i&&0!=t){for(P=0;P<=Math.abs(S);P++)C.mt(O+I*P,0).lt(O+I*P,-20);x.y=b.y-10}}l.x=y.x,l.y=y.y,l.on("mousedown",function(e){k.focus=!0;var t=k.globalToLocal(e.stageX,e.stageY);T=t.x-l.x,A=t.y-l.y,k.stage&&(k.stage.mouseMoveOutside=!0)}),l.on("pressmove",function(e){_(e)}),b.on("mousedown",function(e){A=T=0,k.zimAccessibility&&k.zimAccessibility.aria||_(e)}),Object.defineProperty(this,"currentValue",{get:function(){return E},set:function(e){zot(e)||(a<s?(e<a&&(e=a),s<e&&(e=s)):(a<e&&(e=a),e<s&&(e=s)),E=e=X(e),c?(l.y=(e-s)/(a-s)*y.height+O,M=l.y):(l.x=(e-a)/(s-a)*y.width+O,M=l.x),F(),qe.OPTIMIZE||!zns&&OPTIMIZE||!k.stage||k.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return E},set:function(e){e!=k.currentValue&&(k.currentValue=e,k.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return a},set:function(e){zon&&zog("min is read only")}}),Object.defineProperty(this,"max",{get:function(){return s},set:function(e){zon&&zog("max is read only")}}),Object.defineProperty(this,"step",{get:function(){return t},set:function(e){zon&&zog("step is read only")}}),Object.defineProperty(this,"keyArrowsH",{get:function(){return h},set:function(e){h=e}}),Object.defineProperty(this,"keyArrowsV",{get:function(){return f},set:function(e){f=e}}),Object.defineProperty(this,"keyFocus",{get:function(){return zns?qe.KEYFOCUS==k:KEYFOCUS==k},set:function(e){zns?qe.KEYFOCUS=k:KEYFOCUS=k}}),(d&&zns?qe.KEYFOCUS:KEYFOCUS)||W(),this.on("mousedown",function(){d&&W()});var D=!1,B=!1,L=!1,Y=!1;this.keyDownEvent=function(e){k.stage&&(k.zimAccessibility&&k.focus||!k.zimAccessibility&&k.keyFocus)&&(37==e.keyCode&&h?D=!0:40==e.keyCode&&f?B=!0:39==e.keyCode&&h?L=!0:38==e.keyCode&&f&&(Y=!0),null==k.keyInterval&&(D||B||L||Y)&&(N(),k.keyTimeout=setTimeout(function(){null==k.keyInterval&&(D||B||L||Y)&&(k.keyInterval=setInterval(N,40))},140)))},window.addEventListener("keydown",this.keyDownEvent),k.keyUpEvent=function(e){37==e.keyCode?D=!1:40==e.keyCode?B=!1:39==e.keyCode?L=!1:38==e.keyCode&&(Y=!1),null==k.keyInterval||D||B||L||Y||(clearInterval(k.keyInterval),k.keyInterval=null)},window.addEventListener("keyup",this.keyUpEvent),this._enabled=!0,Object.defineProperty(k,"enabled",{get:function(){return k._enabled},set:function(e){ve(k,e),e?(window.addEventListener("keydown",k.keyDownEvent),window.addEventListener("keyup",k.keyUpEvent)):(window.removeEventListener("keydown",k.keyDownEvent),window.removeEventListener("keyup",k.keyUpEvent))}}),this.clone=function(){return k.cloneProps(new qe.Slider(a,s,t,l.clone(),e,o,n,c,i,r,d,u,h,f))},this.dispose=function(){return window.removeEventListener("keydown",k.keyDownEvent),window.removeEventListener("keyup",k.keyUpEvent),l.removeAllEventListeners(),!0}}else zog("ZIM Slider range must not be 0");function X(e){return 0==t?e:Math.round(e/t)*t}function _(e){var t,o,n,i=k.globalToLocal(e.stageX,e.stageY),r=(t=i.x-T,o=i.y-A,n=y,t=Math.max(n.x,Math.min(n.x+n.width,t)),o=Math.max(n.y,Math.min(n.y+n.height,o)),{x:t,y:o});c?(l.x=r.x,E=X((r.y-y.y)/y.height*(a-s)),l.y=y.y+E*y.height/(a-s),E+=s,l.y!=M&&k.dispatchEvent("change"),M=l.y):(E=X((r.x-y.x)/y.width*(s-a)),l.x=y.x+E*y.width/(s-a),E+=a,l.y=r.y,l.x!=M&&k.dispatchEvent("change"),M=l.x),F(),qe.OPTIMIZE||!zns&&OPTIMIZE||!k.stage||k.stage.update()}function R(e){return 0<e?1:-1}function F(){k.zimAccessibility&&k.zimAccessibility.changeTitle(k,null,!0)}function W(){k.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function N(){(D||B)&&(k.currentValueEvent-=0<t?t*R(s-a):u*R(s-a)),(L||Y)&&(k.currentValueEvent+=0<t?t*R(s-a):u*R(s-a))}},qe.extend(qe.Slider,qe.Container,"clone","zimContainer",!1),qe.Dial=function(n,i,r,e,t,o,a,s,l,c,d,u,h,f,g,p,m,z,v,b,y){var w;if(w=zob(qe.Dial,arguments,"min, max, step, width, color, indicatorColor, indicatorScale, indicatorType, innerCircle, innerScale, useTicks, innerTicks, tickColor, limit, keyArrows, keyArrowsStep, keyArrowsH, keyArrowsV, continuous, continuousMin, continuousMax",this))return w;if(z_d("63"),this.zimContainer_constructor(),this.type="Dial",zot(n)&&(n=0),zot(i)&&(i=10),i-n!=0){zot(r)&&(r=1),zot(e)&&(e=100),zot(t)&&(t="#666"),zot(o)&&(o="#222"),zot(a)&&(a=1),zot(s)&&(s="arrow"),zot(l)&&(l=!0),zot(c)&&(c=.5),zot(d)&&(d=!0),zot(u)&&(u=!1),zot(h)&&(h=o),zot(f)&&(f=!0),zot(g)&&(g=!0),zot(p)&&(p=(i-n)/100),zot(m)&&(m=!0),zot(z)&&(z=!0),zot(v)&&(v=!1),v&&(f=!1);var x=this;this.cursor="pointer";var C=e/2,T=n,A=0,k=this.backing=new qe.Circle(C,t);if(this.addChild(k),l){var E=u?"rgba(0,0,0,.2)":"rgba(0,0,0,.1)";"black"!=t&&"#000"!=t&&"#000000"!=t&&"#111"!=t&&"#111111"!=t||(E="#222");var M=this.inner=new qe.Circle(C*c,E);if(this.addChild(M),!u){var S=this.inner2=new qe.Circle(C*(c-.1),"rgba(0,0,0,.1)");this.addChild(S)}}var j,I,O,P,D=Math.abs(i-n)/r;if(d&&0!=r){ticks=this.ticks=new qe.Container,this.addChild(ticks);for(var B=0;B<(v?D:D+1);B++){var L;(L=new qe.Rectangle(1,.2*C,h)).regY=C*(u?c-.05:1.28),L.regX=.5,L.rotation=360/(v?D:D+1)*B,ticks.addChild(L)}}if(this.setBounds(-C,-C,e,e),"dot"==s||"circle"==s){var Y=this.indicator=new qe.Container,X=this.indicatorShape=new qe.Circle(.19*C,o);Y.addChild(X),qe.sca(Y,a),Y.regY=C-Y.getBounds().width*a/2-.07*C}else if("line"==s||"rectangle"==s){Y=this.indicator=new qe.Container,X=this.indicatorShape=new qe.Rectangle(.1*C,.3*C,o);Y.addChild(X),qe.sca(Y,a),Y.regY=C-Y.getBounds().width*a/2-.07*C,Y.regX=.05*C}else{Y=this.indicator=new qe.Container,X=this.indicatorShape=new qe.Triangle(.4*C,.4*C,.4*C,o);Y.addChild(X),qe.sca(Y,a),Y.regY=C-Y.getBounds().height*a*(u?.85:.75),u&&(X.rotation=180)}Y.regY/=a,this.addChild(Y);var _=0;if(v)var R=0,F=0,W=0,N=!1,G=!1,H=!0;else n;this.on("mousedown",function(e){if(!x.zimAccessibility||!x.zimAccessibility.aria){j=Y.rotation;var t=x.parent.globalToLocal(e.stageX,e.stageY),o=t.x-x.x,n=x.y-t.y;I=180*Math.atan2(o,n)/Math.PI;var i=(new Date).getTime();O=x.on("pressmove",function(e){if(N){var t=x.parent.globalToLocal(e.stageX,e.stageY),o=t.x-x.x,n=x.y-t.y;I=180*Math.atan2(o,n)/Math.PI,j=Y.rotation}o=(t=x.parent.globalToLocal(e.stageX,e.stageY)).x-x.x,n=x.y-t.y;var i=180*Math.atan2(o,n)/Math.PI,r=j+i-I;r=(r+36e5)%360,f&&180<Math.abs(r-_)||($(r),_=r)}),P=this.on("pressup",function(e){(new Date).getTime()-i<200&&(t=x.parent.globalToLocal(e.stageX,e.stageY),o=t.x-x.x,n=x.y-t.y,$(180*Math.atan2(o,n)/Math.PI));j=Y.rotation,x.off("pressmove",O),x.off("pressup",P)})}}),Object.defineProperty(this,"currentValue",{get:function(){return T},set:function(e){zot(e)||(v?(N=!1,zot(b)||zot(y)?zot(b)?zot(y)||y<e&&(e=y,N=!0):e<b&&(e=b,N=!0):b<y?(e<b&&(e=b,N=!0),y<e&&(e=y,N=!0)):(b<e&&(e=b,N=!0),e<y&&(e=y,N=!0)),H&&(G=!0,W=360*Math.floor(e/(i-n)))):n<i?(e<n&&(e=f?n:i),i<e&&(e=f?i:n)):(n<e&&(e=f?n:i),e<i&&(e=f?i:n)),e=q(T=e),Y.rotation=360*(e-n)/(i-n+(v?0:Q(i-n)*r)),Y.rotation=(Y.rotation+36e5)%360,A=e-n,_=Y.rotation,J(),qe.OPTIMIZE||!zns&&OPTIMIZE||!x.stage||x.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return T},set:function(e){e!=x.currentValue&&(x.currentValue=e,x.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return n},set:function(e){v?n=e:zon&&zog("min is read only")}}),Object.defineProperty(this,"max",{get:function(){return i},set:function(e){v?i=e:zon&&zog("max is read only")}}),Object.defineProperty(this,"continuous",{get:function(){return v},set:function(e){zon&&zog("continuous is read only")}}),Object.defineProperty(this,"continuousMin",{get:function(){return b},set:function(e){b=e,x.currentValue<b&&(x.currentValue=b)}}),Object.defineProperty(this,"continuousMax",{get:function(){return y},set:function(e){y=e,x.currentValue>y&&(x.currentValue=y)}}),Object.defineProperty(this,"step",{get:function(){return r},set:function(e){zon&&zog("step is read only")}}),Object.defineProperty(this,"keyArrowsH",{get:function(){return m},set:function(e){m=e}}),Object.defineProperty(this,"keyArrowsV",{get:function(){return z},set:function(e){z=e}}),Object.defineProperty(this,"keyFocus",{get:function(){return zns?qe.KEYFOCUS==x:KEYFOCUS==x},set:function(e){zns?qe.KEYFOCUS=x:KEYFOCUS=x}}),(g&&zns?qe.KEYFOCUS:KEYFOCUS)||ee(),this.on("mousedown",function(){g&&ee()});var V=!1,U=!1,Z=!1,K=!1;this.keyDownEvent=function(e){x.stage&&(x.zimAccessibility&&x.focus||!x.zimAccessibility&&x.keyFocus)&&(37==e.keyCode&&m?V=!0:40==e.keyCode&&z?U=!0:39==e.keyCode&&m?Z=!0:38==e.keyCode&&z&&(K=!0),null==x.keyInterval&&(V||U||Z||K)&&(te(),x.keyTimeout=setTimeout(function(){null==x.keyInterval&&(V||U||Z||K)&&(x.keyInterval=setInterval(te,40))},140)))},window.addEventListener("keydown",this.keyDownEvent),x.keyUpEvent=function(e){37==e.keyCode?V=!1:40==e.keyCode?U=!1:39==e.keyCode?Z=!1:38==e.keyCode&&(K=!1),null==x.keyInterval||V||U||Z||K||(clearInterval(x.keyInterval),x.keyInterval=null)},window.addEventListener("keyup",this.keyUpEvent),this._enabled=!0,Object.defineProperty(x,"enabled",{get:function(){return x._enabled},set:function(e){ve(x,e),e?(x.keyDownEvent=window.addEventListener("keydown",x.keyDownEvent),x.keyUpEvent=window.addEventListener("keyup",x.keyUpEvent)):(window.removeEventListener("keydown",x.keyDownEvent),window.removeEventListener("keyup",x.keyUpEvent))}}),this.clone=function(){return x.cloneProps(new qe.Dial(n,i,r,e,t,o,a,s,l,c,d,u,h,f,g,m,z,p,v,b,y))},this.dispose=function(){return x.removeAllEventListeners(),window.removeEventListener("keydown",x.keyDownEvent),window.removeEventListener("keyup",x.keyUpEvent),!0}}else zog("ZIM Dial range must not be 0");function q(e){return 0==r?e:Math.round(e/r)*r}function Q(e){return 0<e?1:-1}function J(){x.zimAccessibility&&x.zimAccessibility.changeTitle(x,null,!0)}function $(e){if(v){G&&(G=!1),R+180<e?W-=360:e<R-180&&(W+=360),F=W+e,H=!1;var t=x.currentValue;return x.currentValue=q(F*(i-n)/360),t!=x.currentValue&&x.dispatchEvent("change"),R=e,H=!0}var o;e<0&&(e+=360),e%=360,0!=r?(o=q((e=Math.min(e,360-360/(D+1)))/(360-360/(D+1))*(i-n)),Y.rotation=o*(360-360/(D+1))/(i-n)):o=(Y.rotation=e)/360*(i-n),o!=A&&(T=(A=o)+n,x.dispatchEvent("change"),qe.OPTIMIZE||!zns&&OPTIMIZE||!x.stage||x.stage.update()),J()}function ee(){x.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function te(){(V||U)&&(x.currentValueEvent-=0<r?r*Q(i-n):p*Q(i-n)),(Z||K)&&(x.currentValueEvent+=0<r?r*Q(i-n):p*Q(i-n))}},qe.extend(qe.Dial,qe.Container,"clone","zimContainer",!1),qe.Tabs=function(o,n,i,r,a,s,l,c,d,u,h,f,g,p,m,z,v,b,y,w,x,C,T,A){var e;if(e=zob(qe.Tabs,arguments,"width, height, tabs, color, rollColor, offColor, spacing, currentEnabled, corner, labelColor, labelOffColor, flatBottom, keyEnabled, gradient, gloss, wait, waitTime, waitColor, rollWaitColor, waitTextColor, rollWaitTextColor, waitModal, waitEnabled, backingColor",this))return e;z_d("65"),this.zimContainer_constructor(),this.type="Tabs",zot(o)&&(o=240),zot(n)&&(n=60),(zot(i)||i.length<=0)&&(i=[{label:1},{label:2},{label:3},{label:4}]),zot(r)&&(r="#333"),zot(a)&&(a="#555"),zot(s)&&(s="#777"),zot(c)&&(c=!1),zot(l)&&(l=1),zot(d)&&(d=0),zot(u)&&(u="white"),zot(h)&&(h=u),zot(f)&&(f=!0),zot(g)&&(g=!0);var k=this;this.keyEnabled=g;var t,E=0,M=[],S=[],j=i.length,I=(o-l*(j-1))/j;if(!zot(A)){var O=this.backing=new qe.Rectangle(o,n,A);this.addChildAt(O)}if("number"==typeof i[0]||"string"==typeof i[0])for(var P=0;P<i.length;P++)i[P]={label:String(null!=i[P])?i[P]:"1"};var D,B,L=0,Y=0;for(P=0;P<i.length;P++)zot((D=i[P]).width)&&Y++,L+=zot(D.width)?I:D.width;if(o-l*(j-1)<L)for(P=0;P<i.length;P++)(D=i[P]).width=(o-l*(j-1))/L*(zot(D.width)?I:D.width);else if(Math.round(L)<Math.round(o-l*(j-1)))if(0<Y)for(B=(j*I-(L-Y*I))/Y,P=0;P<i.length;P++)(D=i[P]).width=zot(D.width)?B:D.width;else zon&&zog("ZIM Tabs - total less than width"),o=L+l*(j-1);var X,_,R=0;for(P=0;P<i.length&&""!=(D=i[P]);P++)zot(D.label)&&(D.label=" "),X=0==P?zot(D.color)?r:D.color:zot(D.offColor)?s:D.offColor,_=0==P?zot(D.labelColor)?u:D.labelColor:zot(D.labelOffColor)?h:D.labelOffColor,"string"!=typeof D.label&&"number"!=typeof D.label||(D.label=new qe.Label(D.label,n/2,"arial")),D.label.color=_,(t=new qe.Button({width:zot(D.width)?I:D.width,height:n,label:D.label,color:X,rollColor:zot(D.rollColor)?a:D.rollColor,corner:d,shadowColor:-1,gradient:p,gloss:m,flatBottom:f,wait:zot(D.wait)?z:D.wait,waitTime:zot(D.waitTime)?v:D.waitTime,waitColor:zot(D.waitColor)?b:D.waitColor,rollWaitColor:zot(D.rollWaitColor)?y:D.rollWaitColor,waitTextColor:zot(D.waitTextColor)?w:D.waitTextColor,rollWaitTextColor:zot(D.rollWaitColor)?x:D.rollWaitTextColor,waitModal:zot(D.waitModal)?C:D.waitModal,waitEnabled:zot(D.waitEnabled)?T:D.waitEnabled})).on((zns?"mousedown"==qe.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(e){F(e.currentTarget.znum),k.dispatchEvent("change"),qe.OPTIMIZE||!zns&&OPTIMIZE||!k.stage||k.stage.update()}),t.znum=P,D.label.znum=P,t.type="TabsButton",M.push(D.label),S.push(t),this.addChild(t),t.x=R,R=t.x+t.width+l,0!=P||c||(t.enabled=!1);function F(e){var t=i[E];t&&(zot(t.wait)&&!c&&(S[E].color=zot(t.offColor)?s:t.offColor,S[E].label.color=zot(t.labelOffColor)?h:t.labelOffColor),c||(S[E].enabled=!0)),(t=i[E=e])&&(zot(t.wait)&&!c&&(S[E].color=zot(t.color)?r:t.color,S[E].label.color=zot(t.labelColor)?u:t.labelColor),c||(S[E].enabled=!1))}function W(){k.keyFocus=!0;var e=document.activeElement;e&&e.blur()}window.addEventListener("keydown",function(e){if(k.keyEnabled&&k.keyFocus&&!k.zimAccessibility&&9==e.keyCode){var t=E;e.shiftKey?F(--t<0?i.length-1:t):F(++t>i.length-1?0:t),k.dispatchEvent("change"),qe.OPTIMIZE||!zns&&OPTIMIZE||!k.stage||k.stage.update(),e.preventDefault()}}),Object.defineProperty(this,"selected",{get:function(){return S[E]},set:function(e){zon&&zog("selected is read only - try selectedIndex")}}),Object.defineProperty(this,"selectedIndex",{get:function(){return E},set:function(e){F(e),qe.OPTIMIZE||!zns&&OPTIMIZE||!k.stage||k.stage.update()}}),Object.defineProperty(this,"tabs",{get:function(){return E},set:function(e){F(Math.min(Math.max(e,0),i.length-1)),qe.OPTIMIZE||!zns&&OPTIMIZE||!k.stage||k.stage.update()}}),Object.defineProperty(this,"color",{get:function(){return r},set:function(e){zog("tabs color property "+e),r=e,zot(i[E].color)&&(S[E].color=r,qe.OPTIMIZE||!zns&&OPTIMIZE||!k.stage||k.stage.update())}}),Object.defineProperty(this,"rollColor",{get:function(){return a},set:function(e){a=e;for(var t=0;t<i.length;t++)zot(i[E].rollColor)&&(S[t].rollColor=a)}}),Object.defineProperty(this,"offColor",{get:function(){return s},set:function(e){s=e;for(var t=0;t<i.length;t++)zot(i[E].offColor)&&(S[t].color=s);qe.OPTIMIZE||!zns&&OPTIMIZE||!k.stage||k.stage.update()}}),Object.defineProperty(this,"label",{get:function(){return M[E]},set:function(e){zon&&zog("selected is read only - try selectedIndex")}}),Object.defineProperty(this,"text",{get:function(){return null!=M[E]?M[E].text:void 0},set:function(e){zon&&zog("selected is read only - try selectedIndex")}}),Object.defineProperty(this,"buttons",{get:function(){return S},set:function(e){zon&&zog("buttons is read only")}}),Object.defineProperty(this,"labels",{get:function(){return M},set:function(e){zon&&zog("labels is read only")}}),this._enabled=!0,Object.defineProperty(k,"enabled",{get:function(){return k._enabled},set:function(e){ve(k,e)}}),Object.defineProperty(this,"keyFocus",{get:function(){return zns?qe.KEYFOCUS==k:KEYFOCUS==k},set:function(e){zns?qe.KEYFOCUS=k:KEYFOCUS=k}}),(g&&zns?qe.KEYFOCUS:KEYFOCUS)||W(),this.on("mousedown",function(){g&&W()}),this.clone=function(){for(var e=qe.copy(i),t=0;t<e.length;t++)e[t].label=e[t].label.clone();return k.cloneProps(new qe.Tabs(o,n,e,r,a,s,l,c,d,u,h,f,g,p,m,z,v,b,y,w,x,C,T,A))},this.dispose=function(){for(var e=0;e<k.buttons.length;e++)k.buttons[e].dispose(),k.labels[e].dispose(),k.buttons[e].removeAllEventListeners();return k.removeAllEventListeners(),!0}},qe.extend(qe.Tabs,qe.Container,"clone","zimContainer",!1),qe.Pad=function(e,i,t,o,n,r,a,s,l,c,d,u,h,f,g,p,m,z,v,b,y){var w;if(w=zob(qe.Pad,arguments,"width, cols, rows, keys, color, rollColor, offColor, spacing, currentEnabled, corner, labelColor, gradient, gloss, wait, waitTime, waitColor, rollWaitColor, waitTextColor, rollWaitTextColor, waitModal, waitEnabled",this))return w;if(z_d("66"),this.zimContainer_constructor(),this.type="Pad",zot(e)&&(e=150),zot(i)&&(i=3),zot(t)&&(t=i),zot(o)){o=[];for(var x=1;x<=t*i;x++)o.push(x)}zot(l)&&(l=!0),zot(s)&&(s=1);var C,T=this;this.cols=i,this.rows=t;var A,k=e/i-s,E=[],M=0;this.labels=[],this.buttons=[];for(x=0;x<t;x++){for(var S=[],j=0;j<i;j++)S.push(null!=o[M]?o[M]:""),M++;A=E[x]=new qe.Tabs({width:e,height:k,tabs:S,color:n,rollColor:r,offColor:a,spacing:s,currentEnabled:l,corner:c,labelColor:d,flatBottom:!1,keyEnabled:!1,gradient:u,gloss:h,wait:f,waitTime:g,waitColor:p,rollWaitColor:m,waitTextColor:z,rollWaitTextColor:v,waitModal:b,waitEnabled:y}),this.labels=this.labels.concat(A.labels),this.buttons=this.buttons.concat(A.buttons),this.addChild(A),A.selectedIndex=-1,A.y=(k+s)*x,A.znum=x,A.on("change",I)}function I(e){var t=e.target;T.selected=t.selected,T.text=t.text,T.label=t.label;for(var o=t.selectedIndex,n=0;n<E.length;n++)E[n].selectedIndex=-1;t.selectedIndex=o,C=t.znum*i+o,T.dispatchEvent("change"),qe.OPTIMIZE||!zns&&OPTIMIZE||!T.stage||T.stage.update()}this.tabs=E,Object.defineProperty(this,"selectedIndex",{get:function(){return C},set:function(e){C=e;for(var t=0;t<E.length;t++)E[t].selectedIndex=-1;var o=Math.floor(C/i);0<=o&&o<T.tabs.length&&(T.tabs[o].selectedIndex=C%i)}}),this._enabled=!0,Object.defineProperty(T,"enabled",{get:function(){return T._enabled},set:function(e){ve(T,e)}}),this.clone=function(){return T.cloneProps(new qe.Pad(e,i,t,o,n,r,a,s,l,c,d,u,h,f,g,p,m,z,v,b,y))},this.dispose=function(){for(var e=0;e<T.tabs.length;e++)T.tabs[e].dispose();return T.removeAllEventListeners(),!0}},qe.extend(qe.Pad,qe.Container,"clone","zimContainer",!1),qe.ColorPicker=function(e,o,n,i,r,t,a,s,l,c,d,u,h,f,g){var p;if(p=zob(qe.ColorPicker,arguments,"width, colors, cols, spacing, greyPicker, alphaPicker, startColor, drag, shadowColor, shadowBlur, buttonBar, circles, indicator, backingColor, keyArrows",this))return p;z_d("67"),this.zimContainer_constructor(),this.type="ColorPicker",zot(e)&&(e=500),zot(o)&&(T=!0),zot(n)&&(n=10),zot(i)&&(i=2),zot(t)&&(t=!0),zot(r)&&(r=!0),zot(l)&&(l="rgba(0,0,0,.3)"),zot(c)&&(c=14),zot(d)&&(d=!0),zot(s)&&(s=!!d),zot(u)&&(u=!1),zot(h)&&(h=!1,d||(h=!0)),zot(f)&&(f="black"),zot(g)&&(g=!0);var m=this,z="#e472c4",v="#50c4b7",b=1,y=1,w=new createjs.Shape;this.addChild(w),w.x+=i,w.y+=i;var x,C,T=!1,A=[];if(zot(o)){T=!0;var k=6,E=k*k*k;k=Math.ceil(Math.pow(E,.5)),C=(e-i)/18-i;var M=Math.floor(Math.pow(k*k,1/3));x=[];for(var S=0;S<6;S++)for(var j=0;j<6;j++)for(var I=0;I<6;I++)x.push("#"+B(3*S)+B(3*j)+B(3*I));for(o=[],S=0;S<x.length;S++)Y=Math.floor(S/6),o[18*((L=S%6)+6*(M=18<=Y?1:0))+(Y-6*M*3)]=x[S];n=18,A=[v,z]}else C=(e-i)/n-i;var O=Math.ceil(o.length/n),P=String(o[o.length-1]);zot(a)||(P=String(a));var D=v;function B(e){return(e=Math.floor(e).toString(16))+""+e}var L,Y,X,_,R=w.graphics;M=0;for(S=0;S<o.length;S++)Y=S%n,L=Math.floor(S/n),X=Y*(C+i),_=L*(C+i),u?R.f(o[S]).dc(X+C/2,_+C/2,C/2):R.f(o[S]).r(X,_,C,C);var F=_+C+i,W=F;if(r){for(S=0;S<16;S++)A.push("#"+B(S)+B(S)+B(S));for(S=0;S<A.length;S++)Y=Math.floor(S/n),X=(L=S%n)*(C+i),_=Y*(C+i)+F,u?R.f(A[S]).dc(X+C/2,_+C/2,C/2):R.f(A[S]).r(X,_,C,C);F=_+C+i;var N=n,G=Math.ceil(A.length/n)}if(h){function H(e){zot(e)||e<0?h.visible=!1:(h.visible=!0,"#000"==P||"#000000"==P||"black"==P?(h.color="#222",h.alpha=1):(h.color="black",h.alpha=.5),h.x=w.x+e%n*(C+i)+C/2,h.y=w.x+Math.floor(e/n)*(C+i)+C/2)}(h=this.indicator=u?new qe.Circle(C/2*.5):new qe.Rectangle(.5*C,.5*C)).alpha=.5,h.centerReg(),this.addChild(h),H(o.indexOf(P))}if(t){var V=new qe.Container;V.setBounds(0,0,600,70),this.addChild(V),V.x=0,V.y=F;var U=this.alphaBacking=new qe.Rectangle(580,50,"#222",null,null,0);V.addChild(U),qe.centerReg(U,V);var Z=this.alphaBut=new qe.Button({width:20,height:30,label:"",corner:0,hitPadding:20}),K=this.alphaSlider=new qe.Slider(0,1,.05,Z,330);K.currentValue=1,V.addChild(K),K.x=40,K.y=V.height/2;var q=this.alphaText=new qe.Label("Alpha: 1",30,null,"orange");V.addChild(q),q.x=K.x+K.bar.width+40,q.y=V.height/2-q.height/2,V.scaleX=V.scaleY=e/600,K.on("change",function(){q.text="Alpha: "+pe(K.currentValue),ne&&(ne.alpha=y=K.currentValue),d?m.dispatchEvent("set"):m.dispatchEvent("change"),m.stage&&m.stage.update()}),F+=V.height-10}if(d){var Q=new qe.Container;Q.setBounds(0,0,600,100),this.addChild(Q),Q.x=0,Q.y=F+10;var J=this.swatchText=new qe.Label(P.toUpperCase().substr(0,7),30,null,"orange");if(Q.addChild(J),qe.centerReg(J),J.x=90,J.y=48,s){var $=this.grip=new qe.Shape;Q.addChild($),$.graphics.f("rgba(256,256,256,.25)").r(0,0,5,20).r(10,0,5,20).r(20,0,5,20).r(30,0,5,20),$.x=70,$.y=65,J.y=40,$.mouseEnabled=!1}var ee=this.closeBut=new qe.Button(90,90,"X","#222","#444",null,null,null,0);Q.addChild(ee),ee.x=600-ee.width-10,ee.y=0,ee.on((zns?"mousedown"==qe.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){m.dispatchEvent("close")});var te=this.okBut=new qe.Button(150,90,"OK","#222","#444",null,null,null,0);Q.addChild(te),te.x=ee.x-te.width-10,te.y=0,te.on((zns?"mousedown"==qe.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",le);var oe=this.swatchBacking=new qe.Shape;Q.addChild(oe),(R=oe.graphics).f("black").r(.5,.5,50,89).f("#666").r(50,.5,50,89).f("white").r(100,.5,49.5,89),oe.x=te.x-150-10,oe.y=0;var ne=this.swatch=new qe.Rectangle(150,90,P);Q.addChild(ne),ne.x=oe.x,ne.y=0,ne.on((zns?"mousedown"==qe.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",le),ne.cursor="pointer",Q.scaleX=Q.scaleY=e/600,F+=Q.height}else w.cursor="pointer";t||d||(F-=10-i);var ie=F+10;this.setBounds(0,0,e,ie);var re,ae,se=this.backing=new qe.Rectangle(e,ie,f);function le(){if(P!=D||y!=b){if(T&&r){var e=[v=z,z=D];for(S=0;S<2;S++){var t=w.graphics;Y=Math.floor(S/n),X=(L=S%n)*(C+i),_=Y*(C+i)+W,A[S]=e[S],t.f(se.color).r(X-1,_-1,C+2,C+2).f(e[S]).r(X,_,C,C)}qe.OPTIMIZE||!zns&&OPTIMIZE||!m.stage||m.stage.update()}D=P,b=y,m.dispatchEvent("change")}else m.dispatchEvent("close")}(this.addChildAt(se,0),-1!=l&&0<c&&(se.shadow=new createjs.Shadow(l,8,8,c)),s)&&(se.on("mousedown",function(e){re=e.stageX-m.x,ae=e.stageY-m.y,se.cursor="move"}),se.on("pressmove",function(e){m.x=e.stageX-re,m.y=e.stageY-ae,m.stage&&m.stage.update()}),se.on("pressup",function(e){se.cursor="default",m.stage&&m.stage.update()}));var ce=n*(C+i),de=O*(C+i);if(r)var ue=N*(C+i),he=G*(C+i);function fe(){m.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function ge(){m.zimAccessibility&&m.zimAccessibility.changeTitle(m,null,!0)}function pe(e){return Math.round(e*Math.pow(10,2))/Math.pow(10,2)}w.on((zns?"mousedown"==qe.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(e){var t=qe.hitTestGrid(w,ce,de,n,O,e.stageX,e.stageY,0,0,i,i);zot(t)||(P=o[t],d?(ne.color=P,J.text=String(o[t]).toUpperCase().substr(0,7),qe.centerReg(J),P!=D&&m.dispatchEvent("set")):le()),r&&(t=null,zot(t=qe.hitTestGrid(w,ue,he,N,G,e.stageX,e.stageY,0,de,i,i))||(P=A[t],d?(ne.color=P,J.text=A[t].toUpperCase(),qe.centerReg(J),P!=D&&m.dispatchEvent("set")):le())),h&&H(o.indexOf(P)),d?m.stage&&m.stage.update():h&&m.stage&&m.stage.update(),ge()}),Object.defineProperty(this,"selectedColor",{get:function(){return P},set:function(e){D=P=e,d&&(ne.color=P,J.text=P,qe.centerReg(J),m.stage&&m.stage.update()),h&&H(o.indexOf(P)),ge()}}),Object.defineProperty(this,"currentValue",{get:function(){return P},set:function(e){m.selectedColor=e}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return P},set:function(e){e!=m.selectedColor&&(m.selectedColor=e,m.dispatchEvent("change"))}}),Object.defineProperty(this,"selectedIndex",{get:function(){return o.indexOf(P)},set:function(e){D=P=o[e],d&&(ne.color=P,J.text=P,qe.centerReg(J),m.stage&&m.stage.update()),h&&H(o.indexOf(P)),ge()}}),Object.defineProperty(this,"selectedAlpha",{get:function(){return t?pe(K.currentValue):1},set:function(e){t&&(b=K.currentValue=e,ne&&(ne.alpha=b),q&&(q.text="Alpha: "+pe(K.currentValue)),m.stage&&m.stage.update())}}),Object.defineProperty(this,"colors",{get:function(){return r?o.concat(A):o},set:function(e){zon&&zog("Display - ColorPicker() colors is read only - make a new ColorPicker to change")}}),Object.defineProperty(this,"keyFocus",{get:function(){return zns?qe.KEYFOCUS==m:KEYFOCUS==m},set:function(e){zns?qe.KEYFOCUS=m:KEYFOCUS=m}}),(g&&zns?qe.KEYFOCUS:KEYFOCUS)||fe(),this.on("mousedown",function(){g&&fe()}),this.keyDownEvent=function(e){if(m.stage&&(m.zimAccessibility&&m.focus||!m.zimAccessibility&&m.keyFocus)){var t=m.selectedIndex;function o(){t<0&&(t=m.colors.length-1),t>m.colors.length-1&&(t=0),m.selectedIndex=t,m.dispatchEvent("change"),m.stage&&m.stage.update()}37==e.keyCode||40==e.keyCode?(t--,o()):38!=e.keyCode&&39!=e.keyCode||(t++,o())}},window.addEventListener("keydown",this.keyDownEvent),this.clone=function(){return m.cloneProps(new qe.ColorPicker(e,T?null:o,n,i,r,t,a,s,l,c,d,u,h,f,g))},this.dispose=function(){return window.removeEventListener("keydown",m.keyDownEvent),K.dispose(),w.removeAllEventListeners(),se.removeAllEventListeners(),ee.removeAllEventListeners(),ne.removeAllEventListeners(),te.removeAllEventListeners(),!0}},qe.extend(qe.ColorPicker,qe.Container,"clone","zimContainer",!1),qe.Keyboard=function(n,g,p,i,r,a,t,m,o,z,s,l,c,d,u,h,f,v,b){var e;if(e=zob(qe.Keyboard,arguments,"labels, color, textColor, shiftColor, shiftHoldColor, placeColor, cursorColor, shadeAlpha, margin, corner, drag, placeClose, shadowColor, shadowBlur, container, data, place, special, rtl",this))return e;z_d("67.2"),this.zimContainer_constructor(1e3,400),this.type="Keyboard";var y=this;zot(n)&&(n=[]),Array.isArray(n)||(n=[n]),zot(g)&&(g="#333"),zot(p)&&(p="white"),zot(i)&&(i="orange"),zot(r)&&(r="red"),zot(a)&&(a="#50c4b7"),zot(t)&&(t="#50c4b7"),zot(m)&&(m=.2),zot(o)&&(o=5),zot(z)&&(z=30),zot(s)&&(s=!1),zot(l)&&(l=!0),zot(c)&&(c="rgba(0,0,0,.2)"),zot(d)&&(d=14),zot(h)&&(h=[[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["shift","z","x","c","v","b","n","m","backspace"],["?123"]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC"]],[["+","x","%","=","<",">","{","}","[","]"],["â‚¬","Â£","Â¥","$","ï¿¦","~","`","Â¤","â™¡","â˜†"],["2/2","_","\\","|","ã€Š","ã€‹","Â¡","Â¿","backspace"],["ABC"]]]),y.data=h,zot(f)&&(f=!0),zot(b)&&(b=!1);var w="zim display - Keyboard(): Please pass in a reference to a container with bounds set";if(zot(u)){if(!zimDefaultFrame)return void zog(w);u=zimDefaultFrame.stage}else{if(!u.getBounds)return void zog(w);if(zot(u.stage))return void zog("zim display - Keyboard(): The container must have a stage property")}-1!=c&&0<d&&(y.shadow=new createjs.Shadow(c,3,3,d));var x,C=zimDefaultFrame?zimDefaultFrame.stage:null;y.labels=n;var T=["@","",".","/","away"];zot(v)||T.splice(1,0,v);var A=qe.copy(h[0]);A[3]=A[3].concat(T);var k=qe.copy(h[1]);k[3]=k[3].concat(T);var E=qe.copy(h[2]);E[3]=E[3].concat(T);var M,S,j,I,O,P,D,B,L,Y,X,_=["Ä—","Ä“","Ä™","Ãª","Ã©","Ã«","Ã¨"],R=["Å«","Ã»","Ãº","Ã¼","Ã¹"],F=["Ä«","Ä¯","Ã¬","Ã­","Ã¯","Ã®"],W=["Å","Å“","Ã¸","Ãµ","Ã´","Ã³","Ã¶","Ã²"],N=["Ä","Ã£","Ã¥","Ã¢","Ã¡","Ã¤","Ã ","Ã¦"],G=["Ã±","Å„"],H=[],V=95.5,U={default:"default",shift:"shift",number1:"number1",number2:"number2"},Z=U.default,K=!1,q=0,Q=[];function J(e){var t,o=!1;if(Z===U.default){for(I.color=e?r:i,t=0;t<H.length-6-(zot(v)?0:1);t++){0<(n=H[t]).label.text.length&&(1===n.name.length?(n.label.text=n.label.text.toUpperCase(),n.label.centerReg(n).mov(0,6)):n.label.centerReg(n))}e||(o=!0,qe.timeout(500,function(){o&&(K=!0,I.color=r,M.updateCache(),y.stage.update())}),y.on("pressup",function e(t){y.off("pressup",e);o=!1})),Z=U.shift}else{for(I.color=g,K=!1,t=0;t<H.length-6;t++){var n;0<(n=H[t]).label.text.length&&(1===n.name.length?(n.label.text=n.label.text.toLowerCase(),n.label.centerReg(n).mov(0,3)):n.label.centerReg(n))}Z=U.default}M.updateCache(),y.stage.update()}function $(e){var t,o,n,i,r,a,s,l=0,c=0,d=!1,u=!1;zot(e)&&(e=U.default),e===U.default?t=A:e===U.number1?t=k:e===U.number2&&(t=E),M=new Container(1e3,430).addTo(y);for(var h=0;h<t.length;h++){(h<=1||e==U.default&&2==h&&"shift"!=t[2][0])&&(l=(V/2+2.5)*(10-t[h].length));for(var f=0;f<t[h].length;f++)a=null,u=d=!1,"backspace"==t[h][f]?(a=B,u=r=!0):"shift"==t[h][f]?(r=!0,a=D):(3==h||e!=U.default&&2==h)&&0==f?u=r=!0:""==t[h][f]?d=!(r=!1):"away"==t[h][f]?(a=L,u=r=!0):r=!1,i=r?1.5*V+2.5:d?(V+5)*(zot(v)?4:3)-5:V,n=new Rectangle(i,V,g,null,null,z).cur().addTo(M),u&&n.addChild(new Rectangle(i,V,"black",null,null,z).alp(m)),n.label=o=a?new Label(""):new Label({lineWidth:10,lineHeight:25,text:t[h][f],color:p,align:"center"}),a&&(a.scaleTo(n,70,70),a.centerReg(n)),s?(s=!1,l+=67.33):(o.centerReg(n).mov(0,isNaN(o.text)?3:7),n.x=l,n.y=c,n.name=t[h][f],2==h&&0==f&&e==U.number1&&(n.toggle="1/2"),2==h&&0==f&&e==U.number2&&(n.toggle="2/2"),3==h&&0==f&&e==U.default&&(n.toggle="?123"),3==h&&0==f&&e!=U.default&&(n.toggle="ABC"),n.toggle&&o.mov(0,3),H.push(n),"shift"==n.name&&(I=n),l=n.x+n.width+5);c+=V+5,l=0}M.cache()}function ee(){y.mouseYAmount&&(y.y=y.parent.globalToLocal(0,y.mouseYAmount-X).y)}function te(){C.off("pressmousemove",y.tickerMouseEvent),Ticker.remove(ee)}function oe(){if(O){for(var e=0,t=0;t<q;t++)e+=O.widthArray[t];j.heightOnly=O.getBounds().height,O.addChild(j),j.x=e}}function ne(){if(P)return y;var e,t,o,n=l?["<",">","x"]:["<",">"];Q=[],o=O.localToLocal(0,0,y),P=(new Container).addTo(y).pos(o.x,o.y+O.height+15).cur();for(var i=0;i<n.length;i++)e=new Rectangle(V,V,a,null,null,z),"x"==n[i]&&new Rectangle(V,V,"black",null,null,z).alp(m).addTo(e),(t=new Label({lineWidth:10,lineHeight:25,text:n[i],backing:e,color:"white",align:"center"}).addTo(P).cache()).x=i*(V+5),Q.push(t);o=O.localToLocal(0,0,y),P.pos(o.x,o.y+O.height+15),P.on("click",function(e){0==Q.indexOf(e.target)?0<q&&q--:1==Q.indexOf(e.target)?q<O.text.length&&q++:ie();oe()}),y.stage.update()}function ie(){if(!P)return y;P.removeAllEventListeners(),y.removeChild(P),P=null}function re(e){var t,o;"del"===e?(O&&(O.text=[O.text.slice(0,q-1),O.text.slice(q)].join("")),q--,se()):(Z===U.shift&&(e=e.toUpperCase()),O&&O.width<x&&((t=O.clone()).text=e,o=t.label.getMeasuredWidth(),O.widthArray?O.widthArray.splice(q,0,o):O.widthArray=[O.breedte],q<O.text.length?O.text=[O.text.slice(0,q),e,O.text.slice(q)].join(""):O.text+=e,q++,oe())),Z!==U.shift||K||(y.removeChild(M),$(),Z=U.default),oe();var n=new createjs.Event("keydown");n.letter=e,y.dispatchEvent(n),y.stage.update()}function ae(e){if(y.stage){var t,o=0,n=!1;(O=e.target).widthArrayCheck||se(),x=O.label.lineWidth?O.label.lineWidth:1e4,t=O.globalToLocal(e.stageX,e.stageY);for(var i=0;i<O.widthArray.length;i++)if(o+=O.widthArray[i],t.x<o-O.widthArray[i]/2){q=i,n=!0;break}n||(q=O.text.length),oe(),f&&!P&&0<O.text.length&&ne(),P&&O&&(0<O.text.length?(t=O.localToLocal(0,0,y),P.pos(t.x,t.y+O.height+15)):ie())}}function se(){if(O){var e;O.widthArray=[];for(var t=0;t<O.text.length;t++)(e=O.clone()).text=O.text[t],O.widthArray.push(e.label.getMeasuredWidth());O.widthArrayCheck=!0,oe()}}function le(){for(var e=0;e<n.length;e++)n[e].clickEvent=n[e].on("click",ae)}function ce(){if(1<n.length)for(var e=0;e<n.length;e++)n[e].off("click",n[e].clickEvent)}function de(){if(!j&&(O=n[0],x=O&&O.label.lineWidth?O.label.lineWidth:1e4,O)){(j=new Rectangle(3,30,t).addTo(O)).x=0,j.y=0,j.visible=!1,j.heightOnly=O.height,j.animate({obj:{alpha:0},rewind:!0,loop:!0,loopWait:750,time:250,id:"knipperTekst"});for(var e=0;e<n.length;e++)n[e].widthArray=[0];se()}}function ue(){qe.stopAnimate("knipperTekst"),O&&O.removeChild(j),O=j=null}!function(){(D=new Shape).graphics.f(p).p("AhIFoIAAjYIixAAID5n3ID6H3IixAAIAADYgAjHBxICeAAIAADYIBTAAIAAjYICeAAIjImSg"),D.setBounds(-25.5,-36,51,72),B=new Container;var e=new Shape;e.graphics.f(p).p("ACgC+IigigIifCgQgGAGgJAAQgJAAgGgGQgGgGgBgJQABgJAGgGICgigIigifQgGgGgBgJQABgJAGgGQAGgGAJAAQAIAAAHAGICfCgICgigQAGgGAJAAQAJAAAGAGQAGAGABAJQgBAJgGAGIigCfICgCgQAGAGABAJQgBAJgGAGQgGAGgJAAQgJAAgGgGg"),e.setTransform(82.6,32),e.addTo(B);var t=new Shape;t.graphics.f(p).s().p("AkhFAQgcAAgUgUIkHj6QgVgUAAgeQAAgdAVgVIEHj6QAUgTAcAAINKAAQAdAAAUAUQAUAUAAAdIAAH1QAAAdgUATQgUAVgdAAgAk0kOIkGD8QgIAHAAALQAAALAIAIIEGD7QAIAHALAAINKAAQALAAAIgIQAHgHAAgLIAAn1QAAgLgHgIQgIgIgLAAItKAAQgLAAgIAHg"),t.setTransform(62.2,32),t.addTo(B),B.setBounds(0,0,125,64),(L=new Container).setBounds(0,0,147,86);for(var o,n=[{p:"Ai+heIF9AAIi/C9g",transform:[73.4,76]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128.4,43.2]},{p:"AnNAzIAAhlIObAAIAABlg",transform:[73,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.8,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128.2,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[114.5,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[100.8,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[87.1,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[73.4,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[59.7,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[46,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.3,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.6,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[114.3,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[100.6,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[86.9,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[73.2,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[59.5,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[45.8,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.1,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.4,15.8]},{p:"AphEnQgzAAgkgkQglglAAgzIAAlVQAAgzAlglQAkgkAzAAITDAAQAzAAAkAkQAlAlAAAzIAAFVQAAAzglAlQgkAkgzAAgAqjjtQgcAcAAAnIAAFVQAAAnAcAbQAbAcAnAAITDAAQAnAAAcgcQAbgbAAgnIAAlVQAAgngbgcQgcgcgnAAIzDAAQgnAAgbAcg",transform:[73.4,29.5]}],i=0;i<n.length;i++)(o=new Shape).graphics.f(p).s().p(n[i].p),o.setTransform(n[i].transform[0],n[i].transform[1]),o.addTo(L)}(),$(Z),s&&function(){Y=new Rectangle(1.5*V+2.5+2.5,V,g,null,null,z).addTo(y,0).cur();for(var e=0;e<4;e++)new Rectangle(.4*Y.width,4,p).centerReg(Y).alp(.2).y-=15*e-22;Y.x=8.5*V+40,Y.y=-V-5,Y.name="drag"}(),this.on("mousedown",function(e){C=y.stage,S&&y.removeChild(S);P&&Q.indexOf(e.target)<0&&ie();zot(e.target.name)||(s&&e.target===Y?(y.tickerMouseEvent=C.on("stagemousemove",function(e){y.mouseYAmount=e.stageY}),Ticker.add(ee),y.on("pressup",te),X=e.stageY-y.localToGlobal(0,0).y):zot(v)||e.target.name!==v?"shift"===e.target.name?J():"?123"===e.target.toggle?(y.removeChild(M),$(U.number1)):"ABC"===e.target.toggle?(y.removeChild(M),Z=U.default,$(),K&&J(!0)):"1/2"===e.target.toggle?(y.removeChild(M),$(U.number2)):"2/2"===e.target.toggle?(y.removeChild(M),$(U.number1)):"away"===e.target.name?(y.hide(),y.dispatchEvent("close")):"e"===e.target.name||"u"===e.target.name||"i"===e.target.name||"o"===e.target.name||"a"===e.target.name||"n"===e.target.name?function(t){var a,s,l=!1,c=!1;switch(t){case"e":a=_;break;case"u":a=R;break;case"i":a=F;break;case"o":a=W;break;case"a":a=N;break;case"n":a=G}s=qe.timeout(500,function(){var e,t,o,n,i=0;if(s.clear(),!l){c=!0,(S=new Container(1e3,V).addTo(y,0)).y=-V-5;for(var r=0;r<a.length;r++)n=Z===U.shift?a[r].toUpperCase():a[r],e=new Label({lineWidth:10,lineHeight:25,text:n,color:p,align:"center"}),t=new Rectangle(V,V,g,null,null,z).addTo(S),o=new Rectangle(V,V,"white",null,null,z).alp(.2),t.addChild(o),e.center(t),t.name=a[r],t.x=i,i+=V+5;y.stage.update()}});var o=y.on("pressup",function(e){l=!0,y.off("pressup",o),c||re(t)})}(e.target.name):"return"===e.target.name?re("\n"):"backspace"===e.target.name?function(){var t,o=!0;function n(){O&&0<O.text.length?(re("del"),y.on("pressup",i)):re("del")}function i(){o=!1,t.clear(),y.off("pressup",i)}n(),t=qe.timeout(300,function e(){(!O||O.text.length<1)&&(o=!1);o&&(n(),t=qe.timeout(200,e));O.text.length<1&&i()}),y.stage.update()}():""===e.target.name?re(" "):re(e.target.name):y.dispatchEvent("special"),C.update())}),le(),de(),Object.defineProperty(this,"selectedLabel",{get:function(){return O},set:function(e){ae({target:e}),y.hidePlace()}}),Object.defineProperty(this,"selectedIndex",{get:function(){return q},set:function(e){q=e,oe()}}),this.show=function(e){(y.addTo(u),y.resize(),zot(e))||ae({target:n[e]});return j&&(j.visible=!0),y},this.hide=function(){return y.removeFrom(u),j&&(j.visible=!1),C.update(),y},this.showPlace=function(){return ne(),y},this.hidePlace=function(){return ie(),y},this.addLabels=function(e){Array.isArray(e)||(e=[e]);for(var t=e.length-1;0<=t;t--){0<=n.indexOf(e[t])||"Label"!=e[t].type?e.splice(t,1):e[t].widthArray=[0]}return ce(),n=n.concat(e),le(),de(),y},this.removeLabels=function(e){Array.isArray(e)||(e=[e]),ce();for(var t=0;t<e.length;t++){var o=n.indexOf(e[t]);0<=o&&n.splice(o,1)}return le(),0==n.length?O&&ue():O&&-1==n.indexOf(O)&&(ue(),de()),y},this.resize=function(){return y.scaleTo(C,100-2*o/C.width*100,50-2*o/C.height*100),y.y=C.height-y.height-o,y.x=C.width/2-y.width/2,P&&(point=O.localToLocal(0,0,y),P.pos(point.x,point.y+O.height+15)),y.stage&&y.stage.update(),y},this.clone=function(){var e=new qe.Keyboard(n,g,p,i,r,a,t,m,o,z,s,l,c,d,u,h,f,v,b);return y.cloneProps(e)},this.dispose=function(){return y.removeAllEventListeners(),ce(),P&&P.removeAllEventListeners(),s&&te(),ue(),!0}},qe.extend(qe.Keyboard,qe.Container,"clone","zimContainer",!1),qe.Loader=function(t,o,n,i,r,a,e,s,l,c,d,u,h,f,g,p,m,z,v,b,y,w,x,C,T){var A;if(A=zob(qe.Loader,arguments,"width, height, label, color, rollColor, borderColor, borderRollColor, borderWidth, corner, shadowColor, shadowBlur, hitPadding, gradient, gloss, flatBottom, dashed, backing, rollBacking, rollPersist, icon, rollIcon, toggle, rollToggle, toggleEvent, frame",this))return A;if(z_d("67.5"),zot(t)&&(t=250),zot(o)&&(o=70),zot(i)&&(i="rgba(0,0,0,.05)"),zot(r)&&(r="rgba(0,0,0,.1)"),zot(a)&&(a="rgba(0,0,0,.3)"),zot(s)&&(s=1),zot(p)&&(p=!0),zot(l)&&(l=0),zot(n)&&(n=new qe.Label({text:"UPLOAD PIC",color:"rgba(0,0,0,.4)",valign:"center",align:"center"})),zot(T)){if(!zimDefaultFrame)return void(zon&&zog("zim.Loader - please provide a reference to zim Frame"));T=zimDefaultFrame}this.zimButton_constructor(t,o,n,i,r,a,e,s,l,c,d,u,h,f,g,p,m,z,v,b,y,w,x,C),this.type="Loader";var k=this,E=T.stage;n=k.label;var M=k.tag=document.createElement("input");document.body.appendChild(M),M.setAttribute("type","file"),M.setAttribute("multiple","multiple"),M.setAttribute("aria-hidden",!0),M.hidden=!0,M.style.cssText="border:thin solid grey; z-index:2; width:"+t+"px; height:"+o+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none; cursor:pointer; opacity: 0; filter: alpha(opacity=0);",this.addEventListener("mousedown",function(){M.click()}),M.addEventListener("change",j);var S=new createjs.DOMElement(M);function j(e){var n;n=e.dataTransfer&&e.dataTransfer.files&&0<e.dataTransfer.files.length?e.dataTransfer.files:e.target.files;for(var i,t,o,r=[],a=0;a<n.length;a++)t=n[a],o=void 0,(o=new FileReader).onload=function(e){var o=new Image;o.onload=function(){var e=new qe.Bitmap(o);if(r.push(e),1==r.length&&(i=e),r.length==n.length){var t=new createjs.Event("loaded");t.bitmaps=r,t.bitmap=i,t.lastBitmap=e,t.total=r.length,k.dispatchEvent(t),M.value=""}},o.src=e.target.result},o.readAsDataURL(t)}E.addChild(S),S.alpha=0,this.resize=function(){return k.stage?(M.setAttribute("aria-hidden",!1),M.hidden=!1,M.style.display="block",setTimeout(function(){var e=k.localToGlobal(0,0);S.x=T.x+e.x*T.scale,S.y=T.y+e.y*T.scale,qe.sca(S,T.scale*k.scaleX,T.scale*k.scaleY),E.update()},50),k):(M.setAttribute("aria-hidden",!0),M.hidden=!0,void(M.style.display="none"))},this.resize(),k.on("added",function(){M.style.display="block",M.hidden=!1,M.style.display="block",k.resize()}),k.added(function e(){k.resize();setTimeout(function(){M.style.display="block",M.hidden=!1,M.style.display="block"},50);k.on("added",e,null,!0)}),k.on("removed",function(){M.style.display="none",M.hidden=!0,M.style.display="none"}),T.on("resize",k.resize),(new XMLHttpRequest).upload&&M.addEventListener("drop",function(e){M.removeEventListener("change",j),j(e),setInterval(function(){M.addEventListener("change",j)},100)}),this.save=function(e,t,o,n,i,r,a,s,l){var c;if(c=zob(k.save,arguments,"content, filename, x, y, width, height, cached, cachedBounds, type"))return c;if(zot(e)&&(e=T.stage),zot(l)&&(l="png"),zot(t))t="saved_"+String(qe.makeID("numbers",5))+"."+l;else{var d=t.split(".");if(1==d.length)t+="."+l;else{var u=["png","jpg","jpeg"],h=u.indexOf(d[d.length-1].toLowerCase());-1==h?t+="."+l:l=u[h]}}if(zot(o)&&(o=0),zot(n)&&(n=0),zot(i)&&(i=e.getBounds&&e.getBounds()?e.getBounds().width:T.width),zot(r)&&(r=e.getBounds&&e.getBounds()?e.getBounds().height:T.height),e.cache(o,n,i,r),/Edge\/(\d)+/.test(navigator.userAgent)){var f=window.open();f.document.write("<html><head><title>saved</title></head><body style='margin:0px;padding:0px;overflow:hidden'><img src="+e.cacheCanvas.toDataURL("image/"+l)+"></body></html>"),f.document.close()}else{var g=document.createElement("a");g.setAttribute("download",t),g.setAttribute("href",e.cacheCanvas.toDataURL("image/"+l)),document.body.appendChild(g),g.click(),document.body.removeChild(g)}return a?s&&e.cache(cashedBound.x,cashedBound.y,cashedBound.width,cashedBound.height):e.uncache(),k},this.clone=function(){var e=new qe.Loader(t,o,zot(n)?null:n.clone(),i,r,a,s,l,c,d,u,h,f,g,zot(m)?null:m.clone(),zot(z)?null:z.clone(),v,zot(b)?null:b.clone(),zot(y)?null:y.clone(),zot(w)?null:"string"==typeof w?w:w.clone(),zot(x)?null:x.clone(),C,p,T);return k.cloneProps(e)},this.dispose=function(){return k.zimButton_dispose(),k.removeAllEventListeners(),k.removeChild(S),document.body.removeChild(M),!0}},qe.extend(qe.Loader,qe.Button,["clone","dispose"],"zimButton",!1),qe.TextArea=function(t,o,n,i,r,a,s,l,c,d,u,h,f,g,p,m,z){var e;if(e=zob(qe.TextArea,arguments,"width, height, size, padding, color, backingColor, borderColor, borderWidth, corner, shadowColor, shadowBlur, dashed, id, placeholder, readOnly, spellCheck, frame",this))return e;if(z_d("67.6"),zot(t)&&(t=250),zot(o)&&(o=70),zot(n)&&(n=20),zot(i)&&(i=5),zot(r)&&(r="#666"),zot(a)&&(a="rgba(256,256,256,.1)"),zot(s)&&(s="rgba(0,0,0,.1)"),zot(c)&&(c=0),!zot(u)&&zot(d)&&(d="rgba(0,0,0,.3)"),!zot(d)&&zot(u)&&(u=10),zot(z)){if(!zimDefaultFrame)return void(zon&&zog("zim.TextArea - please provide a reference to zim Frame"));z=zimDefaultFrame}this.zimContainer_constructor(t,o),this.type="TextArea";var v=this,b=z.stage,y=this.backing=new qe.Rectangle(t,o,a,s,l,c,null,h);-1!=d&&0<u&&(y.shadow=new createjs.Shadow(d,3,3,u)),v.addChild(y);var w=v.tag=document.createElement("textarea");document.body.appendChild(w),zot(f)||(w.setAttribute("id",f),w.setAttribute("name",f)),p&&(w.readOnly=!0),m||(w.spellcheck=!1),zot(g)||w.setAttribute("placeholder",g),w.style.cssText="background-color:rgba(0,0,0,.01); color:"+r+"; resize:none; z-index:3; width:"+(t-2*i)+"px; height:"+(o-2*i)+"px; overflow:hidden; outline:none;font-size:"+n+"px; font-family:verdana; border:none; position:absolute; left:0px; top:0px; display:none;",w.addEventListener("change",function(){v.dispatchEvent("change")}),w.addEventListener("input",function(){v.dispatchEvent("input")}),w.addEventListener("focus",function(){z.zil&&window.removeEventListener("keydown",z.zil[0]),v.dispatchEvent("focus")}),w.addEventListener("blur",function(){z.zil&&window.addEventListener("keydown",z.zil[0]),v.dispatchEvent("blur")});var x=new createjs.DOMElement(w);x.alpha=0,this.on("mousedown",function(){setTimeout(function(){w.focus()},100)}),this.setFocus=function(e){return zot(e)&&(e=!0),e?w.focus():w.blur(),v},this.resize=function(){return setTimeout(function(){var e=v.localToGlobal(i,i);x.x=z.x+e.x*z.scale,x.y=z.y+e.y*z.scale,qe.sca(x,z.scale*v.scaleX,z.scale*v.scaleY),x.alpha=1,v.stage&&b.update()},50),v},this.resize(),v.added(function e(){b.addChild(x);setTimeout(function(){w.style.display="block"},50);v.resize();v.on("added",e,null,!0)}),v.on("removed",function(){b.removeChild(x),w.style.display="none"}),z.on("resize",v.resize),Object.defineProperty(this,"currentValue",{get:function(){return w.value},set:function(e){w.value=e}}),Object.defineProperty(this,"text",{get:function(){return w.value},set:function(e){w.value=e}}),Object.defineProperty(this,"focus",{get:function(){return document.activeElement==w},set:function(e){v.setFocus(e)}}),Object.defineProperty(this,"readOnly",{get:function(){return w.readOnly},set:function(e){w.readOnly=e}}),Object.defineProperty(this,"keyFocus",{get:function(){return zns?qe.KEYFOCUS==v:KEYFOCUS==v},set:function(e){zns?qe.KEYFOCUS=v:KEYFOCUS=v}}),(zns?qe.KEYFOCUS:KEYFOCUS)||(v.keyFocus=!0),w.addEventListener("mousedown",function(){v.keyFocus=!0}),this.clone=function(){var e=new qe.TextArea(t,o,n,i,r,a,s,l,c,d,u,h,f,g,p,m,z);return v.cloneProps(e)},this.dispose=function(){return v.removeAllEventListeners(),v.removeChild(x),document.body.removeChild(w),!0}},qe.extend(qe.TextArea,qe.Container,["clone","dispose"],"zimContainer",!1),qe.drag=function(a,e,r,n,i,t,s,l,c,d,o,u,h,f,g){var p;if(p=zob(qe.drag,arguments,"obj, rect, overCursor, dragCursor, currentTarget, swipe, localBounds, onTop, surround, slide, slideDamp, slideSnap, reg, removeTweens, startBounds"))return p;if(z_d("31"),!zot(a)&&a.on){a.zimDown&&a.noDrag(),a.cursor=zot(r)?"pointer":r,zot(i)&&(i=!1),zot(t)&&(t=!1),zot(s)&&(s=!1),zot(l)&&(l=!0),zot(c)&&(c=!1),zot(d)&&(d=!1),zot(o)&&(o=.3),zot(u)&&(u=!0);!0!==u&&["horizontal","vertical","auto"].indexOf(u)<0&&(u=!1),zot(h)&&(h=!1),zot(f)&&(f=!0),zot(g)&&(g=!0),qe.setSwipe(a,t),a.zimDragRect=e,a.zimLocalBounds=s;var m,z,v,b,y,w,x=!1;if(a.zimAdded=a.on("added",Y,null,!0),a.zimRemoved=a.on("removed",function(){a.zimDragTicker&&qe.Ticker.remove(a.zimDragTicker)},null,!0),a.parent&&Y(),d)var C=new qe.Damp(a.x,o),T=new qe.Damp(a.y,o),A=3,k=0,E=[],M=[],S=a.x,j=a.y,I=a.x,O=a.y,P=a.x,D=a.y,B=-1e4,L=-1e4;return a.pointers={},a.zimDown=a.on("mousedown",function(e){if(a.stage){var t="id"+Math.abs(e.pointerID+1);if(a.pointers[t]=!0,w=i?e.currentTarget:e.target,!a.zimDragRect||w.getBounds()){x=!0,a.stage.mouseMoveOutside=!0,d||(a.zimDragTicker&&qe.Ticker.remove(a.zimDragTicker),a.zimDragTicker=qe.Ticker.add(function(){},a.stage)),f&&createjs.Tween.removeTweens(w),l&&w.parent.setChildIndex(w,w.parent.numChildren-1);var o=w.parent.globalToLocal(e.stageX,e.stageY);h&&(w.x=o.x,w.y=o.y),m=o.x-w.x,z=o.y-w.y,a.zimDragRect&&(s?(b=qe.boundsToGlobal(w.parent,a.zimDragRect),c&&(y=a.zimDragRect)):(b=a.zimDragRect,c&&(y=qe.boundsToGlobal(w.parent,a.zimDragRect,!0)))),a.cursor=zot(n)?"pointer":n,d&&(k=0,E=[o.x],M=[o.y],L=B=-1e4,a.zimDragMoving=!0)}else zog("zim.drag() - drag object needs bounds set")}},!0),a.zimMove=a.on("pressmove",function(e){x&&X(w,e.stageX,e.stageY)},!0),a.zimPosition=X,a.zimUp=a.on("pressup",function(e){var t="id"+Math.abs(e.pointerID+1);if(delete a.pointers[t],x){if(a.cursor=zot(r)?"pointer":r,d){var o=w.parent.globalToLocal(e.stageX,e.stageY);x=!1,S=o.x,j=o.y,I=w.x,O=w.y,C.immediate(w.x),T.immediate(w.y)}else{var n=0;for(var i in a.pointers)n++;0==n&&qe.Ticker.remove(a.zimDragTicker)}a.stage&&a.stage.update()}},!0),a}function Y(){z=m=0,a.zimDragRect&&(s?(b=qe.boundsToGlobal(a.parent,a.zimDragRect),c&&(y=a.zimDragRect)):(b=a.zimDragRect,c&&(y=qe.boundsToGlobal(a.parent,a.zimDragRect,!0)))),b&&g&&(v=a.parent.localToGlobal(a.x,a.y),X(a,v.x,v.y)),d&&(a.zimDragMoving=!0,function(){var i=a.stage;function r(e,t,o,n,i){Math.abs(e.x-B)<.1&&Math.abs(e.y-L)<.1?(a.zimDragMoving=!1,e.x=n,e.y=i,e.dispatchEvent("slidestop")):(B=t,L=o)}a.zimDragTicker=function(){if(w||(w=a),x){var e=w.parent.globalToLocal(i.mouseX,i.mouseY);k++,E.push(e.x),M.push(e.y),A<=k?(P=E.shift(),D=M.shift()):(P=E[0],D=M[0])}else{if(!a.zimDragMoving)return;var t=I+S-P,o=O+j-D;if(b){var n=_(w,t,o);t=n.x,o=n.y}if(u)w.x=C.convert(t),w.y=T.convert(o),r(w,w.x,w.y,t,o);else{var n=_(w,C.convert(t),T.convert(o));w.x=n.x,w.y=n.y,r(w,w.x,w.y,w.x,w.y)}}},qe.Ticker.add(a.zimDragTicker,i)}()),zot(a.zimMaskDynamic)||a.zimMaskApply()}function X(e,t,o){if(zot(e)&&(e=w||a),e.parent&&e.stage){if(zot(t)||zot(o)){var n=e.parent.localToGlobal(e.x,e.y);m=z=0,a.zimDragRect&&(s?(b=qe.boundsToGlobal(e.parent,a.zimDragRect),c&&(y=e.zimDragRect)):(b=a.zimDragRect,c&&(y=qe.boundsToGlobal(e.parent,a.zimDragRect,!0)))),t=n.x,o=n.y,d&&(I=e.x,O=e.y,w=e,C.immediate(I),T.immediate(O))}var i,r=e.parent.globalToLocal(t,o);d&&u?"vertical"==u?(i=_(e,r.x-m,r.y-z),e.x=i.x,e.y=r.y-z):"horizontal"==u?(i=_(e,r.x-m,r.y-z),e.x=r.x-m,e.y=i.y):(e.x=r.x-m,e.y=r.y-z):(i=_(e,r.x-m,r.y-z),e.x=i.x,e.y=i.y)}}function _(e,t,o){if(b)if(c){var n=e.getBounds().width,i=e.getBounds().height,r=e.getBounds().x,a=e.getBounds().y;n<y.width?t=y.x+(y.width-n)/2+(e.regX-r):(t-(e.regX-r)>y.x&&(t=y.x+(e.regX-r)),t-(e.regX-r)+n<y.x+y.width&&(t=y.x+y.width+(e.regX-r)-n)),e.height<y.height?o=y.y+(y.height-i)/2+(e.regY-a):(o-(e.regY-a)>y.y&&(o=y.y+(e.regY-a)),o-(e.regY-a)+i<y.y+y.height&&(o=y.y+y.height+(e.regY-a)-i))}else{var s=e.parent.localToGlobal(t,o);t=Math.max(b.x,Math.min(b.x+b.width,s.x)),o=Math.max(b.y,Math.min(b.y+b.height,s.y)),t=(s=e.parent.globalToLocal(t,o)).x,o=s.y}return{x:t,y:o}}},qe.noDrag=function(e){if(z_d("32"),!zot(e)&&e.on)return e.cursor="default",qe.setSwipe(e,!0),e.off("added",e.zimAdded),e.off("removed",e.zimRemoved),e.off("mousedown",e.zimDown),e.off("pressmove",e.zimMove),e.off("pressup",e.zimUp),qe.Ticker&&e.zimDragSlide&&qe.Ticker.remove(e.zimDragSlide),e.zimDragMoving=e.zimAdded=e.zimRemoved=e.zimDown=e.zimMove=e.zimUp=e.zimDragRect=e.zimDragSlide=null,e},qe.dragRect=function(e,t){if(z_d("33"),!zot(e)&&e.on&&!zot(t))return e.zimDragRect=t,e.zimDragMoving=!0,e.zimPosition&&e.zimPosition(),e},qe.transform=function(s,e,t,o,n,i,r,a,l,c,d,u,h,f,g,p,m,z,v,b,y,w,x){var C;if(C=zob(qe.transform,arguments,"obj, move, stretchX, stretchY, scale, rotate, toggle, visible, onTop, showStretch, showRotate, showScale, showReg, showBorder, borderColor, borderWidth, dashed, customCursors, handleSize, regSize, snapDistance, snapRotation, cache"))return C;if(z_d("33.5"),zot(s)||!s.getBounds)return zog("zim methods - transform(): please provide object with bounds set"),s;if(!s.getBounds())return zog("zim methods - transform(): please setBounds() on object"),s;if(!s.parent)return zog("zim methods - transform(): object should be on stage first"),s;zot(e)&&(e=!0),zot(t)&&(t=!0),zot(o)&&(o=!0),zot(n)&&(n=!0),zot(i)&&(i=!0);var T,A=qe.mobile();if(zot(r)&&(r=!0),zot(a)&&(a=!0),zot(l)&&(l=!0),zot(c)&&(c=!!A),zot(d)&&(d=!!A),zot(u)&&(u=!0),zot(h)&&(h=!0),zot(f)&&(f=!0),zot(g)&&(g="brown"),zot(p)&&(p=1),zot(z)&&(z=!A),zot(v)&&(v=qe.mobile()?20:10),zot(b)&&(b=16),zot(y)&&(y=10),zot(w)&&(w=5),zot(x)&&(x=!0),s.mouseChildren=!1,s.stage)T=s.stage;else{if(!zimDefaultFrame)return s;T=zimDefaultFrame.stage}if(!frame){if(!zimDefaultFrame)return s;frame=zimDefaultFrame}var k=s.getBounds(),E=new qe.Shape,M=new qe.Shape;M.controlType="reg";var S,j,I,O,P,D,B,L,Y,X,_,R,F=s.parent,W=E.graphics,N=M.graphics,G=new qe.Container,H=new qe.Container,V=new qe.Container,U=new qe.Container,Z=new qe.Container;if(zot(s.zimMaskDynamic)||s.zimMaskApply(),z){var K=new Container,q=new Container;function Q(e){e==K&&new Triangle(16,12,12,"white").addTo(e).mov(0,-13.5),new Triangle(16,12,12,"white").addTo(e).mov(13.5).rot(90),e==K&&new Triangle(16,12,12,"white").addTo(e).mov(0,13.5).rot(180),new Triangle(16,12,12,"white").addTo(e).mov(-13.5).rot(-90),e==K&&new Triangle(10,7,7,"black").addTo(e).mov(0,-13),new Triangle(10,7,7,"black").addTo(e).mov(13).rot(90),e==K&&new Triangle(10,7,7,"black").addTo(e).mov(0,13).rot(180),new Triangle(10,7,7,"black").addTo(e).mov(-13).rot(-90),x&&e.cache(-20,-20,40,40)}Q(K),Q(q);var J={"nw-resize":45,"ne-resize":-45,"n-resize":90,"e-resize":0}}function $(){var e=s;for(X=Y=1,R=_=L=0;e.parent;)L+=e.rotation,Y*=e.scaleX,X*=e.scaleY,_+=e.skewX,R+=e.skewY,e=e.parent}$();for(var ee=["nw-resize","ne-resize","nw-resize","ne-resize"],te=[2,3,0,1],oe=0;oe<4;oe++){var ne=new qe.Rectangle(v,v,u?"#e472c4":"rgba(0,0,0,0)",u?"#333":"rgba(0,0,0,0)",2);x&&ne.cache(-1,-1,v+2,v+2),ne.centerReg(H),ne.expand(0),ne.rotation=L,D=z?"none":ee[oe],ne.drag({overCursor:D,dragCursor:D,onTop:!1}),ne.controlType="corner",ne.cu=ee[oe]}for(oe=0;oe<te.length;oe++)H.getChildAt(oe).op=H.getChildAt(te[oe]);var ie=["n-resize","e-resize","n-resize","e-resize"];te=[1,1,0,0];for(oe=0;oe<4;oe++){var re=oe%2==0?s.width/2:v,ae=oe%2==0?v:s.height/2;if(c){ne=new qe.Rectangle(v,v,"#AAA","#333",2);x&&ne.cache(-1,-1,v+2,v+2)}else ne=new qe.Rectangle(re,ae,"rgba(0,0,0,0)");ne.centerReg(oe%2==0?U:V),ne.rotation=L,ne.expand(0),D=z?"none":ie[oe],ne.drag({overCursor:D,dragCursor:D,onTop:!1}),ne.controlType="side",ne.cu=ie[oe]}for(oe=0;oe<te.length;oe++){var se=oe%2==0?U:V;se.getChildAt(Math.floor(oe/2)).op=se.getChildAt(te[oe])}var le=["ne-resize","nw-resize","ne-resize","nw-resize"];for(oe=0;oe<4;oe++){(ne=new qe.Circle(v,d?"#e472c4":"rgba(0,0,0,0)")).addTo(Z),x&&ne.cache(-v,-v,2*v,2*v),ne.expand(0),D=z?"none":le[oe],ne.drag({overCursor:D,dragCursor:D,onTop:!1}),ne.controlType="rotate",ne.cu=le[oe]}var ce=1.8;function de(){var e=v*ce*qe.sign(Y),t=v*ce*qe.sign(X);Z.getChildAt(0).reg(e,t),Z.getChildAt(1).reg(-e,t),Z.getChildAt(2).reg(-e,-t),Z.getChildAt(3).reg(e,-t),T.update()}function ue(){W.c(),N.c(),S=s.localToGlobal(k.x,k.y),j=s.localToGlobal(k.x+k.width,k.y),I=s.localToGlobal(k.x+k.width,k.y+k.height),O=s.localToGlobal(k.x,k.y+k.height),pTM=s.localToGlobal(k.x+k.width/2,k.y),pRM=s.localToGlobal(k.x+k.width,k.y+k.height/2),pBM=s.localToGlobal(k.x+k.width/2,k.y+k.height),pLM=s.localToGlobal(k.x,k.y+k.height/2),P=s.localToGlobal(s.regX,s.regY),pMid=s.localToGlobal(k.x+k.width/2,k.y+k.height/2),B=[S,j,I,O],mids=[pTM,pRM,pBM,pLM],f&&(W.s(g),m&&W.sd([10,5],0),W.ss(p).mt(S.x,S.y).lt(j.x,j.y).lt(I.x,I.y).lt(O.x,O.y).lt(S.x,S.y).cp()),E.setBounds(S.x,S.y,j.x-S.x,O.y-S.y),h&&(N.s("#eee").ss(p).f("rgba(0,0,0,.1)").dc(0,0,b),N.s("#222").ss(p).dc(0,0,.3*b)),$();for(var e=Math.min(50,Math.abs(_))*qe.sign(_),t=Math.min(50,Math.abs(R))*qe.sign(R),o=L*qe.sign(Y*X)*qe.sign(s.scaleX*s.scaleY),n=0;n<B.length;n++){var i=B[n];H.getChildAt(n).pos(i.x,i.y).ske(e,t).rot(o),Z.getChildAt(n).pos(i.x,i.y).rot(o);var r=mids[n],a=n%2==0?U:V;a.getChildAt(Math.floor(n/2)).pos(r.x,r.y).ske(e,t).rot(o),c||a.getChildAt(Math.floor(n/2)).sca(n%2==0?Y/2:1,n%2==0?1:X/2)}M.pos(P.x,P.y)}Z.alpha=.5,de(),ue();var he=new qe.Shape(1e3,1e3);function fe(){he.pos(0,0),he.graphics.c().f("rgba(0,0,0,.01)").mt(S.x,S.y).lt(j.x,j.y).lt(I.x,I.y).lt(O.x,O.y).lt(S.x,S.y).cp(),he.reg(P.x,P.y),he.pos(P.x,P.y)}fe(),G.on("dblclick",function(e){frame.ctrlKey&&s.transformControls.visible&&(s.scaleX=1,s.scaleY=1,s.rotation=0,z&&K.rot(s.rotation),ue(),fe(),T.update()),_e(e,!0)});var ge=G.on("mousedown",me),pe=s.on("mousedown",me);function me(e){s.hitTestPoint(e.stageX,e.stageY)?s.transformControls.visible||(z?(Ne=!1,he.mouseEnabled=!1):frame.canvas.style.cursor="move",s.transformControls.show(),s.dispatchEvent("transformshow")):s.transformControls.visible&&!G.hitTestPoint(e.stageX,e.stageY)&&(s.transformControls.hide(),s.dispatchEvent("transformhide"))}var ze,ve,be,ye,we,xe,Ce,Te,Ae,ke,Ee,Me=T.on("stagemousedown",function(e){s.transformControls.visible&&!G.hitTestPoint(e.stageX,e.stageY)&&(s.transformControls.hide(),s.dispatchEvent("transformhide"))});r||(G.off("mousedown",ge),s.off("mousedown",pe),T.off("stagemousedown",Me));var Se,je,Ie,Oe=!1,Pe=!1,De=s.cursor,Be=new Circle(30,"rgba(0,0,0,0)").expand(20);if(z){Be.mouseEnabled=!1,Be.mouseChildren=!1,Be.addChild(q),H.on("mouseover",Re),H.on("mouseout",Fe),V.on("mouseover",Re),V.on("mouseout",Fe),U.on("mouseover",Re),U.on("mouseout",Fe),Z.on("mouseover",Re),Z.on("mouseout",Fe);var Le=new Circle(30,"rgba(0,0,0,0)").expand(20);Le.cursor="none"}function Ye(e){if(Pe=!0,l&&(s.parent.setChildIndex(s,s.parent.numChildren-1),T.addChild(G)),Se&&T.off("stagemousemove",Se),ze=e.target.x,ve=e.target.y,Te=s.x,Ae=s.y,startSX=s.scaleX,startSY=s.scaleY,"rotate"==e.target.controlType){Oe=!0,be=s.rotation;var t=e.stageX,o=e.stageY,n=F.localToGlobal(Te,Ae);ke=n.x,Ee=n.y,ye=180*Math.atan2(o-Ee,t-ke)/Math.PI}frame.ctrlKey||"rotate"==e.target.controlType?(we=Math.abs(ze-s.x),xe=Math.abs(ve-s.y)):(we=Math.abs(ze-e.target.op.x),xe=Math.abs(ve-e.target.op.y)),"rotate"!=e.target.controlType&&(Ce={x:e.target.op.x,y:e.target.op.y}),Be.addTo(T).pos(e.stageX,e.stageY),Be.cursor=z?"none":e.target.cu,z&&(q.rotation=s.rotation*qe.sign(Y*X)*qe.sign(s.scaleX*s.scaleY)+J[e.target.cu],"side"!=e.target.controlType&&Y*X<0&&(q.rotation+=90),Le.addTo(T,1).pos(e.stageX,e.stageY)),he.visible=!1,s.cursor="none"}function Xe(e){var t;if(t=frame.ctrlKey&&"corner"==e.target.controlType?xe<we?(e.target.x-Te)/(ze-Te):(e.target.y-Ae)/(ve-Ae):xe<we?(e.target.x-e.target.op.x)/(ze-e.target.op.x):(e.target.y-e.target.op.y)/(ve-e.target.op.y),"corner"==e.target.controlType?(s.scaleX=t*startSX,s.scaleY=t*startSY):(s.scaleX="e-resize"==e.target.cu?t*startSX:startSX,s.scaleY="n-resize"==e.target.cu?t*startSY:startSY),ue(),Be.pos(e.stageX,e.stageY),z&&Le.pos(e.stageX,e.stageY),!frame.ctrlKey||"side"==e.target.controlType){var o=e.target.op.x,n=e.target.op.y;s.x-=(o-Ce.x)*qe.sign(Y)*qe.sign(s.scaleX),s.y-=(n-Ce.y)*qe.sign(X)*qe.sign(s.scaleY)}ue()}function _e(e,t){de();var o=e?e.target.controlType:"move";t&&(o="reset"),z&&Le.removeFrom(T);var n=!1;Ie=null,"move"==o?(s.x==Ge.x&&s.y==Ge.y||((Ie=new createjs.Event("transformed")).transformType="move"),n=he.hitTestPoint(e.stageX,e.stageY)):"corner"==o?(s.scaleX==Ge.scaleX&&s.scaleY==Ge.scaleY||((Ie=new createjs.Event("transformed")).transformType="size"),n=H.hitTestPoint(e.stageX,e.stageY)):"side"==o?(s.scaleX==Ge.scaleX&&s.scaleY==Ge.scaleY||((Ie=new createjs.Event("transformed")).transformType="stretch"),n=V.hitTestPoint(e.stageX,e.stageY)||U.hitTestPoint(e.stageX,e.stageY)):"rotate"==o?(s.rotation!=Ge.rotation&&((Ie=new createjs.Event("transformed")).transformType="rotate"),n=Z.hitTestPoint(e.stageX,e.stageY)):"reg"==o?s.regX==Ge.regX&&s.regY==Ge.regY||((Ie=new createjs.Event("transformed")).transformType="reg"):(Ie=new createjs.Event("transformed")).transformType="reset"==o?"reset":"unknown",n||(Be.removeFrom(T),frame.canvas.style.cursor="default",s.cursor=De),T.update(),Ie&&s.dispatchEvent(Ie)}function Re(e){Pe||(Be.addTo(T),Le.addTo(T,1),Be.pos(e.stageX,e.stageY),Le.pos(e.stageX,e.stageY),q.rotation=s.rotation*qe.sign(Y*X)*qe.sign(s.scaleX*s.scaleY)+J[e.target.cu],"side"!=e.target.controlType&&Y*X<0&&(q.rotation+=90),T.update(),Se&&T.off("stagemousemove",Se),Se=T.on("stagemousemove",function(e){Be.pos(e.stageX,e.stageY),T.update()}))}function Fe(e){T.off("stagemousemove",Se),Pe||(s.cursor=De,Be.removeFrom(T),Le.removeFrom(T),T.update())}function We(){l&&(s.parent.setChildIndex(s,s.parent.numChildren-1),T.addChild(G))}H.on("mousedown",Ye),H.on("pressmove",Xe),H.on("pressup",_e),V.on("mousedown",Ye),V.on("pressmove",Xe),V.on("pressup",_e),U.on("mousedown",Ye),U.on("pressmove",Xe),U.on("pressup",_e),Z.on("mousedown",Ye),Z.on("pressmove",function(e){var t=180*Math.atan2(e.stageY-Ee,e.stageX-ke)/Math.PI;frame.shiftKey?s.rot(45*Math.round((be+(t-ye)*qe.sign(Y)*qe.sign(s.scaleX))/45)):s.rot(be+(t-ye)*qe.sign(Y)*qe.sign(s.scaleX));ue(),Be.pos(e.stageX,e.stageY),z&&(q.rotation=s.rotation*qe.sign(Y*X)*qe.sign(s.scaleX*s.scaleY)+J[e.target.cu],"side"!=e.target.controlType&&Y*X<0&&(q.rotation+=90),Le.pos(e.stageX,e.stageY));ue()}),Z.on("pressup",_e),M.drag(),M.on("mousedown",We),M.on("pressup",function(e){if(!frame.ctrlKey){for(var t=0;t<B.length;t++)if(qe.dist(M.x,M.y,B[t].x,B[t].y)<y){M.x=B[t].x,M.y=B[t].y;break}qe.dist(M.x,M.y,pMid.x,pMid.y)<y&&(M.x=pMid.x,M.y=pMid.y)}var o=s.rotation,n=s.globalToLocal(M.x,M.y),i=F.globalToLocal(M.x,M.y);s.reg(n.x,n.y),s.rotation=0,s.pos(s.x+i.x-s.x,s.y+i.y-s.y),s.rotation=o,ue(),fe(),_e(e),T.update()});var Ne=!0;D=z?"none":"move",he.drag({overCursor:D,dragCursor:D,onTop:!1}),he.controlType="move",z&&(he.on("mouseover",function(e){if(Pe||!z||!Ne)return;K.addTo(G).rot(s.rotation*qe.sign(Y*X)*qe.sign(s.scaleX*s.scaleY)).pos(e.stageX,e.stageY),T.update(),je&&T.off("stagemousemove",je);je=T.on("stagemousemove",function(e){K.pos(e.stageX,e.stageY),T.update()})}),he.on("mouseout",function(){if(T.off("stagemousemove",je),Pe)return;K.removeFrom(G),T.update()})),he.on("mousedown",We),he.on("pressmove",function(){var e=F.globalToLocal(he.x,he.y);s.x=e.x,s.y=e.y,ue()}),he.on("pressup",_e);var Ge,He=T.on("stagemouseup",function(){Pe=!1,he.mouseEnabled=!0,Ne||s.x==Ge.x&&s.y==Ge.y||((Ie=new createjs.Event("transformed")).transformType="move",s.dispatchEvent(Ie)),Ne=!0,he.visible=!0,Oe&&!frame.ctrlKey&&1<w&&(s.rotation=Math.round(s.rotation/w)*w,ue()),fe(),he.mouseEnabled=!0,Oe=!1,T.update()});function Ve(){Ge={x:s.x,y:s.y,rotation:s.rotation,regX:s.regX,regY:s.regY,scaleX:s.scaleX,scaleY:s.scaleY}}Ve();var Ue,Ze=s.on("mousedown",Ve);G.on("mousedown",Ve);G.addChild(E),e&&G.addChild(he),n&&G.addChild(H),t&&G.addChild(V),o&&G.addChild(U),i&&G.addChild(Z),G.addChild(M),e&&(s.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),Ue=s.on("pressmove",function(){ue(),fe(),de()}));var Ke=r;return s.transformControls={visible:a,show:function(){return l&&s.parent.setChildIndex(s,s.parent.numChildren-1),T.addChild(G),s.transformControls.visible=!0,T.update(),s},hide:function(){return T.removeChild(G),s.transformControls.visible=!1,z&&(Se&&T.off("stagemousemove",Se),je&&T.off("stagemousemove",je),Pe=!1,Be.removeFrom(T),Le.removeFrom(T)),e||(s.cursor=De),T.update(),s},remove:function(){s.transformControls.hide(),r=!1,e&&(s.noDrag(),s.off("pressmove",Ue))},add:function(){s.transformControls.show(),r=Ke,e&&(s.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),Ue=s.on("pressmove",Ue))},toggleOn:function(){r=Ke=!0,ge=G.on("mousedown",ge),pe=s.on("mousedown",pe),Me=T.on("stagemousedown",Me)},toggleOff:function(){r=Ke=!1,G.off("mousedown",ge),s.off("mousedown",pe),T.off("stagemousedown",Me)},disable:function(){G.mouseChildren=!1,G.mouseEnabled=!1,e&&(s.noDrag(),s.off("pressmove",Ue))},enable:function(){G.mouseChildren=!0,G.mouseEnabled=!0,e&&(s.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),Ue=s.on("pressmove",Ue))},recordData:function(e){var t={type:s.type,index:F.getChildIndex(s),x:s.x,y:s.y,scaleX:s.scaleX,scaleY:s.scaleY,rotation:s.rotation,skewX:s.skewX,skewY:s.skewY,regX:s.regX,regY:s.regY,controls:s.transformControls.visible};return e?JSON.stringify(t):t},setData:function(e,t){if(!zot(e)){t&&(e=JSON.parse(e));var o=e.controls;delete e.controls;var n=e.index;for(var i in zot(n)&&(n=0),delete e.index,e)s[i]=e[i];return ue(),fe(),de(),F.setChildIndex(s,n),o?s.transformControls.show():s.transformControls.hide(),s}},resize:function(){return F=s.parent,ue(),fe(),de(),a&&s.transformControls.show(),s},dispose:function(){s.transformControls.hide(),r=!1,e&&(zog("here"),s.noDrag(),s.off("pressmove",Ue)),G.removeAllEventListeners(),pe&&s.off("mousedown",pe),ge&&s.off("mousedown",ge),Me&&T.off("stagemousedown",Me),Se&&T.off("stagemousemove",Se),je&&T.off("stagemousemove",je),He&&T.off("stagemouseup",He),Ze&&s.off("mousedown",Ze),Ue&&s.off("pressmove",Ue)},scaleControls:H,stretchXControls:V,stretchYControls:U,rotateControls:Z},a&&s.transformControls.show(),s},qe.setSwipe=function(r,e){if(z_d("34"),!zot(r)&&r.on)return r.zimNoSwipe=!e||null,r instanceof createjs.Container&&function e(t){var o=t.numChildren;var n;for(var i=0;i<o;i++)(n=t.getChildAt(i)).zimNoSwipe=r.zimNoSwipe,n instanceof createjs.Container&&e(n)}(r),r},qe.gesture=function(C,e,t,l,o,T,A,c,n,d,u,k,i,r){var a;if(a=zob(qe.gesture,arguments,"obj, move, scale, rotate, rect, minScale, maxScale, snapRotate, localBounds, slide, slideEffect, regControl, onTop, surround"))return a;if(z_d("34.5"),!zot(C)&&C.on){var h,f;if(zot(e)&&(e=!0),zot(t)&&(t=!0),zot(l)&&(l=!0),zot(n)&&(n=!1),zot(c)&&(c=1),zot(d)&&(d=!1),zot(u)&&(u=5),zot(k)&&(k=!1),zot(i)&&(i=!0),zot(r)&&(r=!1),r&&l&&(r=o=null,zon&&zog("ZIM Gesture() - does not support surround when rotate is true")),zot(C.zimMaskDynamic)||C.zimMaskApply(),!C.zimTouch){var E,M,S,j,I,O,P,g,D=new qe.Damp(C.scaleX,.05),B=new qe.Damp(C.scaleY,.05),L=C.scaleX/C.scaleY;if(C.zimTouch={move:e,scale:t,rotate:l,pointers:{},checkBounds:function(e,t){if(C.zimTouch.rect){var o=C.zimTouch.rect,n=C.parent.localToGlobal(e,t);r?(e=Math.min(o.x,Math.max(o.x+o.width,n.x)),t=Math.min(o.y,Math.max(o.y+o.height,n.y))):(e=Math.max(o.x,Math.min(o.x+o.width,n.x)),t=Math.max(o.y,Math.min(o.y+o.height,n.y))),e=(n=C.parent.globalToLocal(e,t)).x,t=n.y}return{x:e,y:t}}},o){C.zimTouch.rect=o,n&&(C.zimTouch.rect=qe.boundsToGlobal(C.parent,o)),C.zimTouch.rectStartX=C.zimTouch.rect.x,C.zimTouch.rectStartY=C.zimTouch.rect.y,C.zimTouch.rectStartW=C.zimTouch.rect.width,C.zimTouch.rectStartH=C.zimTouch.rect.height;var s=C.zimTouch.checkBounds(C.x,C.y);C.x=s.x,C.y=s.y}d&&(slideSlice=10,slideTotal=5,f=0,h=[],C.zimTouch.slideInterval=qe.interval(slideSlice,function(){h[f++%slideTotal]=[C.x,C.y]}),C.zimTouch.slideInterval.pause(),C.animate({x:C.x,y:C.y},10,"quadOut")),C.zimTouch.mousedown=C.on("mousedown",function(e){zot(g)?g=1:g++,i&&C.parent.setChildIndex(C,C.parent.numChildren-1),k||(P=null,M=C.scaleX,S=C.scaleY,j=C.rotation,I=C.regX,O=C.regY,C.reg(0,0),E=C.getMatrix(),C.regX=I,C.regY=O);var t="id"+Math.abs(e.pointerID+1),o=C.parent.globalToLocal(e.stageX,e.stageY);C.zimTouch.pointers[t]={startX:o.x,startY:o.y,x:o.x,y:o.y},(C.zimTouch.move||C.zimTouch.rotate)&&(C.zimTouch.total=0,qe.loop(C.zimTouch.pointers,function(e){C.zimTouch.total++})),d&&1==C.zimTouch.total&&C.zimTouch.slideInterval.pause(!1),p()}),C.zimTouch.pressmove=C.on("pressmove",function(e){var t="id"+Math.abs(e.pointerID+1),o=C.parent.globalToLocal(e.stageX,e.stageY);C.zimTouch.pointers[t].x=o.x,C.zimTouch.pointers[t].y=o.y;var n,i,r=0,a=0,s=0,l=0;qe.loop(C.zimTouch.pointers,function(e,t){r+=t.x-t.startX,a+=t.y-t.startY,s+=t.x,l+=t.y}),n=r/C.zimTouch.total,i=a/C.zimTouch.total,r=C.zimTouch.startX+n,a=C.zimTouch.startY+i,s/=C.zimTouch.total,l/=C.zimTouch.total;var c={x:C.x,y:C.y,scaleX:C.scaleX,scaleY:C.scaleY,rotation:C.rotation};if(C.zimTouch.move){var d=C.zimTouch.checkBounds(r,a);c.x=d.x,c.y=d.y}if(2==C.zimTouch.pair.length){var u=C.zimTouch.pair[0],h=C.zimTouch.pair[1];if(C.zimTouch.scale){var f=Math.sqrt(Math.pow(h.startX-u.startX,2)+Math.pow(h.startY-u.startY,2)),g=Math.sqrt(Math.pow(h.x-u.x,2)+Math.pow(h.y-u.y,2)),p=C.zimTouch.startSX+(g/f-1),m=C.zimTouch.startSY+(g/f-1);c.scaleX=p,c.scaleY=m,c.scaleX=D.convert(p),c.scaleY=B.convert(m);var z=!zot(T)&&Math.min(p,m)<T,v=!zot(A)&&Math.max(p,m)>A;(z||v)&&(z?1<L?(c.scaleY=T,c.scaleX=T*L):(c.scaleX=T,c.scaleY=T/L):v&&(1<L?(c.scaleX=A,c.scaleY=A/L):(c.scaleY=A,c.scaleX=A*L)),D.immediate(c.scaleX),B.immediate(c.scaleY))}if(C.zimTouch.rotate){var b=Math.atan2(u.startY-h.startY,u.startX-h.startX)*(180/Math.PI),y=Math.atan2(u.y-h.y,u.x-h.x)*(180/Math.PI)-b;c.rotation=C.zimTouch.startR+y}if(k)C.scaleX=c.scaleX,C.scaleY=c.scaleY,C.rotation=c.rotation,C.x=c.x,C.y=c.y;else{C.reg(0,0);var w=C.parent.localToGlobal(s,l);s=w.x,l=w.y;var x=zot(P)?C.globalToLocal(s,l):C.globalToLocal(P.x,P.y);E.clone().translate(x.x,x.y).rotate(c.rotation-j).scale(c.scaleX/M,c.scaleY/S).translate(-x.x,-x.y).decompose(C),C.x+=n,C.y+=i,P=C.localToGlobal(x.x,x.y),C.reg(I,O)}C.zimTouch.scale&&C.dispatchEvent("scale"),C.zimTouch.rotate&&C.dispatchEvent("rotate"),C.zimTouch.move&&C.dispatchEvent("move")}else C.x=c.x,C.y=c.y,C.zimTouch.move&&C.dispatchEvent("move");C.getStage&&C.stage&&C.stage.update()});function p(){C.zimTouch.pair=[],qe.loop(C.zimTouch.pointers,function(e,t,o){t.startX=t.x,t.startY=t.y,o<=1&&C.zimTouch.pair.push(t)}),C.zimTouch.startX=C.x,C.zimTouch.startY=C.y,C.zimTouch.startSX=C.scaleX,C.zimTouch.startSY=C.scaleY,C.zimTouch.startR=C.rotation}C.on("mousedown",function(){var e=1;C.stage.on("stagemousedown",function(){e++}),C.stage.on("stagemouseup",function(){0==--e&&setTimeout(function(){C.zimTouch&&(C.zimTouch.total=0),C.zimTouch&&(C.zimTouch.pointers={}),g=null},50)})},null,!0),C.zimTouch.pressup=C.on("pressup",function(e){var t="id"+Math.abs(e.pointerID+1);if(delete C.zimTouch.pointers[t],(C.zimTouch.move||C.zimTouch.rotate)&&C.zimTouch.total--,l&&!zot(c)&&0==C.zimTouch.total&&(0<c?C.rotation=Math.round(C.rotation/c)*c:0==c&&(C.rotation=Math.round(C.rotation))),d&&0==C.zimTouch.total&&1==g){C.zimTouch.slideInterval.pause();var o=h[(f+1)%h.length],n=h[f%h.length],i=C.x+(o[0]-n[0])*u,r=C.y+(o[1]-n[1])*u,a=C.zimTouch.checkBounds(i,r),s=slideTotal*slideSlice*u*Math.min((C.x-a.x)/(C.x-i)||1,(C.y-a.y)/(C.y-r)||1);C.animate({x:a.x,y:a.y},s,"quadOut",function(){C.dispatchEvent("slidestop")})}0==C.zimTouch.total&&(g=null),C.getStage&&C.stage&&C.stage.update(),p()}),o&&C.on("move",function(){var e=C.localToGlobal(C.regX,C.regY),t=C.boundsToGlobal(),o={x:C.zimTouch.rectStartX+e.x-t.x,y:C.zimTouch.rectStartY+e.y-t.y,width:C.zimTouch.rectStartW-t.width,height:C.zimTouch.rectStartH-t.height};C.gestureRect(o,!1)})}return C}},qe.noGesture=function(e,t,o,n){var i;return(i=zob(qe.noGesture,arguments,"obj, move, scale, rotate"))?i:(z_d("34.6"),!zot(e)&&e.on&&e.zimTouch?(zot(t)&&(t=!0),zot(o)&&(o=!0),zot(n)&&(n=!0),e.zimTouch.move=!t,e.zimTouch.scale=!o,e.zimTouch.rotate=!n,e.zimTouch.move||e.zimTouch.scale||e.zimTouch.rotate||(e.off("mousedown",e.zimTouch.mousedown),e.off("pressmove",e.zimTouch.pressmove),e.off("pressup",e.zimTouch.pressup),delete e.zimTouch),e):void 0)},qe.gestureRect=function(e,t,o){if(z_d("34.7"),!zot(e)&&e.on&&!zot(t)&&e.zimTouch){e.zimTouch.localBounds&&e.parent?e.zimTouch.rect=qe.boundsToGlobal(e.parent,t):e.zimTouch.rect=t,o&&(e.zimTouch.rectStartX=t.x,e.zimTouch.rectStartY=t.y,e.zimTouch.rectStartW=t.width,e.zimTouch.rectStartH=t.height);var n=e.zimTouch.checkBounds(e.x,e.y);return e.x=n.x,e.y=n.y,e}},qe.hitTestPoint=function(e,t,o,n){if(z_d("35"),!e.stage)return!1;if(!zot(e)&&e.globalToLocal){zot(n)&&(n=!0);var i=e.globalToLocal(t,o),r=e.getBounds();if(n&&r){if(i.x>r.x+r.width||i.x<r.x)return!1;if(i.y>r.y+r.height||i.y<r.y)return!1}return e.hitTest(i.x,i.y)}},qe.hitTestReg=function(e,t,o){if(z_d("36"),!e.stage||!t.stage)return!1;if(!zot(e)&&!zot(t)&&e.localToLocal&&t.localToLocal){zot(o)&&(o=!0);var n=t.localToLocal(t.regX,t.regY,e),i=e.getBounds();if(o&&i){if(n.x>i.x+i.width||n.x<i.x)return!1;if(n.y>i.y+i.height||n.y<i.y)return!1}return e.hitTest(n.x,n.y)}},qe.hitTestRect=function(e,t,o,n){if(z_d("37"),!e.stage||!t.stage)return!1;if(!zot(e)&&!zot(t)&&e.hitTest&&t.getBounds){zot(o)&&(o=0),zot(n)&&(n=!0);var i=t.getBounds();if(i){var r=e.getBounds();if(n&&r&&!qe.hitTestBounds(e,t))return!1;var a,s,l=i.x+i.width/2,c=i.y+i.height/2,d=t.localToLocal(l,c,e);if(e.hitTest(d.x,d.y))return!0;for(var u=0;u<=o;u++){if(a=i.width*(u+1)/(o+1),s=i.height*(u+1)/(o+1),d=t.localToLocal(i.x+a,i.y,e),e.hitTest(d.x,d.y))return!0;if(d=t.localToLocal(i.x+i.width,i.y+s,e),e.hitTest(d.x,d.y))return!0;if(d=t.localToLocal(i.x+i.width-a,i.y+i.height,e),e.hitTest(d.x,d.y))return!0;if(d=t.localToLocal(i.x,i.y+i.height-s,e),e.hitTest(d.x,d.y))return!0}}else zog("zim methods - hitTestRect():\n please setBounds() on param b object")}},qe.hitTestCircle=function(e,t,o,n){if(z_d("38"),e.stage&&t.stage&&!zot(e)&&!zot(t)&&e.hitTest&&t.getBounds){zot(o)&&(o=8),zot(n)&&(n=!0);var i=t.getBounds();if(i){var r=e.getBounds();if(n&&r&&!qe.hitTestBounds(e,t))return!1;var a=i.x+i.width/2,s=i.y+i.height/2,l=t.localToLocal(a,s,e);if(e.hitTest(l.x,l.y))return!0;for(var c,d,u,h=(i.width+i.height)/2/2,f=0;f<o;f++)if(c=f/o*2*Math.PI,d=a+h*Math.cos(c),u=s+h*Math.sin(c),l=t.localToLocal(d,u,e),e.hitTest(l.x,l.y))return!0}else zog("zim methods - hitTestCircle():\n please setBounds() on param b object")}},qe.hitTestCircles=function(e,t,o){if(z_d("38.5"),e.stage&&t.stage&&!zot(e)&&!zot(t)&&e.hitTest&&e.getBounds&&t.getBounds){var n=e.getBounds(),i=t.getBounds();if(n&&i){zot(o)&&(o=0);var r=e.localToGlobal(n.x+n.width/2,n.y+n.height/2),a=t.localToGlobal(i.x+i.width/2,i.y+i.height/2),s=e.getConcatenatedMatrix(),l=t.getConcatenatedMatrix();scale1X=Math.sqrt(s.a*s.a+s.c*s.c),scale1Y=Math.sqrt(s.b*s.b+s.d*s.d),scale2X=Math.sqrt(l.a*l.a+l.c*l.c),scale2Y=Math.sqrt(l.b*l.b+l.d*l.d);var c=Math.sqrt(Math.abs(Math.pow(r.x-a.x,2)+Math.pow(r.y-a.y,2)));return n.width*Math.max(scale1X,scale1Y)/2+i.width*Math.max(scale2X,scale2Y)/2>=c-o}zog("zim methods - hitTestCircles():\n please setBounds() on both objects")}},qe.hitTestBounds=function(e,t,o,n){if(z_d("39"),e.stage&&t.stage&&!zot(e)&&!zot(t)&&e.getBounds&&t.getBounds){var i=!1;n&&n.graphics&&(i=!0);var r=e.getBounds(),a=t.getBounds();if(r&&a){zot(o)&&(o=0);var s,l,c=qe.boundsToGlobal(e),d=qe.boundsToGlobal(t);if(i){var u=n.graphics;u.c(),u.ss(1).s("blue"),u.r(c.x,c.y,c.width,c.height),u.s("green"),u.r(d.x,d.y,d.width,d.height),n.stage.update()}return l=d,!((s=c).x>=l.x+l.width+o||s.x+s.width+o<=l.x||s.y>=l.y+l.height+o||s.y+s.height+o<=l.y)}zog("zim methods - hitTestBounds():\n please setBounds() on both objects")}},qe.boundsToGlobal=function(e,t,o){if(z_d("40"),!zot(e)&&e.getBounds){zot(o)&&(o=!1);var n=e.getBounds();if(n||!zot(t)){if(t&&(n=t),o)var i=e.globalToLocal(n.x,n.y),r=e.globalToLocal(n.x+n.width,n.y),a=e.globalToLocal(n.x+n.width,n.y+n.height),s=e.globalToLocal(n.x,n.y+n.height);else i=e.localToGlobal(n.x,n.y),r=e.localToGlobal(n.x+n.width,n.y),a=e.localToGlobal(n.x+n.width,n.y+n.height),s=e.localToGlobal(n.x,n.y+n.height);var l=Math.min(i.x,r.x,a.x,s.x),c=Math.min(i.y,r.y,a.y,s.y),d=Math.max(i.x,r.x,a.x,s.x),u=Math.max(i.y,r.y,a.y,s.y);return new createjs.Rectangle(l,c,d-l,u-c)}zog("zim methods - boundsToGlobal():\n please setBounds() on object (or a rectangle)")}},qe.hitTestGrid=function(e,t,o,n,i,r,a,s,l,c,d,u,h){if(z_d("41"),!e.stage)return!1;if(!zot(e)&&!u){var f=e.globalToLocal(r,a);r=f.x,a=f.y}zot(s)&&(s=0),zot(l)&&(l=0),zot(c)&&(c=0),zot(d)&&(d=0);var g=t/n,p=o/i,m=Math.min(n-1,Math.max(0,Math.floor((r-s)/g))),z=Math.min(i-1,Math.max(0,Math.floor((a-l)/p)));if(!(g*(m+1)-c<r-s||r-s<g*m||p*(z+1)-d<a-l||a-l<p*z)){var v=z*n+m;return zot(h)||"index"==h?v:"col"==h?m:"row"==h?z:"array"==h?[v,m,z]:void 0}},qe.animate=function(l,c,n,d,i,r,a,e,t,o,s,u,h,f,g,p,m,z,v,b,y,w,x,C,T,A,k,E,M,S,j,I,O,P,D,B){var L;if(L=zob(qe.animate,arguments,"target, obj, time, ease, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, sequence, sequenceCall, sequenceParams, sequenceReverse, ticker, props, css, protect, override, from, set, id, events, sequenceTarget"))return L;if(z_d("45"),0==qe.ANIMATE||!window.zns&&!ANIMATE)return l;l=zik(l),n=zik(n),d=zik(d),a=zik(a),s=zik(s),u=zik(u),m=zik(m),z=zik(z),A=zik(A),I=zik(I),O=zik(O);var Y={override:!0};if(zot(o)||(Y.loop=o),zot(s)||(Y.count=s),zot(u)||(Y.loopWait=u),zot(h)||(Y.loopCall=h),zot(p)||(Y.loopWaitParams=p),zot(g)||(Y.loopWaitCall=g),zot(f)||(Y.loopParams=f),zot(m)||(Y.rewind=m),zot(z)||(Y.rewindWait=z),zot(v)||(Y.rewindCall=v),zot(b)||(Y.rewindParams=b),zot(y)||(Y.rewindWaitCall=y),zot(w)||(Y.rewindWaitParams=w),zot(E)||(Y=qe.merge(Y,E)),E=Y,zot(x)&&(x=0),0<x&&l.addChild){for(var X=[],_=0;_<l.numChildren;_++)X.push(l.getChildAt(_));B=l,l=X}if(l instanceof Array){A&&l.reverse();var R=0;for(_=0;_<l.length;_++)!function(){var e,o=_;if(I)for(var t in l[o].zimObj={},c)e=zik(c[t]),l[o].zimObj[t]=l[o][t],l[o][t]=e;else for(var t in l[o].zimObj={},c)l[o].zimObj[t]=zik(c[t]);setTimeout(function(){var e=l[R];if(R++,qe.animate(e,e.zimObj,n,d,i,r,a,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,k,qe.copy(E),M,S,j,null,O,P,D,B),o==l.length-1&&C){var t=n||1e3;E&&E.rewind&&(t+=(n||1e3)+(E.rewindWait?E.rewindWait:0)),E&&E.loop&&E.loopWait&&(t+=E.loopWait),setTimeout(function(){C(T)},t)}},x*_)}();return B}var F,W,N,G=n;if(zot(G)&&(G=1e3),zot(d)&&(d="quadInOut"),zot(a)&&(a=0),zot(E)&&(E={override:!0}),zot(r)&&(r=l),zot(k)&&(k=!0),zot(M)&&(M=!1),zot(S)&&(S=!1),zot(I)&&(I=!1),zot(O)&&(O={}),O.scale&&(O.scaleX=O.scaleY=O.scale,delete O.scale),zot(j)||(E.override=j),c instanceof Array){var H,V=1;if(0==c.length)return this;function U(){for(var e,t,o=a,n=0,i=0;i<c.length;i++)if(!zot((e=c[i]).target)){zot(e.time)&&(e.time=G),o+=e.wait?e.wait:0,t=e.time,e.rewind&&(t=2*t+(e.rewindWait?e.rewindWait:0)),e.loop&&(t*=e.loopCount,t+=(e.loopCount-1)*(e.loopWait?e.loopWait:0));var r={target:e.target,obj:qe.copy(e.obj),wait:n+o,waitedCall:e.waitedCall,waitedParams:e.waitedParams,time:e.time,ease:e.ease,from:e.from,rewind:e.rewind,call:e.call,params:e.params,loop:e.loop,loopCount:e.loopCount,loopWait:e.loopWait,loopCall:e.loopCall,loopParams:e.loopParams,loopWaitCall:e.loopWaitCall,loopWaitParams:e.loopWaitParams,rewind:e.rewind,rewindWait:e.rewindWait,rewindCall:e.rewindCall,rewindParams:e.rewindParams,rewindWaitCall:e.rewindWaitCall,rewindWaitParams:e.rewindWaitParams,set:qe.copy(e.masterSet),override:!1,id:P};i==c.length-1&&Z(r),qe.animate(r),n+=o+t,o=0}}function Z(e){E.loop&&(!E.count||V<E.count)?e.call=function(){function e(){for(var e=0;e<H.objects.length;e++)H.objects[e].set&&H.objects[e].set(H.values[e]);E.loopWaitCall&&"function"==typeof E.loopWaitCall&&E.loopWaitCall(E.loopWaitParams),U()}E.loopCall&&"function"==typeof E.loopCall&&E.loopCall(E.loopParams),E.loopWait?(zot(l.zimTweens)&&(l.zimTweens={}),F=l.zimTweens[P]=l.zimTween=createjs.Tween.get(l,{override:E.override}).wait(E.loopWait).call(e)):e()}:e.call=function(){i&&"function"==typeof i&&i(r),Ce(P)},V++}return function(){var e=new qe.Dictionary;H=new qe.Dictionary;for(var t=0;t<c.length;t++)if(q=c[t],l||(l=q.target),zot(q.target)&&(q.target=l),zot(q.ease)&&(q.ease=d),!zot(q.target)){if(q.loop&&(zot(q.loopCount)||q.loopCount<=0)&&(q.loopCount=0,c.splice(t+1,c.length)),zot(q.obj.scale)||(q.obj.scaleX=q.obj.scaleY=q.obj.scale,delete q.obj.scale),q.from){var o=e.at(q.target);if(o){if(q.set){var n=qe.copy(q.obj),i=qe.merge(o,q.set);q.obj=ze(q.target,q.obj,i),q.set=qe.merge(q.set,n)}else q.set=qe.copy(q.obj),q.obj=ze(q.target,q.obj,o);q.from=!1}else e.add(q.target,ze(q.target,q.obj,q.set))}var r={};for(var a in q.obj)r[a]=q.set&&q.set[a]?q.set[a]:q.target[a];zot(H.at(q.target))&&H.add(q.target,{});var s=qe.merge(H.at(q.target),r);H.remove(q.target),H.add(q.target,s),q.masterSet=qe.copy(q.set)}zot(l.zimTweens)&&(l.zimTweens={})}(),me(),U(),l}if(!zot(l)){var K;if(M&&(k=!1),zot(l.zimTweens)&&(l.zimTweens={}),l.stage)K=l.stage;else{if(!zimDefaultFrame)return;K=zimDefaultFrame.stage}for(var q in zot(c.scale)||(c.scaleX=c.scaleY=zik(c.scale),delete c.scale),c){if(!l.zimBusy)break;l.zimBusy[q]&&delete c[q]}if(!qe.isEmpty(c)){var Q=l.mouseEnabled;for(var _ in(S||E.loop||E.rewind)&&(l.mouseEnabled=!1,setTimeout(function(){for(var e in l.zimBusy||(l.zimBusy={}),c)l.zimBusy[e]=!0;l.mouseEnabled=Q},70)),me(),c)c[_]=zik(c[_]);for(_ in O)O[_]=zik(O[_]);for(_ in E)"waitedCall"!=_&&"waitedParams"!=_&&"loopCall"!=_&&"rewindCall"!=_&&"loopWaitCall"!=_&&"rewindWaitCall"!=_&&(E[_]=zik(E[_]));for(_ in c)"string"==typeof c[_]&&(c[_]=l[_]+Number(c[_].replace(/\s/g,"")));for(_ in O)"string"==typeof O[_]&&(O[_]=l[_]+Number(O[_].replace(/\s/g,"")));I&&(c=ze(l,c,O,!0));var J=0;if(E.loop&&!zot(E.count)){J=E.count,delete E.count;V=1}var $,ee=0;E.loopWait&&(ee=E.loopWait,delete E.loopWait),E.loopCall&&($=E.loopCall,delete E.loopCall);var te,oe=l;E.loopParams&&(oe=E.loopParams,delete E.loopParams),E.loopWaitCall&&(te=E.loopWaitCall,delete E.loopWaitCall);var ne,ie=l;if(E.loopWaitParams&&(ie=E.loopWaitParams,delete E.loopWaitParams),E.rewind){if(d){var re=d;-1==re.indexOf("InOut")&&(-1!=re.indexOf("Out")?re=re.replace("Out","In"):-1!=re.indexOf("In")&&(re=re.replace("In","Out")))}var ae,se,le=0;if(delete E.rewind,E.rewindWait&&(le=E.rewindWait,delete E.rewindWait),E.rewindCall){ae=E.rewindCall;var ce=E.rewindParams;zot(ce)&&(ce=l),delete E.rewindCall,delete E.rewindParams}function de(){ae&&"function"==typeof ae&&ae(ce)}if(E.rewindWaitCall){se=E.rewindWaitCall;var ue=E.rewindWaitParams;zot(ue)&&(ue=l),delete E.rewindWaitCall,delete E.rewindWaitParams}function he(){se&&"function"==typeof se&&se(ue)}function fe(){var e=we();l.set&&!I&&l.set(O),F=l.zimTweens[P]=l.zimTween=createjs.Tween.get(l,E).to(c,G,createjs.Ease[d]).call(he).wait(le).call(de).to(e,G,createjs.Ease[re]).call(ye).wait(ee).call(ve),xe()}0<a?F=l.zimTweens[P]=l.zimTween=createjs.Tween.get(l,{override:E.override}).wait(a).call(function(){e&&"function"==typeof e&&e(zot(t)?l:t),fe()}):fe()}else{function ge(){l.set&&!I&&l.set(O),F=l.zimTweens[P]=l.zimTween=createjs.Tween.get(l,E).to(c,G,createjs.Ease[d]).call(ye).wait(ee).call(ve),xe()}0<a?F=l.zimTweens[P]=l.zimTween=createjs.Tween.get(l,{override:E.override}).wait(a).call(function(){e&&"function"==typeof e&&e(zot(t)?l:t),ge()}):ge()}!M&&k&&(ne=D&&!zot(B)&&B.dispatchEvent?qe.Ticker.add(function(){B.dispatchEvent("animation")},K):D&&l.dispatchEvent?qe.Ticker.add(function(){l.dispatchEvent("animation")},K):qe.Ticker.add(function(){},K)),zot(l.zimMaskDynamic)||l.zimMaskApply();var pe=!1;return xe(),l.stopAnimate&&l.stopAnimate.real||(l.stopAnimate=function(e,t){if(zot(t)&&(t=!0),zot(e)){if(!t)return l;for(var o in l.zimBusy=null,createjs.Tween.removeTweens(l),l.zimTweens)Te(o);l.zimTweens=null,l.zimIdSets=null,qe.idSets&&qe.idSets[W||o]&&(delete qe.idSets[W||o],qe.isEmpty(qe.idSets)&&delete qe.idSets),qe.animatedObjects.remove(l)}else{Array.isArray(e)||(e=[e]);var n=ke(e);for(var o in l.zimTweens)t&&0<=n.indexOf(o)&&Ce(o),!t&&n.indexOf(o)<0&&Ce(o)}return l},l.stopAnimate.real=!0,l.pauseAnimate=function(e,t,o){if(zot(e)&&(e=!0),zot(o)&&(o=!0),zot(t)&&!o)return l;if(zot(t))for(var n in l.zimTweens)Ae(n,e);else{Array.isArray(t)||(t=[t]);var i=ke(t);for(var n in l.zimTweens)o&&0<=i.indexOf(n)&&Ae(n,e),!o&&i.indexOf(n)<0&&Ae(n,e)}return l}),l}}function me(){zot(P)?P=qe.makeID(10):(P=String(P),N=P),zot(l.zimIdSets)&&(l.zimIdSets={}),zot(l.zimIdSets[P])?zot(l.zimTweens[P])||(W=P,P=qe.makeID(10),l.zimIdSets[W]=[W],l.zimTweens[W].zimIdSet=W,l.zimIdSets[W].push(P)):(W=P,P=qe.makeID(10),l.zimIdSets[W].push(P))}function ze(e,t,o,n){var i={};for(_ in t)o&&!zot(o[_])?i[_]=o[_]:i[_]=e[_],n&&(e[_]=t[_]);return i}function ve(){$&&"function"==typeof $&&$(oe)}function be(){te&&"function"==typeof te&&te(ie)}function ye(){if(E.loop){if(!(0<J))return void be();if(V<J)return be(),void V++;m?l.set&&l.set(we()):l.set&&l.set(c)}Ce(P),i&&"function"==typeof i&&i(r)}function we(){var e={};for(var t in c)M?zot(O[t])||I?e[t]=l.style[t]:e[t]=O[t]:zot(O[t])||I?e[t]=l[t]:e[t]=O[t];return e}function xe(){F.zimObj=c,F.zimTicker=ne,F.zimPaused=pe,W&&(F.zimIdSet=W),N&&(zot(qe.idSets)&&(qe.idSets={}),zot(qe.idSets[N])?qe.idSets[N]=[l]:qe.idSets[N].indexOf(l)<0&&qe.idSets[N].push(l)),qe.animatedObjects||(qe.animatedObjects=new qe.Dictionary(!0)),qe.animatedObjects.add(l,!0)}function Ce(e){if(!zot(l.zimTweens)&&!zot(l.zimTweens[e])){!function(e){if(l.zimBusy){for(var t in e)delete l.zimBusy[t];qe.isEmpty(l.zimBusy)&&(l.zimBusy=null)}}(l.zimTweens[e].zimObj),l.zimTweens[e].paused=!0,Te(e);var t=l.zimTweens[e].zimIdSet;if(!zot(t)&&l.zimIdSets){var o=l.zimIdSets[t];o&&o.splice(o.indexOf(e),1),o&&0==o.length&&(delete l.zimIdSets[t],qe.isEmpty(l.zimIdSets)&&delete l.zimIdSets)}if(delete l.zimTweens[e],qe.isEmpty(l.zimTweens)&&l.stopAnimate(),l.zimTweens&&l.zimTweens[e]||l.zimIdSets&&l.zimIdSets[t||e]);else if(qe.idSets&&qe.idSets[t||e]){qe.idSets[t||e];var n=qe.idSets[t||e].indexOf(l);0<=n&&qe.idSets[t||e].splice(n,1),qe.idSets[t||e].length<=0&&(delete qe.idSets[t||e],qe.isEmpty(qe.idSets)&&delete qe.idSets)}}}function Te(e){var t;t=l.zimTweens[e].zimTicker,setTimeout(function(){t&&qe.Ticker.remove(t),t=null},200)}function Ae(e,t){var o=l.zimTweens[e];(o.paused=t)!=o.zimPaused&&((o.zimPaused=t)?o.zimTicker&&(o.zimAnimateTimeout=setTimeout(function(){qe.Ticker.remove(o.zimTicker)},200)):(clearTimeout(o.zimAnimateTimeout),o.zimTicker&&(o.zimTicker=qe.Ticker.add(o.zimTicker,K))))}function ke(e){for(var t=[],o=0;o<e.length;o++)l.zimIdSets&&!zot(l.zimIdSets[e[o]])?t=t.concat(l.zimIdSets[e[o]]):t.push(e[o]);return t}},qe.stopAnimate=function(e){if(z_d("45.12"),zot(e)){if(qe.animatedObjects)for(var t=qe.animatedObjects.length-1;0<=t;t--)qe.animatedObjects.objects[t].stopAnimate()}else if(Array.isArray(e)||(e=[e]),qe.idSets)for(var o=0;o<e.length;o++){var n=e[o];if(qe.idSets[n])for(t=qe.idSets[n].length-1;0<=t;t--)qe.idSets[n][t].stopAnimate(n)}},qe.stopZimAnimate=function(e){z_d("45.1"),qe.stopAnimate(e)},qe.pauseAnimate=function(e,t){if(z_d("45.22"),zot(e)&&(e=!0),zot(t)){if(qe.animatedObjects)for(var o=qe.animatedObjects.length-1;0<=o;o--)qe.animatedObjects.objects[o].pauseAnimate(e)}else if(Array.isArray(t)||(t=[t]),qe.idSets)for(var n=0;n<t.length;n++){var i=t[n];if(qe.idSets[i])for(o=qe.idSets[i].length-1;0<=o;o--)qe.idSets[i][o].pauseAnimate(e,i)}},qe.pauseZimAnimate=function(e,t){z_d("45.2"),qe.pauseAnimate(e,t)},qe.wiggle=function(r,a,s,l,c,d,u,e,h,f,g,p,m,t){var o;if(o=zob(qe.wiggle,arguments,"target, property, baseAmount, minAmount, maxAmount, minTime, maxTime, totalTime, type, ease, integer, id, startType, ticker"))return o;if(z_d("45.25"),zot(r)||zot(s)||zot(l))return r;zot(c)&&(c=l),zot(d)&&(d=1e3),zot(u)&&(u=d),zot(f)&&(f="quadInOut"),zot(g)&&(g=!1),zot(p)&&(p=qe.makeID()),zot(h)&&(h="both"),zot(m)&&(m="both"),zot(t)&&(t=!0),zot(e)||(r.wiggleTimeout=setTimeout(function(){r.stopAnimate(p)},e));var z,v=0;return function e(){var t=qe.rand(zik(d),zik(u)),o={},n={};if(n[a]=zik(s),"negative"==h||0==v&&"negative"==m)var i=-qe.rand(zik(l),zik(c),g);else i="positive"==h||0==v&&"positive"==m?qe.rand(zik(l),zik(c),g):0==v?qe.rand(zik(l),zik(c),g,!0):qe.rand(zik(l),zik(c),g)*qe.sign(z)*-1;o[a]=zik(s)+i,0==v&&(t/=2),z=i,v++,"negative"==h||"positive"==h?qe.animate({target:r,obj:o,set:n,ease:f,time:2*t,rewind:!0,override:!1,call:e,id:p,ticker:!!r.stage}):qe.animate({target:r,obj:o,ease:f,time:t,override:!1,call:e,id:p,ticker:!!r.stage})}(),r},qe.loop=function(e,t,o,n,i,r){var a;if(a=zob(qe.loop,arguments,"obj, call, reverse, step, start, end"))return a;if(z_d("45.3"),!zot(e)&&!zot(t)){zot(o)&&(o=!1),(zot(n)||n<=0)&&(n=1);var s="number"==typeof e?"number":e.constructor===Array?"array":e.constructor==={}.constructor?"object":e instanceof NodeList?"nodelist":"container";if("container"!=s||e.addChild)if("number"==s||"array"==s||"nodelist"==s){if(0==(h=f((d="number"==s?e:e.length)-1)))return;if(o)for(var l=i;r<=l;l-=n){if("number"==s)var c=t(l,h,i,r,e);else if("array"==s)c=t(e[l],l,h,i,r,e);else c=t(e.item(l),l,h,i,r,e);if(void 0!==c)return c}else for(l=i;l<=r;l+=n){if("number"==s)c=t(l,h,i,r,e);else if("array"==s)c=t(e[l],l,h,i,r,e);else c=t(e.item(l),l,h,i,r,e);if(void 0!==c)return c}}else if("object"==s){var d=0,u=[];for(var l in e)d++,u.push(l);if(0==(h=f(d-1)))return;if(o)for(l=i;r<=l;l-=n){if(void 0!==(c=t(u[l],e[u[l]],l,h,i,r,e)))return c}else for(l=i;l<=r;l+=n){if(void 0!==(c=t(u[l],e[u[l]],l,h,i,r,e)))return c}}else{var h;if(0==(h=f(e.numChildren-1)))return;if(o)for(l=i;r<=l;l-=n){if(void 0!==(c=t(e.getChildAt(l),l,h,i,r,e)))return c}else for(l=i;l<=r;l+=n){if(void 0!==(c=t(e.getChildAt(l),l,h,i,r,e)))return c}}}function f(e){return zot(i)&&(i=o?e:0),zot(r)&&(r=o?0:e),o&&i<r||!o&&r<i?0:(i<0&&r)<0||e<i&&e<r?0:(i=Math.max(0,Math.min(i,e)),r=Math.max(0,Math.min(r,e)),Math.floor((o?i-r:r-i)/n)+1)}},qe.copyMatrix=function(e,t){return z_d("45.5"),e.x=t.x,e.y=t.y,e.scaleX=t.scaleX,e.scaleY=t.scaleY,e.regX=t.regX,e.regY=t.regY,e.rotation=t.rotation,e.skewX=t.skewX,e.skewY=t.skewY,e},qe.cur=function(e,t){return z_d("41.1"),zot(e)?zog("zim methods - cur(): please provide object"):(zot(t)&&(t="pointer"),e.cursor=t),e},qe.sha=function(e,t,o,n,i){return z_d("41.2"),zot(e)?(zog("zim methods - sha(): please provide object"),e):(zot(t)&&(t="rgba(0,0,0,.3)"),t.blur?e.shadow=t:(zot(o)&&(o=e.width?.08*e.width:5),zot(n)&&(n=e.height?.08*e.height:5),zot(i)&&(i=e.width?.16*e.width:10),e.shadow=new createjs.Shadow(t,o,n,i)),e)},qe.pos=function(e,t,o,n,i,r){var a;return(a=zob(qe.pos,arguments,"obj, x, y, container, index, add"))?a:(z_d("41.5"),zot(e)?void 0:(zot(t)||(e.x=t),zot(o)||(e.y=o),zot(r)&&(r=!0),!zot(n)&&r&&(zot(i)||"number"==typeof i&&isNaN(i)?n.addChild(e):n.addChildAt(e,i)),e))},qe.mov=function(e,t,o){if(z_d("41.6"),!zot(e))return zot(t)||(e.x+=t),zot(o)||(e.y+=o),e},qe.top=function(e){if(z_d("41.62"),!zot(e)&&e.parent)return e.parent.setChildIndex(e,e.parent.numChildren-1),e},qe.bot=function(e){if(z_d("41.63"),!zot(e)&&e.parent)return e.parent.setChildIndex(e,0),e},qe.dep=function(e,t){if(z_d("41.65"),!zot(e))return zot(t)&&(t=0),e.depth=t,e},qe.alp=function(e,t){if(z_d("41.7"),!zot(e))return zot(t)||(e.alpha=t),e},qe.rot=function(e,t){if(z_d("41.8"),!zot(e))return zot(t)||(e.rotation=t),e},qe.siz=function(e,t,o,n){if(z_d("41.85"),!zot(e))return zot(n)&&(n=!1),zot(t)||zot(o)?zot(t)?zot(o)||(n?e.heightOnly=o:e.height=o):n?e.widthOnly=t:e.width=t:(e.widthOnly=t,e.heightOnly=o),e},qe.ske=function(e,t,o){if(z_d("41.9"),!zot(e))return zot(t)||(e.skewX=t),zot(o)||(e.skewY=o),e},qe.reg=function(e,t,o){if(z_d("41.95"),!zot(e))return zot(t)||(e.regX=t),zot(o)||(e.regY=o),e},qe.sca=function(e,t,o){if(z_d("41.97"),!zot(e)&&!zot(e.scaleX))return zot(t)&&(t=e.scaleX),zot(o)&&(o=t),e.scaleX=t,e.scaleY=o,e},qe.scaleTo=function(e,t,o,n,i,r){var a;if(a=zob(qe.scaleTo,arguments,"obj, boundObj, percentX, percentY, type, boundsOnly"))return a;if(z_d("43"),!zot(e)&&e.getBounds&&e.getBounds()){if(!zot(t)&&t.getBounds&&t.getBounds()){zot(o)&&(o=-1),zot(n)&&(n=-1),-1==o&&-1==n&&(o=n=100),zot(i)&&(i="smallest"),zot(r)&&(r=!1);var s=t.getBounds().width*o/100*(r?1:t.scaleX),l=t.getBounds().height*n/100*(r?1:t.scaleY);if((-1==o||-1==n)&&"both"!=i&&"stretch"!=i)return-1==o?qe.sca(e,l/e.getBounds().height):qe.sca(e,s/e.getBounds().width),e;if("both"==i||"stretch"==i)return e.scaleX=-1!=o?s/e.getBounds().width:e.scaleX,e.scaleY=-1!=n?l/e.getBounds().height:e.scaleY,e;if("biggest"==i||"largest"==i||"outside"==i)var c=Math.max(s/e.getBounds().width,l/e.getBounds().height);else c=Math.min(s/e.getBounds().width,l/e.getBounds().height);return qe.sca(e,c),e}zog("zim methods - scaleTo(): please provide a boundObject (with setBounds) to scale to")}else zog("zim methods - scaleTo(): please provide an object (with setBounds) to scale")},qe.fit=function(e,t,o,n,i,r){var a;if(a=zob(qe.fit,arguments,"obj, left, top, width, height, inside"))return a;if(z_d("46"),!zot(e)&&e.getBounds){if(e.getBounds()){if(zot(t)){if(!e.stage)return void zog("zim methods - fit(): please add boundary dimensions or add obj to stage first");if(!e.stage.getBounds())return void zog("zim methods - fit(): please add boundary dimensions or add obj with bounds to stage first");o=t=0,n=e.stage.getBounds().width,i=e.stage.getBounds().height}zot(r)&&(r=!0),e.scaleX=e.scaleY=1;var s,l=n,c=i,d=e.getBounds().width,u=e.getBounds().height;s=r?d/u<=l/c?c/u:l/d:d/u<=l/c?l/d:c/u,e.scaleX=e.scaleY=s;var h=d*s,f=u*s;return e.x=(e.regX-e.getBounds().x)*s+t+(l-h)/2,e.y=(e.regY-e.getBounds().y)*s+o+(c-f)/2,{x:e.x,y:e.y,width:h,height:f,scale:s,bX:t,bY:o,bWidth:n,bHeight:i}}zog("zim methods - fit(): please setBounds() on object")}},qe.outline=function(e,t,o){var n;if(n=zob(qe.outline,arguments,"obj, color, size"))return n;if(z_d("47"),zot(e)||!e.getBounds)return zog("zim methods - outline(): please provide object with bounds set"),e;if(!e.getBounds())return zog("zim methods - outline(): please setBounds() on object"),e;if(!e.parent)return zog("zim methods - outline(): object should be on stage first"),e;zot(t)&&(t="brown"),zot(o)&&(o=2);var i=e.getBounds(),r=new createjs.Shape,a=new createjs.Shape,s=e.parent,l=e.localToLocal(i.x,i.y,s),c=e.localToLocal(i.x+i.width,i.y,s),d=e.localToLocal(i.x+i.width,i.y+i.height,s),u=e.localToLocal(i.x,i.y+i.height,s),h=e.localToLocal(0,0,s),f=r.graphics,g=a.graphics;f.s(t).ss(o).mt(l.x,l.y).lt(c.x,c.y).lt(d.x,d.y).lt(u.x,u.y).lt(l.x,l.y).cp();return g.s("white").ss(o+2),g.mt(-11,0).lt(11,0),g.mt(0,-11).lt(0,11),g.s(t).ss(o),g.mt(-10,0).lt(10,0),g.mt(0,-10).lt(0,10),a.x=h.x,a.y=h.y,a.rotation=e.rotation,f.s("white").ss(o+2).dc(e.x,e.y,16),f.s(t).ss(o).dc(e.x,e.y,16),e.parent.addChild(r),e.parent.addChild(a),r.mouseEnabled=!1,a.mouseEnabled=!1,e.stage&&e.stage.update(),e},qe.addTo=function(e,t,o){if(z_d("47.5"),!zot(e)){if(zot(t)){if(!zimDefaultFrame)return void zog("zim methods - addTo(): please provide container");t=zimDefaultFrame.stage}return zot(o)||isNaN(o)?t.addChild(e):t.addChildAt(e,o),e}zog("zim methods - addTo(): please provide object")},qe.removeFrom=function(e,t){if(z_d("47.6"),!zot(e))return zot(t)?e.parent&&e.parent.removeChild(e):t.removeChild(e),e;zog("zim methods - removeFrom(): please provide object")},qe.added=function(e,t,o,n){if(z_d("47.7"),!zot(e)&&!zot(t)&&"function"==typeof t){if(zot(o)&&(o=100),!e.stage){var i=Date.now(),r=0,a=setInterval(function(){5<r?clearInterval(a):(r++,e.stage&&(t(e.stage,e),clearInterval(a),clearInterval(s)))},10),s=setInterval(function(){0<n&&i-Date.now()>n&&clearInterval(s),e.stage&&(t(e.stage,e),clearInterval(s))},o);return s}t(e.stage,e)}},qe.centerReg=function(e,t,o,n){var i;if(i=zob(qe.centerReg,arguments,"obj, container, index, add"))return i;if(z_d("48"),zot(e)||!e.getBounds||!e.getBounds())return zog("zim methods - centerReg(): please provide object with bounds set"),e;zot(n)&&(n=!0);var r=e.getBounds();return e.regX=r.x+r.width/2,e.regY=r.y+r.height/2,zot(t)&&e.parent?e:n?qe.center(e,t,o):e},qe.center=function(e,t,o,n){var i;if(i=zob(qe.center,arguments,"obj, container, index, add"))return i;if(z_d("48.1"),!zot(e)&&e.getBounds){if(zot(t)&&zimDefaultFrame&&(t=zimDefaultFrame.stage),!zot(t)&&t.getBounds){var r=e.getBounds(),a=t.getBounds();if(zot(n)&&(n=!0),n&&t.addChild&&(zot(o)||"number"==typeof o&&isNaN(o)?t.addChild(e):t.addChildAt(e,o)),zot(a))return e;if(zot(r))return e.x=t.getBounds().width/2,e.y=t.getBounds().height/2,e;var s=e.localToLocal(e.regX,e.regY,t),l=qe.boundsToGlobal(e),c=qe.boundsToGlobal(t,l,!0);if(e.x=a.x+a.width/2-c.width/2+(s.x-c.x),e.y=a.y+a.height/2-c.height/2+(s.y-c.y),!n&&t.getStage&&t.stage&&e.parent){var d=t.localToLocal(e.x,e.y,e.parent);e.x=d.x,e.y=d.y}return e}zog("zim.center(): please provide container with bounds")}else zog("zim.center(): please provide object with bounds")},qe.place=function(e,t){if(z_d("49"),!zot(e))return zot(t)&&(t="obj"),qe.drag({obj:e,currentTarget:!0,dragCursor:"crosshair"}),zog("place "+t+" - to get new position"),e.on("click",function(){zog(t+".x = "+Math.round(e.x)+"; "+t+".y = "+Math.round(e.y)+";"),zog(t+".pos("+Math.round(e.x)+", "+Math.round(e.y)+");")}),e},qe.placeReg=function(t,o){if(z_d("49.5"),!zot(t)){var e=t.stage;if(zot(e))zog("zim.placeReg() - add object to stage before calling placeReg()");else{zot(o)&&(o="obj");var n=t.parent.localToGlobal(t.x,t.y),i=new qe.Shape(-25,-25,50,50).addTo(e).pos(n.x,n.y);i.graphics.s("white").mt(-25,0).lt(25,0).mt(0,-25).lt(0,20),i.compositeOperation="difference",i.expand(0),qe.drag({obj:i}),zog("place cursor to get new registration point location"),e.on("stagemouseup",function(){var e=t.globalToLocal(i.x,i.y);zog(o+".regX = "+Math.round(e.x)+"; "+o+".regY = "+Math.round(e.y)+";"),zog(o+".reg("+Math.round(e.x)+", "+Math.round(e.y)+");")})}}},qe.expand=function(e,t,o){if(z_d("50"),zot(e)||!e.getBounds||!e.getBounds())return zog("zim methods - expand(): please provide object with bounds set"),e;zot(t)&&(t=20),zot(o)&&(o=t);var n=e.getBounds(),i=new createjs.Shape;return i.graphics.f("0").r(n.x-t,n.y-o,n.width+2*t,n.height+2*o),e.hitArea=i,e},qe.setMask=function(e,t,o){if(z_d("50.1"),zot(e)&&zog("zim methods - setMask(): please provide obj"),zot(t))return n(),e;function n(){e.zimMask&&e.zimMask.parent&&e.zimMask.parent.removeChild(e.zimMask),e.zimMask=null,e.zimMaskTicker&&Ticker.remove(e.zimMaskTicker),e.mask=null}var i;function r(){if(o&&(!e.stage||!t.stage))return e;delete i,e.zimMask=t.zimMask=i=t.shape.clone(),qe.copyMatrix(i,t),i.regX=t.regX,i.regY=t.regY,t.addChildAt(i,0),i.alpha=0,i.x=t.x+t.shape.x,i.y=t.y+t.shape.y,e.mask=i}return e.zimMaskOriginal&&e.zimMaskOriginal!=t&&n(),zot(o)&&(o=!("Blob"!=t.type&&zot(t.zimDown)&&zot(t.transformControls)&&zot(t.zimTouch)&&zot(t.zimTweens)),t.zimMaskDynamic=o),(e.zimMaskOriginal=t).zimMaskApply=function(){e.zimMaskTicker&&Ticker.remove(e.zimMaskTicker),e.zimMaskTicker=Ticker.add(r)},t&&t.shape?(r(),o&&t.zimMaskApply()):(i=t,e.mask=i),e},qe.ANIMATE=!0,qe.OPTIMIZE=!1,qe.ACTIONEVENT="mousedown",qe.KEYFOCUS=null,qe.Ticker={stages:null,myUpdate:null,alwaysList:new qe.Dictionary,list:new qe.Dictionary,setFPS:function(e,t){zot(e)&&zot(t)?(e=30,t=60):zot(e)?e=30:zot(t)&&(t=e),qe.Ticker.framerate=createjs.Ticker.framerate=qe.mobile()?e:t},setTimingMode:function(e){createjs.Ticker.timingMode=createjs.Ticker.RAF,"synched"==e&&(createjs.Ticker.timingMode=createjs.Ticker.RAF_SYNCHED),"timeout"==e&&(createjs.Ticker.timingMode=createjs.Ticker.TIMEOUT)},add:function(e,t){z_d("30");var o=qe.Ticker;return o.has(e,t)?e:(o.framerate||o.setFPS(),!zot(t)&&t.update||(t=zimDefaultFrame.stage),zot(e)||"function"!=typeof e?void zog("zim.Ticker.add() - only add functions"):(o.ticker||(o.ticker=createjs.Ticker.on("tick",o.call)),o.list.at(t)?o.list.at(t).push(e):o.list.add(t,[e]),e))},rawID:{},raw:function(t){z_d("30");var o=qe.makeID(7,"letters");return function e(){t(),qe.Ticker.rawID[o]=requestAnimationFrame(e)}(),o},removeRaw:function(e){cancelAnimationFrame(qe.Ticker.rawID[e]),delete qe.Ticker.rawID[e]},call:function(e){for(var t,o,n=qe.Ticker,i=0;i<n.list.length;i++){t=n.list.objects[i],o=n.list.values[i];for(var r=0;r<o.length;r++)o[r]();n.alwaysList.at(t)?t.update():0<o.length&&(!zot(n.update)||qe.OPTIMIZE||!zns&&OPTIMIZE?n.update&&t.update():t.update())}for(i=0;i<n.alwaysList.length;i++)t=n.alwaysList.objects[i],null==n.list[t]&&t.update()},always:function(e){z_d("30");var t=qe.Ticker;t.framerate||t.setFPS(),!zot(e)&&e.update||(e=zimDefaultFrame.stage),t.alwaysList.add(e,!0),t.ticker||(t.ticker=createjs.Ticker.on("tick",t.call))},alwaysOff:function(e){var t=qe.Ticker;!zot(e)&&e.update||(e=zimDefaultFrame.stage),t.alwaysList.remove(e)},remove:function(e){var t=qe.Ticker;if(zot(e)||"function"!=typeof e)zog("zim.Ticker - only remove functions");else{for(var o=0,n=0;n<t.list.length;n++){t.list.objects[n];var i=t.list.values[n].indexOf(e);-1<i&&t.list.values[n].splice(i,1),o+=t.list.values[n].length}0<t.alwaysList.length||0==o&&(createjs.Ticker.off("tick",t.ticker),t.ticker=null)}},removeAll:function(e){for(var t,o=qe.Ticker,n=0,i=0;i<o.list.length;i++)t=o.list.objects[i],(zot(e)||e===t)&&(o.list.values[i]=[]),n+=o.list.values[i].length;0<o.alwaysList.length||0==n&&(createjs.Ticker.off("tick",o.ticker),o.ticker=null)},has:function(e,t){return!zot(t)&&t.update||(t=zimDefaultFrame.stage),qe.Ticker.list&&qe.Ticker.list.at(t)&&0<=qe.Ticker.list.at(t).indexOf(e)},dispose:function(e){for(var t,o=qe.Ticker,n=0,i=o.list.length-1;0<=i;i--)t=o.list.objects[i],zot(e)||e===t?(o.list.remove(e),o.alwaysList.remove(e)):n+=o.list.values[i].length;if(!(0<o.alwaysList.length))return 0==n&&(createjs.Ticker.off("tick",o.ticker),o.ticker=null),!0}},Object.defineProperty(qe.Ticker,"update",{get:function(){return qe.Ticker.myUpdate},set:function(e){var t=qe.Ticker;"boolean"!=typeof e&&(e=null),t.myUpdate=e,!1===t.myUpdate&&(cancelAnimationFrame(t.ticker),t.alwaysList=new qe.Dictionary)}}),qe.Accessibility=function(u,e,o,t,n,f,i,r,a,s,l,c,d,h){var g;if(g=zob(qe.Accessibility,arguments,"appName, tabOrder, tabIndex, cycle, decimals, frame, alwaysHighlight, AHTime, AHColor, AHBorderWidth, AHBorderPadding, AHAlpha, AHObject, AHObjectScale",this))return g;if(z_d("30.5"),this.cjsEventDispatcher_constructor(),zot(u)&&(u="application"),zot(t)&&(t=!1),zot(n)&&(n=2),zot(f)&&(f=zimDefaultFrame),zot(i)&&(i=!1),zot(r)&&(r=700),zot(a)&&(a="brown"),zot(s)&&(s=3),zot(l)&&(l=5),zot(c)&&(c=.8),zot(h)&&(h=.8),zot(d)){var p=new qe.Shape;p.mouseEnabled=!1}else d.mouseEnabled&&(d.mouseEnabled=!1);var m=this;m.cycle=t,m.decimals=n,m.alwaysHighlight=i,m.AHTime=r,m.AHColor=a,m.AHBorderWidth=s,m.AHBorderPadding=l,m.AHAlpha=c,m.AHObjectScale=h;var z,v,b,y,w,x,C,T,A=-1,k=-1,E=[],M=[],S={RadioButtons:"option",Tabs:"tab",Pad:"key"},j=f.canvas.id,I=qe.mobile(),O=!1,P=null,D=[];function B(e){var t=e.currentTarget.boundsToGlobal(),o=t.x+t.width/2,n=t.y+t.height/2;e.stageX<o-5||e.stageX>o+5||e.stageY<n-5||e.stageY>n+5?X():Y()}function L(){y&&(y.innerHTML="")}function Y(){var e,t;P=!0,W(),y&&y.setAttribute("aria-hidden",!1),qe.ACTIONEVENT="click",zns||(ACTIONEVENT="click"),f.stage.removeChild(z),m.alwaysHighlight=!1,f.stage.update();for(var o=0;o<A.length;o++)(t=(e=A[o]).obj.zimTabTag).disabled=!1,e.title=e.title.replace(/\s\(use arrow keys\)/,""),t.setAttribute("aria-label",e.title),t.addEventListener("focus",_)}function X(){P=!1;for(var e=0;e<A.length;e++)A[e].obj.zimTabTag.disabled=!1;W(),i&&function(){for(var e=0;e<E.length;e++){var t=E[e];(!t.zimObject||"Loader"!=t.zimObject.type&&"TextArea"!=t.zimObject.type)&&(E[e].style.left="-2000px")}}()}function _(e){var t=e.currentTarget,o=t.zimObject;k=o.zimTabIndex,o.focus=!0;var n=new createjs.Event("change");n.title=t.getAttribute("aria-label"),m.dispatchEvent(n)}function R(e){P=!1,e.target.focusTab.focus()}function F(){zot(P)||P?Y():X()}function W(){O=!0,v.removeEventListener("focus",F),b.removeEventListener("focus",F),w.removeEventListener("focus",R),x.removeEventListener("focus",R),w.parentNode.removeChild(w),x.parentNode.removeChild(x),C.removeEventListener("focus",R),T.removeEventListener("focus",R),C.parentNode.removeChild(C),T.parentNode.removeChild(T);for(var e=0;e<D.length;e++)D[e][0].off("mousedown",D[e][1])}function N(e){var t=e.currentTarget;if("RadioButton"==t.type||"TabsButton"==t.type||"PadButton"==t.type)for(var o=0;o<t.zimTabParent.buttons.length;o++){var n=t.zimTabParent.buttons[o];n.zimTabTag.setAttribute("aria-label",n.zimTabTag.getAttribute("aria-label").split(" - currently")[0]+(t.zimTabParent.selectedIndex==n.tabIndex?" - currently selected.":" - currently not selected."))}m.tabIndex=e.currentTarget.zimTabIndex,m.activatedObject=t}function G(e){return"TextArea"==e.type||"RadioButtons"==e.type||"Tabs"==e.type||"Pad"==e.type?e.type:"Waiter"==e.type?"Waiter active - please wait":e.text?e.type+" - "+("a"==e.text||"A"==e.text?"eh":e.text):e.type+("Dial"==e.type||"Slider"==e.type||"ColorPicker"==e.type||"Stepper"==e.type?" (use arrow keys)":"")+("TextArea"==e.type?" (press ENTER to edit)":"")}function H(e){var t=e.obj;e.title=e.title.replace(/\.$/,""),"RadioButton"==t.type||"TabsButton"==t.type||"PadButton"==t.type?e.title=e.title+(t.tabIndex==t.zimTabParent.selectedIndex?" - currently selected":" - currently not selected"):"CheckBox"==t.type?e.title=e.title+(t.checked?" - currently checked":" - currently not checked"):"Stepper"==t.type?e.title=e.title+" - currently displaying "+t.currentValue:"Slider"==t.type||"Dial"==t.type?e.title=e.title+" - currently at "+qe.decimals(t.currentValue,m.decimals):"ColorPicker"==t.type?e.title=e.title+" - currently at "+t.selectedColor:"TextArea"==t.type?e.title=e.title+(""!=t.tag.value?"":" - placeholder: "+t.tag.placeholder):"Indicator"==t.type&&(e.title=e.title+" - currently "+(0<=t.selectedIndex?"at "+(t.selectedIndex+1)+" of "+t.num:"not indicating")),e.title+="."}function V(e,t,o,n,i){var r;if(n&&(u=n.obj),n&&("TextArea"==u.type||"Loader"==u.type))return(r=u.tag).setAttribute("aria-label",t),u&&r.setAttribute("aria-hidden",!u.stage),"before"==i?o.parentNode.insertBefore(r,o):o.parentNode.insertBefore(r,o.nextSibling),r.style.zIndex=-5,r.zimObject=u,n.obj.zimTabTag=r,E.push(r),r;if(!n||"Dial"!=u.type&&"Slider"!=u.type&&"Stepper"!=u.type&&"ColorPicker"!=u.type)r=document.createElement("div"),u&&(r.zimObject=u),r.innerHTML="tag",r.setAttribute("role","button");else{var a,s,l=[];if("Dial"==u.type||"Slider"==u.type)for(var c=u.step<=0?(u.max-u.min)/20:u.step,d=u.min;d<u.max;d+=c)l.push(u.min+d);else"Stepper"==u.type?l=u.stepperArray:"ColorPicker"==u.type&&(l=u.colors);(r=document.createElement("select")).disabled=!0,r.zimObject=u,r.addEventListener("change",function(e){P&&(e.currentTarget.zimObject.zimTabParent.currentValueEvent=e.target.value,f.stage.update())}),r.size=1;for(d=0;d<l.length;d++)a=l[d],(s=document.createElement("option")).setAttribute("aria-label",a),s.innerHTML=a,r.add(s),a==u.zimTabParent.currentValue&&s.setAttribute("selected","selected");r.setAttribute("role","button")}if(r.setAttribute("id",e),r.setAttribute("tabindex",0),r.setAttribute("aria-label",t),u&&r.setAttribute("aria-hidden",!u.stage),"before"==i?o.parentNode.insertBefore(r,o):o.parentNode.insertBefore(r,o.nextSibling),r.style.position="absolute",n){var u,h=(u=n.obj).boundsToGlobal();r.style.left=f.x+h.x*f.scale+"px",r.style.top=f.y+h.y*f.scale+"px",r.style.width=h.width*f.scale+"px",r.style.height=h.height*f.scale+"px",n.obj.zimTabTag=r}else r.style.left="-1000px",r.style.top=f.y+"px";return r.style.overflow="hidden",r.style.zIndex=-5,r.style.fontSize="20px",E.push(r),r}Object.defineProperty(this,"tabOrder",{get:function(){return A},set:function(e){v&&v.removeEventListener("focus",L),b&&b.removeEventListener("focus",L);for(var t=0;t<E.length;t++)E[t].parentElement&&(E[t].outerHTML="");var o,n;for(E=[],t=0;t<M.length;t++)(o=A[t])&&M[t][0].off("mousedown",M[t][1]);M=[],A=[];var i=[],r=f.canvas,a=0;for(t=0;t<e.length;t++){if((o=e[t]).constructor=={}.constructor){if(!(n=o.obj)||!n.getStage)continue;o.title||(o.title=G(n))}else o={obj:n=o,title:G(o)};if("RadioButtons"==n.type||"Tabs"==n.type||"Pad"==n.type){var s=[];a--;for(var l=0;l<n.buttons.length;l++){a++;var c=n.buttons[l],d={obj:c,title:o.title+" - "+S[n.type]+": "+("a"==c.text||"A"==c.text?"eh":c.text)};s.push(d),c.zimTabParent=n,c.zimTabParent.zimAccessibility=m,c.zimTabIndex=t+a,c.tabIndex=l,c.zimAccessibility=m,H(d),r=V(j+"Tab"+(t+a),d.title,r,d),M.push([c,c.on("mousedown",N)]),O||D.push([c,c.on("mousedown",B)])}i=i.concat(s)}else n.zimTabIndex=t+a,n.zimTabParent=n,H(o),n.zimAccessibility=m,M.push([n,n.on("mousedown",N)]),O||D.push([n,n.on("mousedown",B)]),i.push(o),r=V(j+"Tab"+(t+a),o.title,r,o)}(v=m.startAppTag=V(j+"PrefixTab",u+" start",f.canvas,null,"before")).addEventListener("focus",L),O||(v.addEventListener("focus",F),(w=V(j+"noAriaTab","",v,null,"before")).setAttribute("aria-hidden",!0),w.focusTab=v,w.addEventListener("focus",R),(C=V(j+"noAriaTab","",v)).setAttribute("aria-hidden",!0),C.focusTab=v,C.addEventListener("focus",R)),r=V(j+"BufferTab","",r),I&&r.setAttribute("aria-hidden",!0),r=b=m.endAppTag=V(j+"SuffixTab",u+" end",r),b.addEventListener("focus",L),O||(b.addEventListener("focus",F),r=x=V(j+"noAriaTab","",b),x.setAttribute("aria-hidden",!0),x.focusTab=b,x.addEventListener("focus",R),(T=V(j+"noAriaTab","",b,null,"before")).setAttribute("aria-hidden",!0),T.focusTab=b,T.addEventListener("focus",R)),A=i}}),Object.defineProperty(this,"tabIndex",{get:function(){return k},set:function(e){if(_state)if(e<0||e>=A.length)d();else{e!=k&&c();var t=A[e].obj;if(t.stage){if(k=e,t.focus=!0,K=!(Z=!0),m.changeTitle(t),t.zimTabTag.focus(),setTimeout(function(){t.zimTabTag.focus();var e=new createjs.Event("change");e.title=t.zimTabTag.getAttribute("aria-label"),m.dispatchEvent(e)},150),m.alwaysHighlight&&!P){if(m.AHObject){z=m.AHObject;var o=qe.boundsToGlobal(t);m.AHObject.alp(m.AHAlpha).addTo(f.stage),m.AHObject.fit(o.x,o.y,o.width,o.height),m.AHObject.sca(m.AHObject.scaleX*m.AHObjectScale),0<m.AHTime&&(U=setTimeout(function(){f.stage.removeChild(m.AHObject),f.stage.update()},m.AHTime))}else{z=p;var n=t.getBounds(),i=t.localToGlobal(n.x-5,n.y-5),r=t.localToGlobal(n.x+n.width+5,n.y-5),a=t.localToGlobal(n.x+n.width+5,n.y+n.height+5),s=t.localToGlobal(n.x-5,n.y+n.height+5),l=p.graphics;l.clear(),l.s(m.AHColor).ss(m.AHBorderWidth).mt(i.x,i.y).lt(r.x,r.y).lt(a.x,a.y).lt(s.x,s.y).lt(i.x,i.y).cp(),p.alpha=m.AHAlpha,0<m.AHTime&&(U=setTimeout(function(){f.stage.removeChild(p),f.stage.update()},m.AHTime))}f.stage.addChild(z),f.stage.update()}}else d()}function c(){if(k&&-1<k)A[k].obj.focus=!1;else for(var e=0;e<A.length;e++)A[e].obj.focus=!1}function d(){c(),Z=!1,m.AHObject&&f.stage.removeChild(m.AHObject),m.alwaysHighlightShape&&f.stage.removeChild(m.alwaysHighlightShape),f.stage.update(),k=-1}}}),Object.defineProperty(this,"aria",{get:function(){return P},set:function(e){(P=e)&&Y()}}),zot(e)?setTimeout(function(){if(-1==A){A=[];var t=[];qe.loop(f.stage,function(e){e.type&&t.push(e)}),m.tabOrder=t,zot(o)||(m.tabIndex=o)}},50):(A=[],m.tabOrder=e,zot(o)||(m.tabIndex=o));var U,Z=!1,K=!0,q=f.on("keydown",function(e){var t;if(9==e.keyCode&&(function(){for(var e=!1,t=0;t<E.length;t++)if(document.activeElement==E[t]){e=!0;break}return!(document.activeElement!=f.canvas&&!e)}()||(Z=!1,-1!=m.tabIndex&&(m.tabIndex=-1)),Z?Q(e):(t=e,f.shiftKey||zid(j+"PrefixTab")!=document.activeElement&&f.canvas!=document.activeElement?!f.shiftKey||zid(j+"SuffixTab")!=document.activeElement&&zid(j+"BufferTab")!=document.activeElement||(0<A.length&&(A[0].obj.focus=!0),Z=K=!0,Q(t)):(0<A.length&&(A[A.length-1].obj.focus=!0),Z=K=!0,Q(t)))),Z&&0<A.length&&0<=m.tabIndex&&13==e.keyCode){var o=A[m.tabIndex],n=o.obj;if(o&&n.stage){var i=new createjs.Event("mousedown"),r=new createjs.Event("click");i.fromEnter=r.fromEnter=!0,"Pane"==n.type?(n.backdrop.dispatchEvent(i),n.backdrop.dispatchEvent(r)):(n.dispatchEvent(i),n.dispatchEvent(r))}}});function Q(e){e.ctrlKey?J(e.shiftKey?-1:1):(e.shiftKey?m.tab(-1):m.tab(1),e.preventDefault())}function J(e){Z=!1,zid(j+(1==e?"SuffixTab":"PrefixTab")).focus(),f.stage.removeChild(d),f.stage.update(),m.tabIndex=-1}this.tab=function(e){if(clearTimeout(U),z&&f.stage.removeChild(z),zot(e)&&(e=1),0!=A.length)for(var t=0;t<A.length;t++){var o=A[t].obj;if(o.focus){o.focus=!1;var n=t+e,i=(n+1e4*A.length)%A.length,r=A[i];o=r.obj;for(var a=0,s=!1;!o.stage||!(!o.zimTabParent&&(zot(o.enabled)||o.enabled)||o.zimTabParent&&(zot(o.zimTabParent.enabled)||o.zimTabParent.enabled));)if(a++,i=((n+=e)+100*A.length)%A.length,o=(r=A[i]).obj,a==A.length){s=!0;break}if(s||!m.cycle&&n!=i&&!K)return void J(e);K=!1,m.tabIndex=i;break}}else J(e)};var $=!(this.changeTitle=function(e,t,o){if("number"!=typeof e&&(e=e.zimTabIndex),!zot(e))if(o&&zot(t))m.tabIndex=e;else{var n=A[e],i=n.obj;zot(t)&&(t=i.zimTabTag.getAttribute("aria-label").split(" - currently")[0]),n.title=t,H(n),i.zimTabTag.setAttribute("aria-label",n.title),o&&(m.tabIndex=e)}});this.talk=function(e){$||((y=V(j+"TalkTab","",b)).setAttribute("role","alert"),y.setAttribute("aria-hidden",!P),$=!0),y.setAttribute("aria-label",e),y.innerHTML=" ",y.innerHTML=e;var t=new createjs.Event("change");t.title=e,m.dispatchEvent(t)},this.resize=function(e){if(zot(e)){if(m.alwaysHighlight&&!zot(P))return;for(var t=0;t<A.length;t++)n(A[t].obj)}else{if("number"!=typeof e&&(e=e.zimTabIndex),e<0)return;var o=A[e].obj;if(!o.stage&&z&&o==m.currentObject&&(f.stage.removeChild(z),f.stage.update()),m.alwaysHighlight&&!zot(P))return;n(o)}function n(e){if("TextArea"!=e.type&&"Loader"!=e.type){var t=e.boundsToGlobal(),o=e.zimTabTag;o.style.left=f.x+t.x*f.scale+"px",o.style.top=f.y+t.y*f.scale+"px",o.style.width=t.width*f.scale+"px",o.style.height=t.height*f.scale+"px",o.setAttribute("aria-hidden",!e.stage),o.hidden=!e.stage}else e.resize()}},Object.defineProperty(this,"currentObject",{get:function(){return A[k]&&A[k].obj?A[k].obj:null},set:function(e){for(var t=0;t<A.length;t++)if(A[t].obj==e){m.tabIndex=t;break}}}),_state=!0,Object.defineProperty(this,"enabled",{get:function(){return _state},set:function(e){_state=e}}),this.dispose=function(){m.tabOrder=[];for(var e=0;e<E.length;e++)E[e].parentElement&&(E[e].outerHTML="");m.removeAllEventListeners(),f.off("keydown",q)}},qe.extend(qe.Accessibility,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),qe.Swipe=function(o,e,t){var n;if(n=zob(qe.Swipe,arguments,"obj, distance, duration",this))return n;if(z_d("70"),this.cjsEventDispatcher_constructor(),!zot(o)&&o.on){var i,r,a,s,l,c;zot(e)&&(e=30),zot(t)&&(t=80),this.distance=e,this.duration=t,this.active=!0;var d=this;o.on("mousedown",function(e){function t(){var e=new createjs.Event("swipe");e.obj=d.obj,e.swipeX=e.swipeY=0,d.direction="none",Math.abs(a-i)>Math.abs(s-r)?(a-i>d.distance&&(e.swipeX=1,d.direction="right"),i-a>d.distance&&(e.swipeX=-1,d.direction="left")):(s-r>d.distance&&(e.swipeY=1,d.direction="down"),r-s>d.distance&&(e.swipeY=-1,d.direction="up")),d.dispatchEvent(e)}d.active&&!e.target.zimNoSwipe&&(d.obj=e.target,a=i=e.stageX,s=r=e.stageY,l=!0,d.dispatchEvent("swipedown"),clearTimeout(c),c=setTimeout(function(){l&&(t(),l=!1)},d.duration),o.on("pressmove",function(e){a=e.stageX,s=e.stageY}),o.on("pressup",function(e){l&&(t(),l=!1,clearTimeout(c))}))}),this.disable=function(){d.active=!1},this.enable=function(){d.active=!0}}else zog("zim controls - Swipe():\nPlease pass in object")},qe.extend(qe.Swipe,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),qe.Pages=function(o,g,p,e,m){var t;if(t=zob(qe.Pages,arguments,"pages, transition, speed, transitionTable, holder",this))return t;if(z_d("71"),this.zimContainer_constructor(),this.type="Pages",zot(o)&&(o=[]),this.pages=o,zot(g)&&(g="none"),zot(p)&&(p=200),zot(e)&&(e=[]),this.transitionTable=e,zot(m)&&zimDefaultFrame&&(m=zimDefaultFrame.stage),m.getBounds&&m.getBounds()){this.speed=p,this.active=!0;var z=this;z.transitioning=!1;var v,b,y=m.getBounds().width,w=m.getBounds().height;"none"==g&&e==[]||l();for(var n,i,x=["left","right","up","down"],r=0;r<o.length;r++)(n=o[r]).constructor!=={}.constructor&&(n=o[r]={page:o[r]}),n.page.zimSwipeArray=n.swipe?n.swipe:[],n.page.zimOriginalAlpha=n.page.alpha,n.page.parent&&n.page.parent.removeChild(n.page);var a,C=this.page=o[0]?o[0].page:null;this.addChild(C),this.swipe=new qe.Swipe(m);var T=!1,s=this.swipe.on("swipe",function(e){if(z.active){var t=e.currentTarget.direction;if("none"!=t){var o="";"left"==t?o="right":"right"==t?o="left":"up"==t?o="down":"down"==t&&(o="up"),t=o;var n=x.indexOf(t);i=C.zimSwipeArray[n],a=[i,t,null,null,!0],z.page=C,z.nextPage=i,z.direction=t,z.dispatchEvent("swipe"),setTimeout(function(){T||z.go(i,t,null,null,!0)},50)}}});this.addPage=function(e,t){zot(t)&&(t=[]);var o={page:e,swipe:t};o.page.zimSwipeArray=o.swipe?o.swipe:[],o.page.zimOriginalAlpha=o.page.alpha,C?o.page.parent&&o.page.parent.removeChild(o.page):(C=z.page=o.page,z.addChild(C))},this.removePage=function(e){z.currentPage==e&&(z.removeChild(e),m.stage&&m.stage.update()),e.zimSwipeArray=null},this.setSwipeArray=function(e,t){zot(t)&&(t=[]);var o={page:e,swipe:t};o.page.zimSwipeArray=o.swipe?o.swipe:[]},this.pause=function(){T=!0},this.unpause=function(){T&&z.go(a[0],a[1],a[2],a[3],a[4])};var A=!0;this.go=function(e,t,o,n,i){if("number"==typeof e){var r=z.pages[e];if(zot(r))return;e=r.page}setTimeout(function(){T=!1},200);for(var a=[{x:y},{x:-y},{y:w},{y:-w}],s=[{x:y/2,alpha:0},{x:-y/2,alpha:0},{y:w/2,alpha:0},{y:-w/2,alpha:0}],l=g,c=p,d=0;d<z.transitionTable.length;d++)if(z.transitionTable[d][0]==C&&z.transitionTable[d][1]==e){l=z.transitionTable[d][2],c=z.transitionTable[d][3];break}if(zot(o)&&(o=l),zot(n)&&(n=c),z.speed=n,z.direction=t,""==e||null==e)z.page=C,z.dispatchEvent("nothing");else if("string"==typeof e)z.page=C,z.dispatchEvent(e);else{if(e==C)return;zot(t)&&(t="right");var u=x.indexOf(t);if(!A)return;function h(e){e[0].uncache(),e[1].uncache(),z.transitioning=!1,z.dispatchEvent("pagetransitioned"),z.removeChild(z.lastPage),z.removeChild(v),z.removeChild(b),A=!0}function f(e){z.removeChild(z.lastPage),qe.animate(e.shift(),{alpha:0},z.speed/2,null,h,e)}A=!1,e.x=0,e.y=0,e.alpha=e.zimOriginalAlpha,z.transitioning=!0,"slide"==o?(e.x=-(0|a[u].x),e.y=-(0|a[u].y),e.cache(0,0,(y+1)/e.scaleX,(w+1)/e.scaleY),C.cache(0,0,(y+1)/C.scaleX,(w+1)/C.scaleY),z.addChild(e),z.addChild(C),qe.animate(C,a[u],z.speed,null,h,[C,e]),qe.animate(e,[{x:0},{x:0},{y:0},{y:0}][u],z.speed)):"reveal"==o?(e.cache(0,0,(y+1)/e.scaleX,(w+1)/e.scaleY),C.cache(0,0,(y+1)/C.scaleX,(w+1)/C.scaleY),z.addChild(e),z.addChild(C),qe.animate(C,s[u],z.speed,null,h,[C,e])):"fade"==o?(e.cache(0,0,(y+1)/e.scaleX,(w+1)/e.scaleY),C.cache(0,0,(y+1)/C.scaleX,(w+1)/C.scaleY),e.alpha=1,z.addChild(e),z.addChild(C),qe.animate(C,{alpha:0},z.speed,null,h,[C,e])):"black"==o?(e.cache(0,0,(y+1)/e.scaleX,(w+1)/e.scaleY),C.cache(0,0,(y+1)/C.scaleX,(w+1)/C.scaleY),e.alpha=1,z.addChild(e),z.addChild(C),v.alpha=0,z.addChild(v),qe.animate(v,{alpha:1},z.speed/2,null,f,[v,C,e])):"clear"==o?(e.cache(0,0,(y+1)/e.scaleX,(w+1)/e.scaleY),C.cache(0,0,(y+1)/C.scaleX,(w+1)/C.scaleY),e.alpha=0,z.addChild(e),z.addChild(C),qe.animate(C,{alpha:0},z.speed/2),qe.animate(e,{alpha:1},z.speed/2,null,h,[C,e],z.speed/2)):"white"==o?(e.cache(0,0,(y+1)/e.scaleX,(w+1)/e.scaleY),C.cache(0,0,(y+1)/C.scaleX,(w+1)/C.scaleY),e.alpha=1,z.addChild(e),z.addChild(C),b.alpha=0,z.addChild(b),qe.animate(b,{alpha:1},z.speed/2,null,f,[b,C,e])):(z.transitioning=!1,z.addChild(e),z.removeChild(C),A=!0),z.lastPage=C,z.page=e,zot(i)&&(i=!1),z.fromSwipe=i,z.dispatchEvent("page"),C=e,m.stage&&m.stage.update()}},this.resize=function(){y=m.getBounds().width,w=m.getBounds().height,"none"==g&&e==[]||l()},this.puff=function(e){for(var t=0;t<o.length;t++)z.addChild(o[t].page);z.addChild(C),0<e&&setTimeout(function(){z.settle()},e)},this.settle=function(){z.removeAllChildren(),z.addChild(C),z.dispatchEvent("puffed")},this.disable=function(){z.active=!1},this.enable=function(){z.active=!0},this.dispose=function(){return z.swipe.off("swipe",s),z.removeAllChildren(),!(o=null)}}else zog("zim controls - Pages():\nholder object must have bounds set");function l(){(v=new createjs.Shape).graphics.f("black").r(0,0,y,w+1),(b=new createjs.Shape).graphics.f("white").r(0,0,y,w+1)}},qe.extend(qe.Pages,qe.Container,"clone","zimContainer",!1),qe.HotSpots=function(n,o,i){var e;if(e=zob(qe.HotSpots,arguments,"spots, local, mouseDowns",this))return e;if(z_d("72"),this.zimContainer_constructor(),this.type="HotSpots",!zot(n)&&Array.isArray(n)){zot(o)&&(o=!0),zot(i)&&(i=!1);for(var r,a,s=(zns?"mousedown"==qe.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",l=[],t=0;t<n.length;t++)c(n[t]);this.addHotSpot=function(e,t,o){r={page:e,rect:t,call:o},n.push(r),c(r)},this.show=function(){for(var e=0;e<l.length;e++)(a=l[e]).button||a.show()},this.hide=function(){for(var e=0;e<l.length;e++)(a=l[e]).hide()},this.removeHotSpots=function(e,t){for(var o=n.length-1;0<=o;o--)r=n[o],a=l[o],t&&!Array.isArray(t)&&(t=[t.x,t.y,t.getBounds().width,t.getBounds().height]),(zot(e)&&zot(t)||zot(t)&&e==r.page||zot(e)&&qe.arraysEqual(t,r.rect)||e==r.page&&qe.arraysEqual(t,r.rect))&&(n.splice(o,1),a.button&&(a.button.off(s,a.button.zimHSEvent),a.button.zimHSEvent=null,i||(a.button.off("mousedown",a.button.zimHSMDEvent),a.button.zimHSMDEvent=null)),a.off(s,d),a.dispose(),l.splice(o,1))},this.dispose=function(){for(var e=0;e<l.length;e++)(a=l[e]).button&&(a.button.off(s,a.button.zimHSEvent),a.button.zimHSCall=null,a.button.zimHSEvent=null,i||(a.button.off("mousedown",a.button.zimHSMDEvent),a.button.zimHSMDEvent=null)),a.off(s,d),a.dispose();return!0}}else zog("zim controls - HotSpots():\nplease provide an array of HotSpot data");function c(e){var t=null;if(!Array.isArray(e.rect)){if(!(t=e.rect))return void zog("zim controls - HotSpots(): HotSpot "+e.page+" "+e.rect+" button does not exist");e.rect=[t.x,t.y,1,1]}(a=new qe.HotSpot(e.page,e.rect[0],e.rect[1],e.rect[2],e.rect[3],e.call,o)).zimHSpage=e.page,a.button=t,l.push(a),a.on(s,d),t&&(a.spot.mouseEnabled=!1,a.spot.mouseChildren=!1,t.zimHScall=e.call,t.zimHSEvent=t.on(s,d,!0),i||(t.zimHSMDEvent=t.on("mousedown",function(e){e.stopImmediatePropagation()})),t.cursor="pointer")}function d(e){e.stopImmediatePropagation&&e.stopImmediatePropagation(),window.event&&(window.event.cancelBubble=!0),"function"==typeof e.currentTarget.zimHScall&&e.currentTarget.zimHScall(e)}},qe.extend(qe.HotSpots,qe.Container,"clone","zimContainer",!1),qe.HotSpot=function(e,t,o,n,i,r,a){var s;if(s=zob(qe.HotSpot,arguments,"obj, x, y, width, height, call, local",this))return s;if(z_d("73"),this.zimContainer_constructor(),this.type="HotSpot",!zot(e)&&e.addChild)if(e instanceof createjs.Container!=0)if(zot(t)||zot(o)||zot(n)||zot(i))zog("zim controls - HotSpot():\nPlease pass in x, y, width, height");else{zot(a)&&(a=!0),eventType=(zns?"mousedown"==qe.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click";var l=n,c=i,d=new createjs.Shape,u=new createjs.Shape;if(a)d.graphics.f("#999999").dr(t,o,l,c),u.graphics.f("#999999").dr(t,o,1,1);else{var h=e.globalToLocal(t,o),f=e.globalToLocal(t+l,o+c),g=f.x-h.x,p=f.y-h.y;d.graphics.f("#999999").dr(h.x,h.y,g,p),u.graphics.f("#999999").dr(h.x,h.y,1,1)}d.alpha=.4,d.mouseEnabled=!1,u.alpha=.01,u.cursor="pointer";var m=(this.spot=u).on(eventType,function(e){"function"==typeof r&&r()});e.addChild(u),u.hitArea=d,this.show=function(){e.addChild(d)},this.hide=function(){e.removeChild(d)},this.dispose=function(){return u.off(eventType,m),e.removeChild(u),delete u,!0}}else zog("zim controls - HotSpot():\nObjects passed in should be Containers");else zog("zim controls - HotSpot():\nPlease pass in container object for obj")},qe.extend(qe.HotSpot,qe.Container,"clone","zimContainer",!1),qe.Manager=function(e){z_d("75");var i=this;this.items=[],this.add=function(e){Array.isArray(e)?i.items=i.items.concat(e):i.items.push(e)},this.remove=function(e){if(zot(e))i.items=[];else{var t;Array.isArray(e)||(e=[e]);for(var o=0;o<e.length;o++){t=e[o];var n=i.items.indexOf(t);-1!=n&&i.items.splice(n,1)}}},this.resize=function(){if(i)for(var e=0;e<i.items.length;e++)i.items[e].resize?i.items[e].resize():i.items.splice(e)},this.dispose=function(){for(var e=i.items.length-1;0<=e;e--)i.items[e].dispose();return i.items=[],!(i=null)}},qe.ResizeManager=function(){z_d("75.5"),qe.Manager.call(this,"ResizeManager")},qe.ResizeManager.prototype=new qe.Manager,qe.ResizeManager.prototype.constructor=qe.ResizeManager,qe.TransformManager=function(e,i){z_d("75.7");var r=this;function a(){localStorage&&r.savePersist()}this.items=[],this.add=function(e){var t,o=[];o=Array.isArray(e)?e:[e];for(var n=!1,i=0;i<o.length;i++)t=o[i],0==r.items.length&&0==i&&(n=!0),"Blob"==t.type||"Squiggle"==t.type?(r.persistID||(n?(n=!1,t.controlsVisible=!0,r.currentObject=t):t.controlsVisible=!1),t.on("change",function(e){var t=new createjs.Event("transformed");t.transformObject=e.target,t.transformType=e.controlType,r.dispatchEvent(t)}),t.on("controlsshow",function(e){var t=new createjs.Event("transformshow");r.currentObject=t.transformObject=e.target,r.dispatchEvent(t)}),t.on("controlshide",function(e){var t=new createjs.Event("transformhide");t.transformObject=e.target,r.currentObject=null,r.dispatchEvent(t)})):(transObj=t.transformControls,r.persistID||(n?(n=!1,transObj.show(),r.currentObject=t):transObj.hide()),t.on("transformed",function(e){var t=new createjs.Event("transformed");t.transformObject=e.target,t.transformType=e.transformType,r.dispatchEvent(t)}),t.on("transformshow",function(e){var t=new createjs.Event("transformshow");r.currentObject=t.transformObject=e.target,r.dispatchEvent(t)}),t.on("transformhide",function(e){var t=new createjs.Event("transformhide");t.transformObject=e.target,r.currentObject=null,r.dispatchEvent(t)}));r.items=r.items.concat(e)},this.remove=function(e){if(zot(e))r.items=[];else{var t;Array.isArray(e)||(e=[e]);for(var o=0;o<e.length;o++){t=e[o],r.currentObject==t&&(r.currentObject=null),t.transformedEvent&&(t.off("transformed",t.transformedEvent),t.transformedEvent=null),"Blob"==t.type||"Squiggle"==t.type?t.controlsVisible=!1:t.transformControls.remove();var n=r.items.indexOf(t);-1!=n&&r.items.splice(n,1)}i&&r.savePersist()}},this.show=function(e){if(!zot(e)){if("Blob"==e.type||"Squiggle"==e.type)e.controlsVisible||(e.controlsVisible=!0);else{var t=e.transformControls;if(!t||t.visible)return;t.show()}r.currentObject=e}},this.hide=function(e){if(!zot(e))if(r.currentObject==e&&(r.currentObject=null),"Blob"==e.type||"Squiggle"==e.type)e.controlsVisible&&(e.controlsVisible=!1);else{var t=e.transformControls;if(!t||t.visible)return;t.hide()}},this.hideAll=function(e){for(var t,o,n=0;n<r.items.length;n++)if((o=r.items[n])&&(o.transformControls||o.update)){if(r.items[n]==e)continue;"Blob"==o.type||"Squiggle"==o.type?o.controlsVisible&&(o.controlsVisible=!1):(t=r.items[n].transformControls).visible&&t.hide()}else r.items.splice(n);r.currentObject=null},this.resize=function(){if(r){for(var e,t=0;t<r.items.length;t++)(e=r.items[t])&&(e.transformControls||e.update)?"Blob"==e.type||"Squiggle"==e.type?e.update():e.transformControls.resize():r.items.splice(t);i&&r.savePersist()}},zot(e)||r.add(e);var s="TransformManager persist(persistID) - sorry, must provide id";this.persist=function(e){if(zot(e)&&zon)zog(s);else{if(r.persistID=e,localStorage&&localStorage[e]){var t=r.persistData=JSON.parse(localStorage[e]);if(t.length==r.items.length)for(var o=0;o<r.items.length;o++)t[o].controlsVisible&&(r.currentObject=r.items[o]),!t[o]||"Blob"!=t[o].type&&"Squiggle"!=t[o].type?t[o]&&r.items[o].transformControls.setData(t[o]):r.items[o].setData(t[o])}var n;for(o=0;o<r.items.length;o++)(n=r.items[o]).transformedEvent||("Blob"==n.type||"Squiggle"==n.type?(n.transformedEvent=n.on("change",a),n.transformedEvent=n.on("controlsshow",a),n.transformedEvent=n.on("controlshide",a)):(n.transformedEvent=n.on("transformed",a),n.transformedEvent=n.on("transformshow",a),n.transformedEvent=n.on("transformhide",a)))}},this.savePersist=function(){for(var e=[],t=0;t<r.items.length;t++)it=r.items[t],"Blob"==it.type||"Squiggle"==it.type?it.recordData&&e.push(it.recordData()):it.transformControls&&it.transformControls.recordData&&e.push(it.transformControls.recordData());r.persistData=e,localStorage[r.persistID]=JSON.stringify(e)},this.clearPersist=function(e){zot(e)&&zon?zog(s):(r.persistData=null,localStorage&&localStorage.removeItem(e))},this.stopPersist=function(){for(var e=0;e<r.items.length;e++)it=r.items[e],it.transformedEvent&&("Blob"==it.type||"Squiggle"==it.type?it.off("change",it.transformedEvent):it.off("transformed",it.transformedEvent),it.transformedEvent=null);r.persistData=null},zot(i)||r.persist(i),this.dispose=function(e,t){if(zot(e)&&(e=!0),r.removeAllEventListeners(),r.persistID&&e&&r.stopPersist(),t)for(var n=0;n<r.items.length;n++)o=r.items[n],"Blob"==o.type||"Squiggle"==o.type?o.dispose():o.transformControls.dispose()}},qe.extend(qe.TransformManager,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),qe.Guide=function(n,i,r,t,o){var e;if(e=zob(qe.Guide,arguments,"obj, vertical, percent, hideKey, pixelKey",this))return e;if(z_d("76"),this.zimContainer_constructor(),this.type="Guide",zot(n)&&(n=zimDefaultFrame?zimDefaultFrame.stage:"stage"),zot(i)&&(i=!0),"stage"==n||n.addChild&&n.getBounds&&n.getBounds()){zot(r)&&(r=!0),zot(t)&&(t="G"),zot(o)&&(o="P");var a,s,l,c,d,u=this,h=80,f=26,g=h/6+h/2,p=2*f;i?((c=C("#00c5af","white","white")).shape.regX=h+h/6,c.shape.regY=f/2,c.label.x=-h/2-h/6):((c=C("#d61fa0","white","white")).shape.regX=h/2,c.shape.regY=f+f/4,c.label.y=3*-f/4),"stage"!=n&&n.addChild(u);var m,z,v,b,y=qe.added(u,function(){"stage"==n?(d=u.stage,n=d):d=n.stage;n.addChild(u),m=n.getBounds().width,z=n.getBounds().height,i?(c.y=z/2,c.label.text="y:"+(u.pixels?Math.round(70*m/100):"70%")):(c.x=m/2,c.label.text="x:"+(u.pixels?Math.round(70*z/100):"70%"));v=new createjs.Shape,u.addChild(v),i?v.x=.7*m:v.y=.7*z,w||(n.addChild(u),A());d.off("stagemousemove",a),a=d.on("stagemousemove",T),d.update()}),w=!1,x={x:0,y:0};Object.defineProperty(this,"pixels",{get:function(){return!r},set:function(e){r=!e,u.resize()}}),window.addEventListener("keydown",k),this.resize=function(){return!!u&&(d&&(A(),T()),!0)},this.dispose=function(){return!!u&&(qe.noDrag(v),clearInterval(y),u.removeAllChildren(),window.removeEventListener("keydown",k),u.parent&&u.parent.removeChild(u),!(u=null))}}else zog("zim controls - Guide(): Please provide container with bounds for the obj (setBounds())");function C(e,t,o){var n=new qe.Container;return n.shape=new createjs.Shape,n.shape.graphics.s(t).ss(1).f(e).r(0,0,h,f),n.shape.alpha=.9,n.addChild(n.shape),n.label=new createjs.Text("10","16px verdana",o),n.label.textAlign="center",n.label.textBaseline="middle",n.addChild(n.label),n.mouseChildren=!1,n.mouseEnabled=!1,n}function T(e){var t,o;e?(t=n.globalToLocal(e.rawX,e.rawY),x=t):t={x:x.x,y:x.y},r?i?(o=Math.round(Math.abs(t.x-v.x)/m*100),c.label.text="x:"+Math.max(0,Math.min(o,100))+"%",c.y=Math.max(p,Math.min(t.y,l))):(o=Math.round(Math.abs(t.y-v.y)/z*100),c.label.text="y:"+Math.max(0,Math.min(o,100))+"%",c.x=Math.max(g,Math.min(t.x,s))):i?(o=Math.round(Math.abs(t.x-v.x)),c.label.text="x:"+Math.max(0,Math.min(o,Math.round(m))),c.y=Math.max(p,Math.min(t.y,l))):(o=Math.round(Math.abs(t.y-v.y)),c.label.text="y:"+Math.max(0,Math.min(o,Math.round(z))),c.x=Math.max(g,Math.min(t.x,s))),d&&d.update()}function A(){var e;w=!0,m=n.getBounds().width,z=n.getBounds().height,i?(e="ew-resize",b=new createjs.Rectangle(0,0,m,0)):(e="ns-resize",b=new createjs.Rectangle(0,0,0,z)),qe.noDrag(v),setTimeout(function(){qe.drag(v,b,e,e,null,null,!0)},500),d.mouseMoveOutside=!0,d.enableMouseOver(10),s=m-2*h/3,l=z-f-f,v.uncache();var t=v.graphics;i?(t.c().s("rgba(0,255,255,.1)").ss(20).mt(0,0).lt(0,z),t.f().s("white").ss(2).mt(0,0).lt(0,z),t.s("#00c5af").sd([20,20]).mt(0,0).lt(0,z).sd(),v.cache(-10,0,20,z)):(t.c().s("rgba(255,0,255,.1)").ss(20).mt(0,0).lt(m,0),t.f().s("white").ss(2).mt(0,0).lt(m,0),t.s("#d61fa0").sd([20,20]).mt(0,0).lt(m,0).sd(),v.cache(0,-10,m,20)),i?c.x=m:c.y=z,u.addChild(c)}function k(e){e||(e=event),d&&(String.fromCharCode(e.keyCode)==t.toUpperCase()&&(u.visible=!u.visible,d.off("stagemousemove",a),u.visible&&(a=d.on("stagemousemove",T,u)),d.update()),String.fromCharCode(e.keyCode)==o.toUpperCase()&&(u.pixels=!u.pixels))}},qe.extend(qe.Guide,qe.Container,"clone","zimContainer",!1),qe.GuideManager=function(){z_d("77"),qe.Manager.call(this,"GuideManager")},qe.GuideManager.prototype=new qe.Manager,qe.GuideManager.prototype.constructor=qe.GuideManager,qe.Grid=function(i,r,a,t,o){var e;if(e=zob(qe.Grid,arguments,"obj, color, percent, hideKey, pixelKey",this))return e;if(z_d("78"),this.zimContainer_constructor(),this.type="Grid",zot(i)&&(i=zimDefaultFrame?zimDefaultFrame.stage:"stage"),zot(r)&&(r="black"),"stage"==i||i.addChild&&i.getBounds&&i.getBounds()){zot(a)&&(a=!0),zot(t)&&(t="G"),zot(o)&&(o="P");var n,s=this,l=10;this.mouseChildren=!1,this.mouseEnabled=!1;var c=80,d=26,u=T("#dddddd",r,"#333333");u.shape.regX=c/2,u.shape.regY=-d/4,u.label.y=3*d/4;var h=T("#dddddd",r,"#333333");h.shape.regX=-c/6,h.shape.regY=d/2,h.label.x=c/2+c/6;var f,g,p,m=c/6+c/2,z=2*d;u.x=m,h.y=z,u.label.text="x:0",h.label.text="y:0","stage"!=i&&i.addChild(s);var v,b,y,w=qe.added(s,function(){"stage"==i?(p=s.stage,i=p):p=i.stage;x||(k(),i.addChild(s));p.off("stagemousemove",n),n=p.on("stagemousemove",A),p.update()}),x=!1,C={x:0,y:0};Object.defineProperty(this,"pixels",{get:function(){return!a},set:function(e){a=!e,s.resize()}}),window.addEventListener("keydown",E),this.resize=function(){return!!s&&(s.removeChild(y),y=null,p&&(k(),A(),setTimeout(function(){s.removeChild(y),y=null,k()},200)),!0)},this.dispose=function(){return clearInterval(w),s.removeAllChildren(),window.removeEventListener("keydown",E),s.parent&&s.parent.removeChild(s),!(s=null)}}else zog("zim controls - Grid(): Please provide container with bounds for the obj (setBounds())");function T(e,t,o){var n=new qe.Container;return n.shape=new createjs.Shape,n.shape.graphics.s(t).ss(1).f(e).r(0,0,c,d),n.shape.alpha=.9,n.addChild(n.shape),n.label=new createjs.Text("10","16px verdana",o),n.label.textAlign="center",n.label.textBaseline="middle",n.addChild(n.label),n.mouseChildren=!1,n.mouseEnabled=!1,n}function A(e){var t;e?(t=i.globalToLocal(e.rawX,e.rawY),C=t):t={x:C.x,y:C.y},a?(u.label.text="x:"+Math.max(0,Math.min(Math.round(t.x/v*100),100))+"%",u.x=Math.max(m,Math.min(t.x,f)),h.label.text="y:"+Math.max(0,Math.min(Math.round(t.y/b*100),100))+"%"):(u.label.text="x:"+Math.max(0,Math.min(Math.round(t.x),Math.round(v))),u.x=Math.max(m,Math.min(t.x,f)),h.label.text="y:"+Math.max(0,Math.min(Math.round(t.y),Math.round(b)))),h.y=Math.max(z,Math.min(t.y,g)),p&&p.update()}function k(){x=!0,i&&i.getBounds&&(v=i.getBounds().width,b=i.getBounds().height),p&&(p.mouseMoveOutside=!0,p.enableMouseOver(10)),f=v-2*c/3,g=b-d-d,y=new qe.Container,s.addChild(y);var e=new createjs.Shape;y.addChild(e);var t=e.graphics;t.s(r).ss(1);var o=new createjs.Shape;if(y.addChild(o),a){for(n=1;n<22;n++)t.mt(n*v/20,0).lt(n*v/20,b);for(n=1;n<20;n++)t.mt(0,n*b/20).lt(v,n*b/20);e.alpha=.3,(t=o.graphics).s(r).ss(1);for(n=1;n<10;n++)t.mt(n*v/10,0).lt(n*v/10,b);for(n=1;n<10;n++)t.mt(0,n*b/10).lt(v,n*b/10)}else{for(var n=0;n<v/l;n++)t.mt(n*l,0).lt(n*l,b);for(var n=0;n<b/l;n++)t.mt(0,n*l).lt(v,n*l);e.alpha=.3,(t=o.graphics).s(r).ss(1);for(var n=0;n<v/(10*l);n++)t.mt(n*(10*l),0).lt(n*(10*l),b);for(var n=0;n<b/(10*l);n++)t.mt(0,n*(10*l)).lt(v,n*(10*l))}t.s("#FFFFFF").ss(8),t.mt(v/2,b/2-40).lt(v/2,b/2+40),t.mt(v/2-40,b/2).lt(v/2+40,b/2),t.s("#000000").ss(4),t.mt(v/2,b/2-40).lt(v/2,b/2+40),t.mt(v/2-40,b/2).lt(v/2+40,b/2),t.s(r).ss(3),t.dr(0,0,v,b),o.alpha=.5,y.cache(0,0,v,b),s.addChild(u),s.addChild(h),p&&p.update()}function E(e){e||(e=event),p&&(String.fromCharCode(e.keyCode)==t.toUpperCase()&&(s.visible=!s.visible,p.off("stagemousemove",n),s.visible&&(n=p.on("stagemousemove",A,s)),p.update()),String.fromCharCode(e.keyCode)==o.toUpperCase()&&(s.removeChild(y),y=null,s.pixels=!s.pixels))}},qe.extend(qe.Grid,qe.Container,"clone","zimContainer",!1),qe.GridManager=function(){z_d("79"),qe.Manager.call(this,"GridManager")},qe.GridManager.prototype=new qe.Manager,qe.GridManager.prototype.constructor=qe.GridManager,qe.Layout=function(b,y,w,x,C,T,A,t){var e;if(e=zob(qe.Layout,arguments,"holder, regions, lastMargin, backgroundColor, vertical, regionShape, scalingObject, hideKey",this))return e;if(z_d("80"),this.cjsEventDispatcher_constructor(),!zot(b)&&b.getBounds)if((A=zot(A)?b:A).getBounds&&A.getBounds()){var k=A.getBounds();b.setBounds(0,0,k.width,k.height),zot(w)&&(w=0),zot(C)&&(C=!0),zot(x)&&(x=""),zot(t)&&(t="B");var E,M=new createjs.Shape,S=this;this.active=!0,this.regions=y;var j=0,I="minWidth",O="width",P="height",D="marginLeft",B="maxHeight";C&&(I="minHeight",O="height",P="width",D="marginTop",B="maxWidth","y","x");for(var o=0;o<y.length;o++){if(!(E=y[o]).object||!E.object.getBounds())return void zog("zim controls - Layout(): each region object must have an object with setBounds() set");E[I]||(E[I]=0),E[O]||(E[O]=0),E.backgroundColor||(E.backgroundColor=""),E.given=0,E.maxGiven=0,E[D]||(E[D]=0),E[B]||(E[B]=100),C?(E.align||(E.align="middle"),E.valign||(0==o?E.valign="top":o==y.length-1?E.valign="bottom":E.valign="middle",1==y.length&&(E.valign="middle"))):(E.valign||(E.valign="top"),E.align||(0==o?E.align="left":o==y.length-1?E.align="right":E.align="middle",1==y.length&&(E.align="middle"))),E[O]&&(E[I]=0),j+=E[O]+E[D]}if(100<(j+=w))zog("zim controls - Layout(): cannot fit regions into 100% bounds");else{var L=100-j;Y(),this.resize=function(){if(S.active){k=A.getBounds(),b.setBounds(0,0,k.width,k.height),M.graphics.clear(),""!=x&&M.graphics.f(x).r(0,0,k.width,k.height);for(var e=0;e<y.length;e++)(E=y[e]).maxGiven=0,E.marginGiven=0;for(var t,o,n,i=!0,r=L;i;){t=!(i=!1);for(e=0;e<y.length;e++)0<(E=y[e]).given&&0==E.maxGiven&&(u=E.object.getBounds()[O],h=E.object.getBounds()[P],o=E.given*k[O]/100,(n=E[B]*k[P]/100)<h/u*o?(E.maxGiven=u/h*n*100/k[O],E.given-E.maxGiven,r-=E.maxGiven):t=!1);if(t)break;for(e=totalPrimaries=0;e<y.length;e++)0==(E=y[e])[O]&&0==E.maxGiven&&(totalPrimaries+=E.object.getBounds()[O]);for(e=0;e<y.length;e++)0==(E=y[e])[O]&&0==E.maxGiven&&(E.given=E.object.getBounds()[O]/totalPrimaries*r)}var a=!0;if(0<(E=y[0]).maxGiven?E.maxGiven<E[I]&&(E[O]=E[I],a=!1):0<E.given&&E.given<E[I]&&(E[O]=E[I],a=!1),0<(E=y[y.length-1]).maxGiven?E.maxGiven<E[I]&&(E[O]=E[I],a=!1):0<E.given&&E.given<E[I]&&(E[O]=E[I],a=!1),!a){for(e=j=0;e<y.length;e++)E=y[e],j+=E[O]+E[D];return 100<(j+=w)?void zog("zim display - Layout(): cannot fit regions into 100% bounds"):(L=100-j,Y(),void S.resize())}var s=!0,l=0,c=0;for(e=0;e<y.length;e++)l+=(E=y[e])[D],0<E[O]?c+=E[O]:0<E.maxGiven?c+=E.maxGiven:0<E.given&&(c+=E.given),0==E[O]&&(s=!1);if(s||t){var d=100-c-(l+=w);if(l-=w+y[0][D],0!=d&&0!=l)for(e=0;e<y.length;e++)0!=e&&((E=y[e]).marginGiven=E[D]/l*(l+d))}var u,h,f,g,p,m=0,z=0;if(T&&T.graphics){var v=T.graphics;v.c()}for(e=0;e<y.length;e++)0<(E=y[e]).marginGiven?m+=E.marginGiven*k[O]/100:m+=E[D]*k[O]/100,u=(u=0<E[O]?E[O]:0<E.maxGiven?E.maxGiven:0<E.given?E.given:0)*k[O]/100,h=E[B]*k[P]/100,z=(k[P]-h)/2,f=C?qe.fit(E.object,z,m,h,u):qe.fit(E.object,m,z,u,h),"top"==E.valign?E.object.y=f.bY:"bottom"==E.valign&&(E.object.y=f.bY+f.bHeight-f.height),"left"==E.align?E.object.x=f.bX:"right"==E.align&&(E.object.x=f.bX+f.bWidth-f.width),T&&T.graphics&&(v.s("white").ss(2).r(f.bX,f.bY,f.bWidth,f.bHeight),v.s("#ff8203").sd([20,20]).r(f.bX,f.bY,f.bWidth,f.bHeight).sd()),p=g=0,0!=m&&m+u!=k[O]||(C?p=1:g=1),h==k[P]&&(C?g=1:p=1),""!=E.backgroundColor&&M.graphics.f(E.backgroundColor).r(f.bX,f.bY,f.bWidth+g,f.bHeight+p),m+=u}},this.resize(),T&&b.addChild(T),b.addChildAt(M,0),window.addEventListener("keydown",n),this.disable=function(){S.active=!1,window.removeEventListener("keydown",n),T&&(T.alpha=0)},this.enable=function(){S.active=!0,window.addEventListener("keydown",n),S.resize(),T&&(T.alpha=1)},this.removeShape=function(){T&&(T.graphics.clear(),b.removeChild(T),T=null,T=!1),window.removeEventListener("keydown",n)},this.addShape=function(e,t){S.removeShape(),T=e,window.addEventListener("keydown",n),b.addChild(T),S.resize()},this.dispose=function(){return S.removeShape(),!0}}}else zog("zim controls - Layout(): holder must have bounds set or provide a scalingObject with bounds");else zog("zim controls - Layout(): please provide an object with bounds set that holds the objects being laid out");function Y(){for(var e=0,t=0;t<y.length;t++)((E=y[t]).given=0)==E[O]&&(e+=E.object.getBounds()[O]);for(t=0;t<y.length;t++)0==(E=y[t])[O]&&(E.given=E.object.getBounds()[O]/e*L)}function n(e){e||(e=event),T&&String.fromCharCode(e.keyCode)==t.toUpperCase()&&(T.visible=!T.visible,T.stage&&T.stage.update())}},qe.extend(qe.Layout,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),qe.LayoutManager=function(){z_d("81");var t=this;this.items=[],this.add=function(e){t.items.push(e)},this.resize=function(){for(var e=0;e<t.items.length;e++)t.items[e].resize()},this.disable=function(){for(var e=0;e<t.items.length;e++)t.items[e].disable()},this.enable=function(){for(var e=0;e<t.items.length;e++)t.items[e].enable()},this.dispose=function(){for(var e=0;e<t.items.length;e++)t.items[e].removeShape();return!0}},qe.Tile=function(e,t,o,n,i,r,a,s,l){var c;if(c=zob(qe.Tile,arguments,"obj, cols, rows, count, spacingH, spacingV, mirrorH, mirrorV, snapToPixel",this))return c;z_d("66.5"),this.zimContainer_constructor(),this.type="Tile",zot(t)&&(t=1),zot(o)&&(o=1),0==n&&(n=null,zon&&zog("ZIM Tile() - count parameter of 0 is ignored - see docs")),zot(i)&&(i=0),zot(r)&&(r=0),zot(a)&&(a=!1),zot(s)&&(s=!1),zot(l)&&(l=!0),l&&(e.stage?e.stage.snapToPixelEnabled=!0:zimDefaultFrame&&(zimDefaultFrame.stage.snapToPixelEnabled=!0));var d,u,h=this,f=0,g=0,p=0;e:for(var m=0;m<o;m++){for(var z=g=u=0;z<t;z++){if(f++,!zot(n)&&n<f)break e;var v=(d=zik(e).clone()).width,b=d.height;u<b&&(u=b),d.snapToPixel=l,this.addChild(d),a&&z%2==1?(d.scaleX=-d.scaleX,d.x=g+v-2*d.getBounds().x*d.scaleX):d.x=g,s&&m%2==1?(d.scaleY=-d.scaleY,d.y=p+b-2*d.getBounds().y*d.scaleY):d.y=p,g+=v+i}p+=u+r}this.clone=function(){return h.cloneProps(new qe.Tile(e,t,o,n,i,r,a,s,l))}},qe.extend(qe.Tile,qe.Container,"clone","zimContainer",!1),qe.Parallax=function(e,t,a,i){var o;if(o=zob(qe.Parallax,arguments,"layers, damp, auto, stage",this))return o;if(z_d("68"),zot(i))if(e&&e[0]&&e[0].obj&&e[0].obj.stage)i=e[0].obj.stage;else{if(!zimDefaultFrame)return;i=zimDefaultFrame.stage}a=!!zot(a);var s=i.getBounds().width,l=i.getBounds().height,n=this,c=zot(t)?.1:t;this.addLayer=function(e){if(!(zot(e.obj)||zot(e.prop)||zot(e.propChange))){var t={obj:e.obj,prop:e.prop};t[t.prop]=e.propChange,zot(e.input)&&(e.input="mouseX"),t.input=e.input,t.split=zot(e.split)?!("mouseX"!=e.input||!a):e.split;var o=zot(e.inMin)?0:e.inMin,n=zot(e.inMax)?"mouseX"==e.input||"scrollX"==e.input?s:l:e.inMax,i=zot(e.factor)?1:e.factor,r=!zot(e.integer)&&e.integer;return t["p_"+t.prop]=new qe.ProportionDamp(o,n,0,t[t.prop],c,i,r),"scale"==t.prop?t["s_"+t.prop]=t.obj.scaleX:"frame"==t.prop?t["s_"+t.prop]=t.obj.currentFrame:t["s_"+t.prop]=t.obj[t.prop],zot(e.immediate)||t["p_"+t.prop].immediate(e.immediate),d.push(t),d.length-1}},this.removeLayer=function(e){if(!zot(e)){var t=d[e];t["p_"+t.prop].dispose(),d.splice(e,1)}},this.immediate=function(e){for(var t,o=0;o<d.length;o++)(t=d[o])["p_"+t.prop].immediate(e[o])},this.dispose=function(){return d=null,a&&qe.Ticker.remove(u),!0},e=zot(e)?[]:e;for(var d=[],r=0;r<e.length;r++)this.addLayer(e[r]);if(a)var u=qe.Ticker.add(function(e){n.step()},i);this.step=function(e){for(var t,o,n=0;n<d.length;n++)t=d[n],zot(e)?"mouseX"==t.input?o=i.mouseX:"mouseY"==t.input?o=i.mouseY:"scrollX"==t.input?o=qe.scrollX():"scrollY"==t.input&&(o=qe.scrollY()):o=e,"scale"==t.prop?t.obj.scaleX=t.obj.scaleY=t["s_"+t.prop]+t["p_"+t.prop].convert(o):"frame"==t.prop?t.obj.gotoAndStop(t["s_"+t.prop]+t["p_"+t.prop].convert(o)):(t.obj[t.prop]=t["s_"+t.prop]+t["p_"+t.prop].convert(o),t.split&&(t.obj[t.prop]-=t[t.prop]/2))},Object.defineProperty(n,"damp",{get:function(){return c},set:function(e){var t;c=e;for(var o=0;o<d.length;o++)(t=d[o])["p_"+t.prop].damp=c}})},qe.Scroller=function(e,t,o,n,i,r,a){var s;if(s=zob(qe.Scroller,arguments,"backing, speed, direction, horizontal, gapFix, stage, container",this))return s;z_d("69"),this.cjsEventDispatcher_constructor();var l=this.backing1=e;if(!zot(l)&&l.getBounds){var c=this.backing2=e.clone();zot(n)&&(n=!0),zot(i)&&(i=0);var d=this;this.speed=zot(t)?1:t;var u=this.baseSpeed=this.speed;this.direction=zot(o)?1:o;var h=n?l.scaleX:l.scaleY;if(l.getBounds())if(r||l.stage)if(l.parent)if(l.parent.addChildAt(c,l.parent.getChildIndex(l)),r=r||l.stage,zot(a)&&(a=r),a.getBounds()){var f,g,p=l.getBounds().width*h-i,m=l.getBounds().height*h-i;n?c.x=p:c.y=m;var z=!1,v=qe.Ticker.add(function(e){f||(f=a.getBounds().width,g=a.getBounds().height);if(0==d.speed||0==d.direction)return;n?(l.x-=d.speed*d.direction,l.x<c.x?c.x=l.x+p:c.x=l.x-p,0<d.direction*d.speed?c.x<0&&l.x<c.x?l.x=c.x+p:l.x<0&&c.x<l.x&&(c.x=l.x+p):c.x>f&&c.x>l.x?c.x=l.x-p:l.x>f&&l.x>c.x&&(l.x=c.x-p)):(l.y-=d.speed*d.direction,l.y<c.y?c.y=l.y+m:c.y=l.y-m,0<d.direction*d.speed?c.y<0&&l.y<c.y?l.y=c.y+m:l.y<0&&c.y<l.y&&(c.y=l.y+m):c.y>g&&c.y>l.y?c.y=l.y-m:l.y>g&&l.y>c.y&&(l.y=c.y-m))},r);this.paused=!1,this.pause=function(e,t){return zot(e)&&(e=!0),zot(t)&&(t=0),e?(u=d.speed,0<t?(z=!0,qe.animate({target:d,obj:{pausingSpeed:0},ticker:!1,time:t,call:function(){d.speed=0,d.paused=!0,z=!1,d.dispatchEvent("pause")}})):(z=!1,d.speed=0,d.paused=!0,setTimeout(function(){d.dispatchEvent("pause")},10))):(z=!1,0<t?qe.animate({target:d,obj:{pausingSpeed:u},ticker:!1,time:t,call:function(){d.speed=u,d.paused=!1,z=!1}}):(d.speed=u,d.paused=!1)),d},Object.defineProperty(d,"percentSpeed",{get:function(){return 0==d.baseSpeed?NaN:d.speed/d.baseSpeed*100},set:function(e){z||d.paused||(d.speed=d.baseSpeed*e/100)}}),Object.defineProperty(d,"pausingSpeed",{get:function(){return 0==d.baseSpeed?NaN:d.speed/d.baseSpeed*100},set:function(e){d.speed=d.baseSpeed*e/100}}),this.dispose=function(){return zon&&zog("bye from Scroller"),qe.Ticker.remove(v),!0}}else zog("zim display - Scroller(): please setBounds() on container or stage if no container");else zog("zim display - Scroller(): please add object to container or stage before adding to Scroller");else zog("zim display - Scroller(): please pass in stage parameter or add backing objects to stage to start");else zog("zim display - Scroller(): please setBounds() on backing objects")}},qe.extend(qe.Scroller,createjs.EventDispatcher,null,"cjsEventDispatcher"),qe.Dynamo=function(n,e,t,o,i,r,a,s,l){var c;if(c=zob(qe.Dynamo,arguments,"sprite, speed, label, startFrame, endFrame, update, reversible, flip, flipVertical",this))return c;z_d("69.2"),this.cjsEventDispatcher_constructor();var d=this.frames=n.parseFrames(t,o,i,!0);if(0!=d.length){this.totalFrames=d.length;var u=0;zot(e)&&(e=30),zot(a)&&(a=!0);var h=this.baseSpeed=this.speed=e;zot(r)&&(r=!1),zot(s)&&0==a&&(s=!0);var f,g,p,m,z,v=this,b=Date.now(),y=!1;v.scaleX=n.scaleX,v.scaleY=n.scaleY,function e(){if(f=requestAnimationFrame(e),g=d[u].s,0!=v.speed&&0!=g&&(m=1e3/Math.abs(v.speed)*g,p=Date.now(),m<p-b)){b=p;var t=v.frame+(0<v.speed||!a?1:-1),o=!1;t>=d.length&&(o=!0,t=0),t<0&&(o=!0,t=d.length-1),v.frame=t,s&&(v.speed<0?n.scaleX=-v.scaleX:n.scaleX=v.scaleX),l&&(v.speed<0?n.scaleY=-v.scaleY:n.scaleY=v.scaleY),o&&v.dispatchEvent("loop"),v.dispatchEvent("change"),r&&n.stage&&n.stage.update(),zot(z)||z!=v.frame||(y=!1,v.speed=0,v.paused=!0,v.dispatchEvent("pause"))}}(),this.paused=!1,this.pause=function(e,t,o){return zot(e)&&(e=!0),zot(t)&&(t=0),e?(h=v.speed,zot(o)?0<t?(y=!0,qe.animate({target:v,obj:{pausingSpeed:0},ticker:!1,time:t,call:function(){y=!1,v.speed=0,v.paused=!0,v.dispatchEvent("pause")}})):(y=!1,v.speed=0,v.paused=!0,setTimeout(function(){v.dispatchEvent("pause")},10)):(y=!0,z=o)):(z=null,0<t?(y=!0,qe.animate({target:v,obj:{pausingSpeed:h},ticker:!1,time:t,call:function(){y=!1,v.speed=h,v.paused=!1}})):(y=!1,v.speed=h,v.paused=!1)),v},Object.defineProperty(v,"frame",{get:function(){return u},set:function(e){u=Math.round(e)%d.length;var t=d[u];zot(t)||(n.frame=t.f)}}),Object.defineProperty(v,"percentSpeed",{get:function(){return 0==v.baseSpeed?NaN:v.speed/v.baseSpeed*100},set:function(e){y||v.paused||(v.speed=v.baseSpeed*e/100)}}),Object.defineProperty(v,"pausingSpeed",{get:function(){return 0==v.baseSpeed?NaN:v.speed/v.baseSpeed*100},set:function(e){v.speed=v.baseSpeed*e/100}}),this.dispose=function(){cancelAnimationFrame(f)}}},qe.extend(qe.Dynamo,createjs.EventDispatcher,null,"cjsEventDispatcher"),qe.Accelerator=function(e){z_d("69.3"),this.cjsEventDispatcher_constructor();var s=this;this.paused=!1,this.items=[],this.paused=!1,this._percentSpeed=100,this.add=function(e){var t;t=Array.isArray(e)?e:[e];for(var o=0;o<t.length;o++)s.items.indexOf(t[o])<0&&t[o].pause&&s.items.push(t[o]);return s},e&&this.add(e),this.remove=function(e){var t,o;t=Array.isArray(e)?e:[e];for(var n=0;n<t.length;n++)0<=(o=s.items.indexOf(t[n]))&&s.items.splice(o,1);return s},this.pause=function(o,e,t){zot(o)&&(o=!0);var n=[];if(o){zot(t)||(e=null);for(var i=!1,r=0;r<s.items.length;r++)(zot(e)||!zot(t)||s.items[r].totalFrames)&&(!s.items[r].totalFrames||zot(e)&&zot(t))||(s.items[r].pause(!0,e,t),i=!0,n[r]=1,s.items[r].on("pause",function(){s.paused||(a(!0),s.paused=!0,s.dispatchEvent("pause"))},null,!0));i||(a(),s.paused=!0,setTimeout(function(){s.dispatchEvent("pause")},10))}else s.paused=!1,a();function a(e){for(var t=0;t<s.items.length;t++)1!=n[t]&&s.items[t].pause(o)}},Object.defineProperty(s,"percentSpeed",{get:function(){return s._percentSpeed},set:function(e){s._percentSpeed=e;for(var t=0;t<s.items.length;t++)s.items[t].percentSpeed=e}}),this.dispose=function(){for(var e=0;e<s.items.length;e++)s.items[e].dispose();return!0}},qe.extend(qe.Accelerator,createjs.EventDispatcher,null,"cjsEventDispatcher"),qe.Swiper=function(e,t,o,n,i,r,a,s,l,c,d){var u;if(u=zob(qe.Swiper,arguments,"swipeOn, target, property, sensitivity, horizontal, min, max, damp, integer, factor, pauseTime",this))return u;if(z_d("69.5"),this.cjsEventDispatcher_constructor(),!zot(e)&&e.getStage&&e.stage){if(!zot(t)){zot(n)&&(n=1),zot(i)&&(i=!0),zot(s)&&(s=.1),zot(l)&&(l=!1),zot(c)&&(c=1),zot(d)&&(d=200);var h,f,g,p,m,z,v=this,b=e,y=v.desiredValue=t[o];this.target=t,this.property=o;var w=!1;b.canvas?(p=b.on("stagemousedown",function(){w=!0,k(),m=b.on("stagemousemove",E),z=b.on("stagemouseup",function(){w=!1,b.off("stagemousemove",m),b.off("stagemouseup",z),v.dispatchEvent("swipeup")})}),g=b):(g=b.stage,M(),p=b.on("mousedown",k),m=b.on("pressmove",E),z=b.on("pressup",function(){w=!1,v.dispatchEvent("swipeup")}));var x=new qe.Damp(v.target[v.property],s),C=(v.target[v.property],0),T=null;v.target.swiperTicker=qe.Ticker.add(function(){y==C?y!=T&&(v.pauseTimeout&&v.pauseTimeout.clear(),T=y,v.pauseTimeout=qe.timeout(d,function(){v.dispatchEvent("swipepause"),v.pauseTimeout=null})):(T=null,C=y,v.pauseTimeout&&v.pauseTimeout.clear()),v.swiperMoving&&(v.target[v.property]=l?Math.round(x.convert(y)):x.convert(y),!w&&Math.abs(v.target[v.property]-y)<(zot(r)||zot(a)?1:Math.abs(a-r)/1e3)?(v.swiperMoving=!1,v.target[v.property]=y,v.immediate(v.target[v.property]),v.dispatchEvent("swipestop")):v.target[v.property])},g),this.immediate=function(e){x.immediate(e),v.target[v.property]=l?Math.round(e):e,v.desiredValue=y=e};var A=!0;Object.defineProperty(v,"enabled",{get:function(){return A},set:function(e){A!=e&&(e?function(){b.canvas?p=b.on("stagemousedown",p):(p=b.on("mousedown",p),m=b.on("pressmove",m),z=b.on("pressup",z));v.immediate(v.target[v.property]),v.target.swiperTicker=qe.Ticker.add(v.target.swiperTicker,g)}():S(),A=Boolean(e))}}),this.dispose=function(){S(),x=null}}}else zog("zim.Swiper() - please provide container on stage");function k(e){w=!0,h=i?e.stageX:e.stageY,f=v.target[v.property],v.dispatchEvent("swipedown")}function E(e){var t=h-(i?e.stageX:e.stageY);0<Math.abs(t)&&(v.swiperMoving=!0),y=f-t*n*c,zot(r)||(y=Math.max(y,r)),zot(a)||(y=Math.min(y,a)),v.desiredValue=y,v.dispatchEvent("swipemove")}function M(){b.off("mousedown",p),b.off("pressmove",m),b.off("pressup",z)}function S(){b.canvas?(b.off("stagemousedown",p),b.off("stagemousemove",m),b.off("stagemouseup",z)):M(),qe.Ticker.remove(v.target.swiperTicker)}},qe.extend(qe.Swiper,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),qe.MotionController=function(o,n,i,e,t,r,a,s,l,c,d,u,h,f,g,p,m){var z;if(z=zob(qe.MotionController,arguments,"container, target, type, speed, axis, rect, map, diagonal, damp, flip, rotate, constant, firstPerson, turnSpeed, moveThreshold, stickThreshold, localBounds",this))return z;if(z_d("69.7"),this.cjsEventDispatcher_constructor(),!zot(o)&&o.getStage)if(zot(o.stage))zog("zim Controller(): The Container must be on the stage");else{var v=o.stage;zot(n)&&(n=new qe.Container(1,1)),zot(e)&&(e=7),(zot(i)||"mousemove"!=i&&"keydown"!=i&&"gamebutton"!=i&&"gamestick"!=i&&"swipe"!=i&&"manual"!=i)&&(i="mousedown"),zot(t)&&(t="both"),"keydown"==i&&zot(a)&&(a=[[65,37],[68,39],[87,38],[83,40]]),"gamebutton"==i&&zot(a)&&(a=h?[14,15,qe.GamePad.RT,qe.GamePad.LT]:[14,15,12,13]),"gamestick"==i&&zot(a)&&(a=h?[[0,2],[0,2],[1],[1]]:[0,0,1,1]),"gamestick"==i&&zot(a)&&(a=[0,0,1,1]),zot(s)&&(s=!0),"horizontal"!=t&&"vertical"!=t||(s=!1),zot(l)&&(l="keydown"==i||"gamebutton"==i?1:.1),zot(h)&&(h=!1),zot(f)&&(f=.4*e),zot(g)&&(g=4),zot(p)&&(p=.2);var b=this;this.dirX=0,this.dirY=0,this.speed=e,this.turnSpeed=f,this.axis=t,this.target=n,this.moveThreshold=g,this.stickThreshold=p;var y=b.speed,w=b.speed,x=0;b.rotation=0,b.x=this.target.x,b.y=this.target.y;var C=b.scaleX=n.scaleX;b.scaleY=n.scaleY;if("keydown"==i||"gamebutton"==i){for(var T=0;T<4;T++)Array.isArray(a[T])||(a[T]=[a[T]]);var A=[0,0,0,0],k=[],E=["X","X","Y","Y"],M=[-1,1,-1,1],S={dirX:0,dirY:0};if("keydown"==i)var j=frame.on("keydown",O);else var I=(X=b.gamepad=new qe.GamePad).on("buttondown",O);function O(e){var t,o="keydown"==i?e.keyCode:e.buttonCode;for(T=0;T<4;T++)if(-1<a[T].indexOf(o)){if(s||"both"!=b.axis||(S.dirX=S.dirY=0),S["dir"+E[T]]=M[T],A[T]=1,0==(t=k.indexOf(T)))return;return 0<t&&k.splice(t,1),void k.unshift(T)}}if(zot(u))if("keydown"==i)var P=frame.on("keyup",B);else var D=X.on("buttonup",B);function B(e){var t,o="keydown"==i?e.keyCode:e.buttonCode;for(T=0;T<4;T++)if(-1<a[T].indexOf(o)){if((A[T]=0)<=(t=k.indexOf(T))&&k.splice(t,1),"both"!=b.axis||s)S["dir"+E[T]]=-A[2*Math.floor(T/2)]+A[2*Math.floor(T/2)+1];else if(0<k.length){S["dir"+E[T]]=0;var n=k[0];S["dir"+E[n]]=M[n]}else S.dirX=S.dirY=0;return}}var L={rotation:0,speedX:b.speed,speedY:b.speed},Y=qe.Ticker.add(function(){if(h)K(S);else{var e=b.speed,t=b.speed;if("both"==b.axis&&0!=S.dirX&&0!=S.dirY){var o=J(S.dirX,S.dirY);e=o.speedX,t=o.speedY}"horizontal"!=b.axis&&"both"!=b.axis||(b.x+=e*S.dirX),"vertical"!=b.axis&&"both"!=b.axis||(b.y+=t*S.dirY),q()}},v)}else if("mousedown"==i||"mousemove"==i)mouseEvent=v.on("stage"+i,function(e){var t=o.globalToLocal(e.stageX,e.stageY);b.x=t.x,b.y=t.y,q()});else if("gamestick"==i){var X=this.gamepad=new qe.GamePad;for(T=0;T<4;T++)Array.isArray(a[T])||(a[T]=[a[T]]);L={rotation:0,speedX:b.speed,speedY:b.speed};var _=X.on("data",function(e){for(var t={dirX:0,dirY:0},o=0;o<a[0].length;o++){var n=e.axes[a[0][o]];if(Math.abs(n)>b.stickThreshold){t.dirX=n;break}}for(o=0;o<a[2].length;o++){n=e.axes[a[2][o]];if(Math.abs(n)>b.stickThreshold){t.dirY=n;break}}h?K(t):(b.x+=b.speed*t.dirX,b.y+=b.speed*t.dirY,q())})}else if("swipe"==i)var R=new qe.Swiper(v,b,"x",.8),F=new qe.Swiper(v,b,"y",.8,!1),W=R.on("swipemove",function(){q()});var N=this.x=this.target.x,G=this.y=this.target.y;this.dampX=new qe.Damp(N,l),this.dampY=new qe.Damp(G,l),this.dampR=new qe.Damp(this.target.rotation,l);var H=0,V=0,U=qe.Ticker.add(function(){if(r&&(b.x=qe.constrain(b.x,r.x,r.x+r.width),b.y=qe.constrain(b.y,r.y,r.y+r.height)),"horizontal"!=b.axis&&"both"!=b.axis||(b.dirX=qe.sign(b.x-N),Math.abs(b.x-N)<y?N=b.x:N+=b.dirX*y,b.target.x=b.dampX.convert(N)),"vertical"!=b.axis&&"both"!=b.axis||(b.dirY=qe.sign(b.y-G),Math.abs(b.y-G)<w?G=b.y:G+=qe.sign(b.y-G)*w,b.target.y=b.dampY.convert(G)),b.dirX!=H||b.dirY!=V){var e=new createjs.Event("change");if(b.dirX!=H){var t=["left",null,"right"];e.dir=t[b.dirX+1],H=b.dirX,"horizontal"!=c&&"both"!=c||(b.scaleX=n.scaleX=b.dirX?Math.abs(n.scaleX)*b.dirX:n.scaleX,x=0!=C&&-1==Math.round(b.scaleX/C)?180:0)}else{t=["up",null,"down"];e.dir=t[b.dirY+1],V=b.dirY,"vertical"!=c&&"both"!=c||(b.scaleY=n.scaleY=b.dirY?Math.abs(n.scaleY)*b.dirY:n.scaleY)}b.dispatchEvent(e)}b.movingX=Math.abs(N-b.target.x)>b.moveThreshold,b.movingY=Math.abs(G-b.target.y)>b.moveThreshold,b.moving=b.movingX||b.movingY,d&&!zot(b.rotation)&&(b.target.rotation=b.dampR.convert(b.rotation))},v);this.immediate=function(e,t,o){!zot(e)&&b.dampX&&(b.dampX.immediate(e),b.x=b.target.x=N=e,R&&R.immediate(e)),!zot(t)&&b.dampY&&(b.dampY.immediate(t),b.y=b.target.y=G=t,F&&F.immediate(t)),!zot(o)&&b.dampR&&(b.dampR.immediate(o),b.rotation=b.target.rotation=o)},this.convert=function(e,t){zot(e)||(b.x=e),zot(t)||(b.y=t),q()};var Z=!0;Object.defineProperty(b,"enabled",{get:function(){return Z},set:function(e){Z!=e&&(e?function(){"keydown"==i?(j=frame.on("keydown",j),P=frame.on("keyup",P),Y=qe.Ticker.add(Y,v)):"gamebutton"==i?(I=X.on("buttondown",I),D=X.on("buttonup",D),Y=qe.Ticker.add(Y,v)):"gamestick"==i?_=X.on("data",_):"swipe"==i?(R.enabled=!0,F.enabled=!0,W=R.on("swipemove",W)):"mousedown"!=i&&"mousemove"!=i||(mouseEvent=v.on("stage"+i,mouseEvent));U=qe.Ticker.add(U,v)}():$(),Z=Boolean(e))}}),this.dispose=function(){$(),X&&X.dispose(),R&&R.dispose(),F&&R.dispose()}}else zog("zim Controller(): Please pass in a reference to a container as first parameter");function K(e){L.rotation+=e.dirX*b.turnSpeed,b.rotation=L.rotation,L.speedX=Math.sin(L.rotation*Math.PI/180)*b.speed*-e.dirY,L.speedY=-Math.cos(L.rotation*Math.PI/180)*b.speed*-e.dirY,b.x+=L.speedX,b.y+=L.speedY}function q(){var e=J(b.x-b.target.x,b.y-b.target.y);if(y=e.speedX,w=e.speedY,d)if(b.rotation=e.angle,zot(b.rotation))b.rotation=b.target.rotation;else{b.rotation+=x;var t=Q(b.rotation),o=b.target.rotation=Q(b.target.rotation);180<Math.abs(t-o)&&(t<o?o-=360:t-=360),b.dampR.immediate(o),b.target.rotation=o,b.rotation=t}}function Q(e){return(e%360+360)%360}function J(e,t){var o,n=b.speed,i=b.speed,r=Math.sqrt(Math.pow(e,2)+Math.pow(t,2));return 0<r&&(n=Math.abs(e)/r*b.speed,i=Math.abs(t)/r*b.speed,o=90-180*Math.atan2(e,t)/Math.PI),{speedX:n,speedY:i,angle:o}}function $(){"keydown"==i?(frame.off("keydown",j),frame.off("keyup",P),qe.Ticker.remove(Y)):"gamebutton"==i?(X.off("buttondown",I),X.off("buttonup",D),qe.Ticker.remove(Y)):"gamestick"==i?X.off("data",_):"swipe"==i?(R.enabled=!1,F.enabled=!1,R.off("swipemove",W)):"mousedown"!=i&&"mousemove"!=i||v.off("stage"+i,mouseEvent),qe.Ticker.remove(U)}},qe.extend(qe.MotionController,createjs.EventDispatcher,"enabled","cjsEventDispatcher"),qe.GamePad=function(){if(z_d("69.8"),this.cjsEventDispatcher_constructor(),!navigator.getGamepads)return this.error=!0,void(zon&&zog("zim.GamePad() - no browswer support"));var a;window.addEventListener("gamepadconnected",e),this.currentIndex=0;var s=this;function e(e){var t,o,n;s.connected=!0,t="gamepadconnected",o=e,(n=new createjs.Event(t)).index=o.gamepad.index,n.id=o.gamepad.id,n.buttons=o.gamepad.buttons,n.axes=o.gamepad.axes,s.dispatchEvent(n);var i=navigator.getGamepads()[s.currentIndex];s.lastData=[];for(var r=0;r<i.buttons.length;r++)s.lastData[r]=i.buttons[r].pressed;!function e(){if(a=requestAnimationFrame(e),s.data=navigator.getGamepads()[s.currentIndex],s.data){for(var t=s.buttons=[],o=0;o<s.data.buttons.length;o++)if(t[o]=s.data.buttons[o].pressed,t[o]!=s.lastData[o]){if(s.lastData[o]=t[o],t[o])var n=new createjs.Event("buttondown");else n=new createjs.Event("buttonup");n.buttonCode=o,n.button=l[o],s.dispatchEvent(n)}(n=new createjs.Event("data")).axes=s.axes=s.data.axes,n.buttons=s.buttons,s.dispatchEvent(n)}}()}var t=setInterval(function(){navigator.getGamepads&&navigator.getGamepads()[0]&&(s.connected||e(),clearInterval(t))},500);var o=window.addEventListener("gamepaddisconnected",function(e){e.gamepad.index==s.currentIndex&&(cancelAnimationFrame(a),connected=!1,s.dispatchEvent("gamepaddisconnected"))});this.dispose=function(){window.removeEventListener("gamepadconnected",e),window.addEventListener("gamepaddisconnected",o),cancelAnimationFrame(a),clearInterval(t),s.connected=!1}};for(var l=["A","B","X","Y","LB","RB","LT","RT","BACK","START","LS","RS","DPAD_UP","DPAD_DOWN","DPAD_LEFT","DPAD_RIGHT"],s=0;s<l.length;s++)qe.GamePad[l[s]]=s;var e=["LSX","LSY","RSX","RSY"];for(s=0;s<e.length;s++)qe.GamePad[e[s]]=s;return qe.extend(qe.GamePad,createjs.EventDispatcher,null,"cjsEventDispatcher"),qe.Emitter=function(p,m,z,t,e,o,n,i,r,a,s,l,v,b,c,d,u,h,f,g,y,w,x,C,T,A,k,E,M,S){var j;if(j=zob(qe.Emitter,arguments,"obj, width, height, interval, num, life, fade, shrink, decayTime, decayStart, trace, traceFadeTime, traceShiftX, traceShiftY, angle, force, gravity, wind, layers, animation, random, horizontal, vertical, sink, sinkForce, cache, events, startPaused, pool, poolMin",this))return j;z_d("69.9"),zot(p)&&(p=[]),zot(m)&&(m=300),zot(z)&&(z=300),zot(t)&&(t=20),"number"==typeof t&&(t=Math.max(10,t)),zot(e)&&(e=1),zot(s)&&(s=!1),zot(l)&&(l=r),zot(v)&&(v=0),zot(b)&&(b=0),zot(o)&&(o=1e3),zot(n)&&(n=!0),zot(i)&&(i=!s),zot(r)&&(r=1e3),zot(c)&&(c={min:0,max:360}),zot(d)&&(d=5),zot(u)&&(u=9.8),zot(h)&&(h=0),zot(f)&&(f="top"),zot(m)&&(m=100),zot(z)&&(z=100),zot(w)&&(w=!1),zot(x)&&(x=!1),!zot(C)&&zot(T)&&(T=10),zot(k)&&(k=!1),zot(E)&&(E=!1),zot(M)&&(M=!0),zot(S)&&(S=0),this.zimContainer_constructor(m,z),this.type="Emitter";var I=this;I.obj=p,I.interval=t,I.num=e,I.life=o,I.fade=n,I.shrink=i,I.decayTime=r,I.decayStart=a,I.trace=s,I.traceFadeTime=l,I.traceShiftX=v,I.traceShiftY=b,I.angle=c,I.force=d,I.gravity=u,I.wind=h,I.layers=f,I.animation=g,I.random=y,I.horizontal=w,I.vertical=x,I.sink=C,I.sinkForce=T,I.events=k,I.startPaused=E,I.pool=M,I.poolMin=S,I.particlesEmitted=0;var O,P,D=[],B=0,L=0;function Y(e){if(I.events&&X("fizzed",e),(e.trace?e.getChildAt(0).endSpurt:e.endSpurt)&&(X("spurtfizzed",e),I.spurting=!1),I.pool&&"end"!=e.pooled)return e.pooled||(e.pooled=!0,D.push(e)),void(e.visible=!1);I.removeChild(e),I.trace&&e.uncache(),e=null}function X(e,t){var o=new createjs.Event(e);o.particle=t.trace?t.getChildAt(0):t,I.dispatchEvent(o)}function _(e){I.pause(),I.spurtCount=I.spurtNum=null,X("spurted",e),e.endSpurt=!0}qe.added(I,function(e){P=e,zot(A)&&(A=!P.isWebGL&&qe.mobile());A&&(P.snapToPixelEnabled=!0);if(P){w||x||I.centerReg(),I.zimInterval=qe.interval(I.interval,function(){var f,g;I.startPaused?I.pause():(p=Array.isArray(I.obj)?I.obj:[I.obj]).length<=0||(Array.isArray(I.interval)?(I.interval.sort(e),f=I.interval[0]):f=I.interval.constructor=={}.constructor?I.interval.min:I.interval,Array.isArray(I.num)?(I.num.sort(e),g=I.num[I.num.length-1]):g=I.num.constructor=={}.constructor?I.num.max:I.num,qe.loop(zik(I.num),function(){if(0<I.decayTime){var e={};I.shrink&&(e.scale=0),I.fade&&(e.alpha=0)}if(I.pool&&0<D.length&&L>=Math.max(I.poolMin,(I.life/f+5)*g)){var o=D[B++%D.length];o.visible=!0;var n=o.trace?o.getChildAt(0):o;if(n.emitShape){var t=n.template;n.graphics.c().s(t.s?zik(t.s):null).ss(t.ss?zik(t.ss):null).sd(t.sd?zik(t.sd):null,t.offset?zik(t.offset):null)}o.trace&&o.updateCache(),"top"==I.layers?n.emitShape?o.addTo(I):o.centerReg(I):n.emitShape?o.addTo(I,!0,"bottom"==I.layers?0:qe.rand(I.numChildren)):o.centerReg(I,"bottom"==I.layers?0:qe.rand(I.numChildren)),o.alpha=1,o.scaleX=1,o.scaleY=1,n.alpha=n.originalAlpha,n.scaleX=n.originalScaleX,n.scaleY=n.originalScaleY,n.endSpurt=!1}else{L++,I.trace&&((o=new qe.Container(m,z)).trace=!0);var i=zik(qe.shuffle(p)[0]);if("shape"==i.type){var t=i,n=new qe.Shape(1,1);n.emitShape=!0,n.template=t,n.graphics.s(t.s?zik(t.s):null).ss(t.ss?zik(t.ss):null).sd(t.sd?zik(t.sd):null,t.offset?zik(t.offset):null),I.trace?n.addTo(o):"top"==I.layers?n.addTo(I):n.addTo(I,"bottom"==I.layers?0:qe.rand(I.numChildren))}else{var n=i.clone();n.centerReg||zimify(n),I.trace?n.centerReg(o).pos(-1e3,-1e3):"top"==I.layers?n.centerReg(I):n.centerReg(I,"bottom"==I.layers?0:qe.rand(I.numChildren))}I.trace&&("top"==I.layers?o.addTo(I):o.addTo(I,"bottom"==I.layers?0:qe.rand(I.numChildren)),o.cache(v,b,m,z)),I.trace||(o=n),(o.particle=n).originalAlpha=n.alpha,n.originalScaleX=n.scaleX,n.originalScaleY=n.scaleY}I.currentParticle=n,I.particlesEmitted++,o.particleNormal=!0,o.particleDecaying=!1,o.particleFizzing=!1;var r=zik(I.angle),a=zik(I.force),s=a*Math.cos(r*Math.PI/180),l=a*Math.sin(r*Math.PI/180);n.info={position:{x:m/2,y:z/2},velocity:{x:s,y:l}},I.horizontal&&(n.info.position={x:qe.rand(0,m),y:I.vertical?z/2:0}),I.vertical&&(n.info.position={x:I.horizontal?m/2:0,y:qe.rand(0,z)}),n.emitShape?n.graphics.mt(n.info.position.x,n.info.position.y):n.pos(n.info.position.x,n.info.position.y),I.random&&qe.loop(I.random,function(e,t){val=zik(t),"scale"==e?n.sca(val):("x"==e?n.info.position.x=I.horizontal||I.vertical?val:val+m/2:"y"==e&&(n.info.position.y=I.horizontal||I.vertical?val:val+z/2),"x"!=e&&"y"!=e||!n.emitShape||n.graphics.mt(n.info.position.x,n.info.position.y),n[e]=val,n.emitShape&&n.pos(0,0))}),A&&!n.emitShape&&n.cache(n.getBounds().x-10,n.getBounds().y-10,n.getBounds().width+20,n.getBounds().height+20);var c,d=!n.emitShape&&I.shrink;if(0<I.decayTime&&(I.fade||d||I.trace&&0<I.traceFadeTime)){if(I.trace&&0<I.traceFadeTime&&o.animate({obj:{alpha:0},time:I.traceFadeTime,wait:I.life-I.traceFadeTime,waitedCall:function(e){e.particleNormal=!1,e.particleFizzing=!0},call:Y,override:!1,id:"decay"}),I.fade||d){var u={};I.fade&&(u.alpha=0),d&&(u.scaleX=0,u.scaleY=0),n.animate({obj:u,time:I.decayTime,wait:zot(I.decayStart)?I.life-I.decayTime:I.decayStart,waitedCall:function(e){e.parent!=I&&(e=e.parent),e.particleNormal=!1,e.particleDecaying=!0},call:function(e){var t;I.events&&X("decayed",e),e.endSpurt&&X("spurtdecayed",e),I.trace&&0<I.traceFadeTime||(zot(I.decayStart)||I.decayStart+I.decayTime>I.life?Y(e.parent.trace?e.parent:e):(t=o,qe.timeout(I.life-(I.decayStart+I.decayTime),function(){Y(t)})))},override:!1,id:"decay"})}}else 0<I.life&&((c=o).timeOut=qe.timeout(I.life,function(){Y(c)}));if(I.events&&X("emitted",o),function(e){if(zot(I.spurtCount)&&zot(I.spurtNum))return;I.spurtCount++,I.spurtCount>=I.spurtNum&&_(e)}(n),I.animation){var h=zik(I.animation);zot(h.override)&&(h.override=!1),n.animate(qe.copy(h))}}));function e(e,t){return e-t}},null,!0);O=I.emitterTicker=qe.Ticker.add(function(){qe.loop(I,function(e){if(e.trace){var t=e;e=e.getChildAt(0)}var o=e.info,n=0,i=0;if(!zot(I.sink)){var r=I.localToGlobal(o.position.x,o.position.y);if(I.sink.parent&&I.sink.parent.localToGlobal)var a=I.sink.parent.localToGlobal(I.sink.x,I.sink.y);else a=new createjs.Point(zik(I.sink.x),zik(I.sink.y));var s=qe.angle(r.x,r.y,a.x,a.y),n=I.sinkForce*Math.cos(s*Math.PI/180),i=I.sinkForce*Math.sin(s*Math.PI/180)}var l=I.wind+n,c=I.gravity+i;o.velocity.x+=l*frameRate,o.velocity.y+=c*frameRate,o.position.x+=o.velocity.x*frameRate*100,o.position.y+=o.velocity.y*frameRate*100,e.emitShape?e.graphics.lt(o.position.x,o.position.y):(e.x=o.position.x,e.y=o.position.y),I.trace&&t&&t.updateCache(e.emitShape?null:"source-over")})},P),frameRate=1/qe.Ticker.framerate}}),Object.defineProperty(I,"interval",{get:function(){return t},set:function(e){t=e,I.zimInterval&&(I.zimInterval.time=t)}}),this.spurting=!1,this.spurt=function(e,t,o){var n;if(n=zob(I.spurt,arguments,"num, time, restart"))return n;zot(t)||(qe.timeout(zik(t),function(){_(I.currentParticle)}),I.spurting=!0),zot(e)||(I.spurtNum=zik(e),I.spurtCount=0,I.spurting=!0),I.pause(!1,o,null,!0)},this.clearPool=function(){qe.loop(I,function(e){e.pooled="end",e.visible||I.removeChild(e)},!0),B=L=0,D=[]},I.startPaused||(this.paused=!1),this.pause=function(e,t,o,n){if(I.startPaused=null,zot(e)&&(e=!0),zot(t)&&(t=!1),zot(o)&&(o=!1),e){if(I.paused)return I;o&&(O&&qe.Ticker.remove(O),qe.loop(I,function(e){e.pauseAnimate(),e.trace&&e.getChildAt(0).pauseAnimate(),e.timeOut&&e.timeOut.pause()})),I.zimInterval.pause(),I.paused=!0}else{if(!I.paused)return I;t&&(qe.loop(I,function(e){e.stopAnimate(),e.timeOut&&e.timeOut.clear(),e.trace&&e.getChildAt(0).pauseAnimate()}),I.removeAllChildren()),P&&O&&!qe.Ticker.has(P,O)&&(qe.Ticker.add(O,P),qe.loop(I,function(e){e.pauseAnimate(!1),e.timeOut&&e.timeOut.pause(!1),e.trace&&e.getChildAt(0).pauseAnimate(!1)})),I.zimInterval.pause(!1,n),I.paused=!1}return I},this.resize=function(e,t){zot(e)||(m=e),zot(t)||(z=t),I.setBounds(0,0,m,z),w||x||I.centerReg(),I.clearPool()},this.clone=function(){var e;return e=Array.isArray(I.obj)||I.obj.constructor=={}.constructor?qe.copy(I.obj):I.obj.clone?I.obj.clone():I.obj,I.cloneProps(new qe.Emitter(e,m,z,I.interval,I.num,I.life,I.fade,I.shrink,I.decayTime,I.decayStart,I.trace,I.traceFadeTime,I.traceShiftX,I.traceShiftY,I.angle,I.force,I.gravity,I.wind,I.layers,I.animation,qe.copy(I.random),I.horizontal,I.vertical,I.sink,I.sinkForce,A,I.events,E,I.pool,I.poolMin))},this.dispose=function(){return O&&qe.Ticker.remove(O),qe.loop(I,function(e){e.stopAnimate()}),I.zimInterval.clear(),!0}},qe.extend(qe.Emitter,qe.Container,"clone","zimContainer",!1),qe.SoundWave=function(e,r,a,t,o,n,s,i,l,c){var d;if(d=zob(qe.SoundWave,arguments,"num, input, include, smoothing, min, max, operation, baseline, magnify, reduce",this))return d;z_d("69.95"),zot(e)&&(e=120),zot(r)&&(r="mic"),zot(a)&&(a=.1171875),zot(t)&&(t=.85),zot(o)&&(o="mic"==r?-80:-100),zot(n)&&(n="mic"==r?-40:-10),zot(s)&&(s=function(e,t){return e*(.5+1*t/Math.pow(qe.SoundWave.bufferLength,.95))}),zot(i)&&(i="mic"==r?0:30),zot(l)&&(l="mic"==r?1:10),zot(c)&&(c=0),qe.SoundWave.bufferLength=1024,_num=e;var u=this;u.baseline=i,u.magnify=l,u.reduce=c;var h=new(window.AudioContext||window.webkitAudioContext),f=u.analyser=h.createAnalyser();if(f.minDecibels=o,f.maxDecibels=n,f.smoothingTimeConstant=t,Object.defineProperty(this,"smoothing",{get:function(){return f.smoothingTimeConstant},set:function(e){f.smoothingTimeConstant=e}}),Object.defineProperty(this,"num",{get:function(){return _num},set:function(e){_num=e,(m=Math.floor(a*qe.SoundWave.bufferLength/_num))<1&&zog("ZIM SoundWave: num is too big")}}),"mic"==r)return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,void(navigator.getUserMedia?navigator.getUserMedia({audio:!0},function(e){z(u.source=h.createMediaStreamSource(e))},function(e){zog("ZIM SoundWave: Error occured: "+e)}):zog("ZIM SoundWave: Sorry, mic not supported"));if(r.type&&"sound"==r.type)zog("ZIM SoundWave: pass in the result of a zim.asset('somesound').play() for the input");else{if(r.playbackResource)var g=r.playbackResource,p=h.createMediaElementSource(g);else g=r,p=h.createMediaElementSource(g);var m;z(p)}function z(e){if(e.connect(f),"mic"!=r&&f.connect(h.destination),f.fftSize=2*qe.SoundWave.bufferLength,(m=Math.floor(a*qe.SoundWave.bufferLength/_num))<1)zog("ZIM SoundWave: include param is too small or num param is too big");else{var t=f.frequencyBinCount,i=new Uint8Array(t);u.calculate=function(){f.getByteFrequencyData(i);var e=i.map(s);if(1==m)return e;for(var t=[],o=0,n=0;n<=a*qe.SoundWave.bufferLength;n++)o+=e[n],0!=n&&n%m==0&&(t.push(Math.max(0,(o/m-u.baseline)*u.magnify-u.reduce)),o=0);return"mic"!=r&&(t[0]*=.75,t[1]*=.85,t[2]*=.9,t[t.length-2]*=.8,t[t.length-1]*=.75),t[t.length-1]*=1.3,t[t.length-2]*=1.2,t[t.length-3]*=1.1,t},setTimeout(function(){u.dispatchEvent("ready")},50)}}},qe.extend(qe.SoundWave,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),qe.Portal=function(t,o){var e;if(e=zob(qe.Portal,arguments,"obj, lands",this))return e;if(z_d("69.96"),!zot(t)&&t.stage){var n=this,i=o&&o.numChildren&&0<o.numChildren;if(i){var r=o.getChildAt(o.numChildren-1),a=o.getChildAt(o.numChildren-2);o.setChildIndex(a,o.numChildren-1),a.setMask(t)}t.on(mobile()?"mousedown":"mouseover",function(){n._enabled&&(i&&s(),n.dispatchEvent("enter"))}),t.on(mobile()?"pressup":"mouseout",function(){n._enabled&&n.dispatchEvent("exit")}),Object.defineProperty(this,"portal",{get:function(){return t},set:function(e){!zot(e)&&e.stage||!zon?a.setMask(t):zog("zim.Portal() - please provide a Display Object to act as the portal")}}),Object.defineProperty(this,"currentLand",{get:function(){return r},set:function(e){if(o.contains(e))for(;e!=r;)s()}}),Object.defineProperty(this,"nextLand",{get:function(){return a},set:function(e){zon&&zog("zim.Portal() - nextLand is read only - remake Portal to change")}}),this._enabled=!0,Object.defineProperty(n,"enabled",{get:function(){return n._enabled},set:function(e){n._enabled=e}}),this.dispose=function(){}}function s(){o.setChildIndex(r,0),r=a,a=o.getChildAt(o.numChildren-2),o.setChildIndex(a,o.numChildren-1),r.setMask(null),a.setMask(t),t.stage.update()}},qe.extend(qe.Portal,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),qe.VR=function(o,n,i,r,a,e,s,t,l,c,d,u){var h;if(h=zob(qe.VR,arguments,"content, angle, distance, parallax, parallaxAngle, damp, parallaxDamp, startAngle, negativeParallax, boundaryMarkers, swiper, holder",this))return h;if(z_d("69.98"),this.type="VR",zimDefaultFrame){var f=zimDefaultFrame;if(zot(u)||!u.getBounds||!u.getBounds().width)u=f.stage;zot(n)&&(n=0),zot(i)&&(i=100),zot(e)&&(e=.5),zot(r)&&(r=0),zot(a)&&(a=60),zot(s)&&(s=.1),zot(t)&&(t=0),zot(l)&&(l=!1),zot(c)&&(c=!0),zot(d)&&(d=!0),this.angle=n,this.currentAngle=t,qe.mobile()&&(d=!1);var g=this,p=u.width,m=u.height;g.zimContainer_constructor();var z=g.left=new qe.Container(p/2,m),v=new qe.Rectangle(p/2,m,"rgba(0,0,0,.01)");z.addChild(v);var b=g.right=z.clone();g.addChild(z,b),b.x=p/2;var y=g.contentLeft=g.content=o,w=g.contentRight=o.clone();if(0!=t)var x=setTimeout(H,100);else H();var C=[],T=[];if(V(y,w),U(C,"left"),U(T,"right"),0!=n&&0!=i){var A=new qe.Damp(180+t,e);A.immediate(180+t);var k=!1,E=!1;function M(e){g.currentAngle=e;var t=-g.currentAngle*i/n;if(g.contentLeft.x=t,g.contentRight.x=t,Math.round(g.currentAngle)<=-n/2&&!k)(o=new createjs.Event("boundaryout")).boundary="left",k=!0,g.dispatchEvent(o);else if(Math.round(g.currentAngle)>=n/2&&!E){(o=new createjs.Event("boundaryout")).boundary="right",E=!0,g.dispatchEvent(o)}else if(Math.round(g.currentAngle)>-n/2&&Math.round(g.currentAngle)<n/2){var o=new createjs.Event("boundaryin");k?(o.boundary="left",g.dispatchEvent(o),k=!1):E&&(o.boundary="right",g.dispatchEvent(o),E=!1)}}function S(e){var t=e.parent.localToLocal(e.vrStartX,0,u),o=e.vrParallaxDamp.convert("left"==e.vrChannel?g.contentLeft.x+t.x-p/4:g.contentRight.x+t.x-p/2-p/4);e.depth<=0&&!l&&(o=0),e.vrParallaxDistance=Math.max(-i/n*a/2,Math.min(i/n*a/2,o)),e.dep(e.depth)}f.on("deviceorientation",function(e){M(A.convert((180<e.rotation.z?-180:180)+e.rotation.z+t)-180)}),qe.Ticker.always()}if(0!=r&&0!=i){var j=new ProportionDamp(180-a/2,180+a/2,-a/2,a/2,s);if(j.immediate(180),0==n)function I(e,t){e.vrParallaxDistance=e.depth<=0&&!l?0:t,e.dep(e.depth)}function O(t){0!=n&&0!=i?(loop(C,S),loop(T,S)):(loop(C,function(e){I(e,t)}),loop(T,function(e){I(e,t)}))}f.on("deviceorientation",function(e){var t=0;0==n&&0!=r&&0!=i&&(t=j.convert((180<e.rotation.z?-180:180)+e.rotation.z)),O(t)}),qe.Ticker.always()}!d||0==i||0==n&&0==r||g.added(function(){var e={swipeAngle:0};g.swiper=new qe.Swiper({swipeOn:g,target:e,property:"swipeAngle",sensitivity:.2,damp:.05,factor:-1,min:-330,max:330});Ticker.add(function(){0!=n&&0!=i&&M(e.swipeAngle),0!=r&&0!=i&&O(j.convert(e.swipeAngle+180))})});var P=localStorage&&localStorage.zimEyeAdjust?Number(localStorage.zimEyeAdjust):0,D=P,B=!1;y.startRegX=y.regX,w.startRegX=w.regX;var L=this.adjuster=new qe.Container(800,300),Y=(v=L.backing=new qe.Rectangle(L.width,L.height,f.lighter).center(L).alp(1).sha("rgba(0,0,0,.2)",0,0,30),L.strip=new qe.Rectangle(L.width,L.height/3,f.white).center(L).alp(1),L.label=new qe.Label({text:"slide to adjust center of left and right",size:28,color:f.dark,align:"center",valign:"center"}).center(L).pos(null,50),L.close=new qe.Rectangle(50,50,f.light).addTo(L).mov(L.width-70,26)),X=new qe.Shape(-40,-40,80,80);X.graphics.f(f.dark).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),X.center(Y).sca(.3),Y.cursor="pointer",Y.on((zns?"mousedown"==qe.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){g.hideAdjuster(),F.currentValue=(F.max-F.min)/2+D,g.dispatchEvent("closed")});var _=new qe.Circle(30,f.dark).center(L).pos(L.width/4);_.shape.alpha=.2,new qe.Circle(12,f.dark).center(_);var R=new qe.Circle(30,f.dark).center(L).pos(L.width/4*3);R.shape.alpha=.2,new qe.Circle(12,f.dark).center(R);var F=L.slider=new qe.Slider({min:0,max:30,step:1,useTicks:!0}).centerReg(L).pos(null,L.height-40);F.currentValue=(F.max-F.min)/2+P;var W=new qe.Proportion(F.min,F.max,_.x-L.width/4,_.x+L.width/4,-1),N=new qe.Proportion(F.min,F.max,R.x-L.width/4,R.x+L.width/4);F.on("change",function(){_.x=W.convert(F.currentValue),R.x=N.convert(F.currentValue)}),new qe.Label("closer",24,null,f.silver).centerReg(L).pos(F.x-220,F.y),new qe.Label("farther",24,null,f.silver).centerReg(L).pos(F.x+220,F.y),(g.ok=new qe.Button({label:"OK",width:90,height:60,corner:0,color:f.blue,rollColor:f.green,shadowColor:-1}).centerReg(L).sca(.8).pos(L.width-58,F.y)).on((zns?"mousedown"==qe.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){localStorage&&(localStorage.zimEyeAdjust=F.currentValue-(F.max-F.min)/2),Z(),g.hideAdjuster(),g.dispatchEvent("saved"),g.dispatchEvent("closed")}),(g.zero=new qe.Button({label:">|<",width:90,height:60,corner:0,color:f.yellow,rollColor:f.green,shadowColor:-1}).centerReg(L).sca(.8).pos(58,F.y)).on((zns?"mousedown"==qe.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){F.currentValue=(F.max-F.min)/2,_.x=W.convert(F.currentValue),R.x=N.convert(F.currentValue)});var G=new Proportion(0,30,-u.width/4,u.width/4);Z(),this.showAdjuster=function(){if(B)return g;B=!0,_.x=W.convert(F.currentValue),R.x=N.convert(F.currentValue),D=F.currentValue-(F.max-F.min)/2,L.scaleTo(u).center(this),u.stage.update()},this.hideAdjuster=function(){if(!B)return g;B=!1,L.removeFrom(this),u.stage.update()},this.position=function(e,t,o){function n(e){e.vrStartX=t,e.vrParallaxDamp&&e.vrParallaxDamp.immediate(t),e.mov(t,o)}return n(e),n(e.vrMatch),e},this.register=function(e){if(!e.parent||!e.parent.vrMatch)return zon&&zog("ZIM VR() - please only register objects already inside content container"),e;var t=[],o=[];return V(e,e.clone().addTo(e.parent.vrMatch),t,o),U(t,"left"),U(o,"right"),e},0!=n&&0!=i&&c&&(g.boundaryRight=new Container,new Circle(24,f.light).addTo(g.boundaryRight).dep(-2),new Triangle(16,16,16,f.yellow,f.grey,null,null,-3).rot(-90).center(g.boundaryRight).dep(-6),g.boundaryRight.center(o).mov(i/2+24),g.boundaryLeft=new Container,new Circle(24,f.light).addTo(g.boundaryLeft).dep(-2),new Triangle(16,16,16,f.yellow,f.grey,null,null,-3).rot(90).center(g.boundaryLeft).dep(-6),g.boundaryLeft.center(o).mov(-i/2-24),g.register(g.boundaryRight),g.register(g.boundaryLeft)),this.remove=function(e){return loop(arguments,function(e,t){o.contains(t)&&(!function t(e){var o=C.indexOf(e);0<=C.indexOf(e)&&(C.splice(o,1),T.splice(o,1)),loop(e,function(e){t(e)})}(t),t.parent.removeChild(t),t.vrMatch.parent.removeChild(t.vrMatch))}),g},this.resize=function(){p=u.width,m=u.height,z.getChildAt(0).widthOnly=b.getChildAt(0).widthOnly=p/2,z.getChildAt(0).heightOnly=b.getChildAt(0).heightOnly=m,b.x=p/2,z.setBounds(0,0,p/2,m),b.setBounds(0,0,p/2,m),0!=t?(clearTimeout(x),x=setTimeout(H,100)):H(),L.scaleTo(u).center(this,null,!1)}}else zon&&zog("zim.VR() - please use ZIM Frame");function H(){y.addTo(z).setMask(z.getChildAt(0)).pos(null,(u.height-y.height)/2),w.addTo(b).setMask(b.getChildAt(0)).pos(null,(u.height-y.height)/2)}function V(e,o,n,i){((e.vrMatch=o).vrMatch=e).cacheCanvas&&o.cache(),e.dep&&!zot(e.depth)&&(C.push(e),T.push(o),zot(n)||n.push(e),zot(i)||i.push(o),o.dep(e.depth)),loop(e,function(e,t){V(e,o.getChildAt(t),n,i)})}function U(e,t){loop(e,function(e){e.vrChannel=t,e.vrStartX=e.x,0!=n&&0!=i&&(e.vrAngle=n,e.vrDistance=i),0!=r&&0!=i&&(e.vrParallax=r/100,(e.vrParallaxDistance=0)!=n&&(e.vrParallaxDamp=new qe.Damp(0,s))),e.dep(e.depth)})}function Z(){var e=G.convert(F.currentValue);y.regX=y.startRegX+e,w.regX=w.startRegX-e}},qe.extend(qe.VR,qe.Container,"clone","zimContainer",!1),zon&&zog("ZIM FRAME"),qe.Frame=function(r,e,t,o,n,i,a,s,l,c,d,u,h,f,g,p,m,z,v,b,y){var w;if(w=zob(qe.Frame,arguments,"scaling, width, height, color, rollover, touch, scrollTop, align, valign, canvasID, rollPerSecond, delay, canvasCheck, gpu, gpuObj, nextFrame, nextStage, allowDefault, outerColor, loadFailObj, sensors",this))return w;z_d("83"),this.cjsEventDispatcher_constructor();var L=this;if("undefined"==typeof zimDefaultFrame&&(zimDefaultFrame=this),zot(h)&&(h=!0),!!window.HTMLCanvasElement||!h){var x=qe.mobile();zot(r)&&(r="full"),zot(n)&&(n=!x),zot(i)&&(i=!0),zot(a)&&(a=!0),zot(s)&&(s="center"),zot(l)&&(l="center");var C="";zot(c)&&(zimDefaultFrame!=this?(C=qe.makeID(5),c="myCanvas"+C):c="myCanvas"),zot(d)&&(d=20),zot(u)&&(u=0),zot(f)&&(f=!1),zot(z)&&(z=!1),zot(b)&&(b="circles"),this.loadFailObj=b,zot(y)&&(y=!1);var Y,T=["fit","outside","full"];this.scale=1,this.x=0,this.y=0;var A,k,E,M,S,j=e,I=t,O=!1,P=!1;"interactive"===document.readyState||"complete"===document.readyState?setTimeout(function(){N()},200):document.addEventListener("DOMContentLoaded",N);var D,B=!1,X="full"==r&&"undefined"!=typeof InstallTrigger;window.addEventListener("resize",function(){X?B||(B=!0,S=qe.Ticker.update,qe.Ticker.update=!1,setTimeout(function(){B=!1,Y==zimDefaultFrame.stage&&(qe.Ticker.update=S)},40),setTimeout(function(){V(),Z()},20)):(V(),Z(),0<u&&x&&setTimeout(function(){V(),Z()},u))}),this.loadAssetsCount=0,this.assets={},this.loadAssets=function(e,s,t,o,n,i,r,a){if(!zot(e)){if(zot(e.src)){var l;if(l=zob(L.loadAssets,arguments,"assets, path, xhr, time, loadTimeout, outputAudioSprite, crossOrigin, fileType"))return l}if(zot(t)&&(t=!1),Array.isArray(e)||(e=[e]),0!=e.length){zot(o)&&(o=0),zot(n)&&(n=8e3),zot(i)&&(i=!1),zot(r)&&(r="anonymous");var c,d,u,h=!1,f=[],g=/\.([^.]+)$/i,p=[],m=[],z=0,v=!0;for(M=0;M<e.length;M++){if((c=e[M]).constructor=={}.constructor)if(c.audioSprite){P(c=(w=qe.copy(c)).src);var b,y=[];for(u=0;u<w.audioSprite.length;u++)b=w.audioSprite[u],y.push({id:b[0],startTime:Math.round(1e3*b[1]),duration:Math.round(1e3*(b[2]-b[1]))});delete w.audioSprite,w.data={audioSprite:y},i&&zog(JSON.stringify(w)),f.push(w)}else if(c.data&&c.data.audioSprite){var w;P(c=(w=qe.copy(c)).src),f.push(w)}else c.src.match(/fonts\.googleapis\.com/)?m.push(c):p.push(c);else{P(c);var x={src:c,loadTimeout:n};zot(a)||(x.type=a),f.push(x)}if(h&&v){var C=document.createElement("audio");C.setAttribute("src",(zot(s)?"":s)+c),document.body.appendChild(C),v=!1}}L.loadAssetsCount++,L.isLoading=!0;var T=new qe.Queue;if(T.isLoading=!0,(T.loadAssetsCount=0)<p.length){for(var A,k,E=[],M=0;M<p.length;M++)A={src:"url("+((k=p[M]).src.match(/^http/i)?"":s||"")+k.src+")"+(k.type?" format('"+k.type+"')":""),family:k.font},k.weight&&(A.weight=k.weight),k.style&&(A.style=k.style),E.push(A);(S=new createjs.FontLoader({src:E},!0)).on("complete",D),S.on("error",D),S.load(),T.loadAssetsCount++}if(0<m.length){var S;for(M=0;M<m.length;M++)A={src:(k=m[M]).src,type:"fontcss"},T.loadAssetsCount++,(S=new createjs.FontLoader(A,!0)).on("complete",D),S.on("error",D),S.load()}var j=Date.now(),I=new createjs.Event("complete");if(0<z){T.loadAssetsCount++;var O=T.preload=L.preload=new createjs.LoadQueue(t,s,r);h&&O.installPlugin(createjs.Sound),O.on("progress",function(e){T.dispatchEvent(e),L.dispatchEvent(e)}),O.on("error",function(e){T.dispatchEvent(e),L.dispatchEvent(e)}),O.on("fileload",function(e){var t,o=e.item,n=e.item.type;o.id.match(g);if(n&&"sound"==n){var i=[];if(o.data&&o.data.audioSprite)for(var r=0;r<o.data.audioSprite.length;r++)i.push(o.data.audioSprite[r].id);else i.push(o.id);for(r=0;r<i.length;r++)!function(){var o=i[r];t=L.assets[i[r]]={type:"sound",path:s,id:o,play:function(e){var t=createjs.Sound.play(o,e);return t.getStage=function(){return Y},t}}}()}else t=L.assets[o.id]="image"==n?new qe.Bitmap(e.result,e.result.width,e.result.height,o.id):e.result;var a=new createjs.Event("assetload");a.item=o,a.asset=t,T.dispatchEvent(e),L.dispatchEvent(a)}),L.preloadEvent=O.on("complete",function(e){I=e,T.loadAssetsCount--,0==T.loadAssetsCount&&B()}),O.loadManifest(f)}return T}}function P(e){z++,(d=e.match(g))&&0<=createjs.Sound.SUPPORTED_EXTENSIONS.indexOf(d[1])&&(h=!0)}function D(){T.loadAssetsCount--,0==T.loadAssetsCount&&B()}function B(){var e=Date.now();o=Math.max(0,o-(e-j)),setTimeout(function(){L.loadAssetsCount--,L.loadAssetsCount<=0&&(L.isLoading=!1),T.isLoading=!1,T.dispatchEvent(I),L.dispatchEvent(I)},o)}},this.asset=function(e){if(!zot(e)){if(L.assets[e])return L.assets[e];if("circles"==L.loadFailObj)var t=frame.makeCircles(14);else t=L.loadFailObj;return t&&(t.type="EmptyAsset",t.id=e,t.play=function(){if(zon)return zog("zim.Frame - asset("+e+") not found"),{}}),t}},Object.defineProperty(L,"stage",{get:function(){return Y},set:function(e){zog("zim.Frame(): stage is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(L,"width",{get:function(){return j},set:function(e){zog("zim.Frame(): width is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(L,"height",{get:function(){return I},set:function(e){zog("zim.Frame(): height is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(this,"color",{get:function(){return o},set:function(e){zot(o=e)?zid(c).style.backgroundColor="default":!zot(zid(c).style.backgroundColor=o)&&f&&Y.setClearColor(qe.convertColor(o))}}),Object.defineProperty(this,"outerColor",{get:function(){return D},set:function(e){D=e,zet("body").css({backgroundColor:D})}});var _=z;Object.defineProperty(L,"allowDefault",{get:function(){return _},set:function(e){e?(Y.preventSelection=!1,document.body.style.overflow="visible",L.zil&&(window.removeEventListener("keydown",L.zil[0]),window.removeEventListener("wheel",L.zil[1]),window.removeEventListener("DOMMouseScroll",L.zil[2]),L.zil=null)):(Y.preventSelection=!0,document.body.style.overflow="hidden",zot(L.zil)&&(L.zil=zil())),_=e}});var R=new createjs.Event("keydown");if(this.eventRemove=R.remove,window.addEventListener("keydown",function(e){e.remove=L.eventRemove,L.altKey=e.altKey,L.ctrlKey=e.ctrlKey,L.metaKey=e.metaKey,L.shiftKey=e.shiftKey,L.dispatchEvent(e)}),window.addEventListener("keyup",function(e){L.altKey=e.altKey,L.ctrlKey=e.ctrlKey,L.metaKey=e.metaKey,L.shiftKey=e.shiftKey,e.remove=L.eventRemove,L.dispatchEvent(e)}),y&&window.DeviceMotionEvent&&window.addEventListener("devicemotion",function(e){e.remove=L.eventRemove,L.dispatchEvent(e)}),y&&window.DeviceOrientationEvent){var F=0,W=0;window.addEventListener("deviceorientation",function(e){e.remove=L.eventRemove;var t=360-e.alpha;135<Math.abs(t-F)&&Math.abs(t-F)<225&&(W=0==W?180:0),F=t,e.rotation={x:e.beta,y:e.gamma,z:(t+W)%360},L.dispatchEvent(e)})}this.remakeCanvas=function(e,t){"full"!=r&&(zot(e)&&(e=j),zot(t)&&(t=I),zid(c)&&zid(c).parentNode.removeChild(zid(c)),j=e,I=t,G(),H())},this.dispose=function(){return window.removeEventListener("resize",V),Y.removeAllChildren(),Y.removeAllEventListeners(),zid(c)&&zid(c).parentNode.removeChild(zid(c)),!(L=Y=null)},this.orange="#f58e25",this.green="#acd241",this.pink="#e472c4",this.blue="#50c4b7",this.brown="#d1a170",this.yellow="#ebcb35",this.purple="#993399",this.red="#fb4758",this.silver="#999999",this.tin="#777777",this.grey="#555555",this.gray="#555555",this.lighter="#eeeeee",this.light="#cccccc",this.dark="#333333",this.darker="#111111",this.black="#000000",this.white="#ffffff",this.clear="rgba(0,0,0,0)",this.faint="rgba(0,0,0,.01)",this.makeCircles=function(e,t){zot(e)&&(e=100);var o=[L.orange,L.green,L.pink,L.blue,L.brown,L.dark];if(t){(i=new qe.Container).radius=e;for(var n=0;n<o.length;n++)i.addChild(new Circle(i.radius/o.length*(o.length-n),o[n]))}else{var i,r=(i=new qe.Shape).graphics;i.radius=e;for(n=0;n<o.length;n++)r.f(o[n]).dc(0,0,i.radius/o.length*(o.length-n));i.setBounds(-i.radius,-i.radius,2*i.radius,2*i.radius)}return i}}else setTimeout(function(){L.dispatchEvent("failed")},100);function N(){if(!P){if(P=!0,-1==T.indexOf(r)){if(zot(zid(E=r)))return void zog("zim.Frame - scaling: HTML tag with id="+r+" must exist");M=this.tag=zid(E),r=zot(e)||zot(t)?"tag":"inline",0==c.indexOf("myCanvas")&&(c=E+"Canvas")}L.canvasID=c,zot(e)&&(e=500),zot(t)&&(t=500),zot(v)||(L.outerColor=v),G(),H(),x?(a&&setTimeout(function(){window.scrollTo(0,0)},50),setTimeout(function(){V(),L.dispatchEvent("ready"),O=!0,Z()},100),100<u&&setTimeout(function(){V(),Z()},u)):(L.dispatchEvent("ready"),O=!0,Z())}}function G(){var e=L.canvas=document.createElement("canvas");e.setAttribute("id",c),e.setAttribute("tabindex",0),"full"==r||"tag"==r?(e.setAttribute("width",qe.windowWidth()),e.setAttribute("height",qe.windowHeight())):(e.setAttribute("width",j),e.setAttribute("height",I)),"tag"==r||"inline"==r?M.appendChild(e):document.body.appendChild(e),zot(o)||(e.style.backgroundColor=o),"full"!=r&&"fit"!=r&&"outside"!=r||(e.style.position="absolute",z||(document.body.style.overflow="hidden"))}function H(){V(),-1==T.indexOf(r)||z||(L.zil=zil()),Y=f?new qe.StageGL(c,g):new qe.Stage(c),!zot(o)&&f&&Y.setClearColor(qe.convertColor(o)),Y.setBounds(0,0,j,I),Y.width=j,Y.height=I,n&&Y.enableMouseOver(10),i&&createjs.Touch.enable(Y,!1,z),z&&(Y.preventSelection=!1),p&&(Y.nextStage=p.stage),m&&(Y.nextStage=m)}function V(){var e,t,o=zid(c),n=qe.windowWidth(),i=qe.windowHeight();if((A=L.orientation=i<n?"horizontal":"vertical")!=k&&(k=A,L.dispatchEvent("orientation")),x&&a&&setTimeout(function(){window.scrollTo(0,0)},100),o){if("fit"==r)L.scale=j/I<=n/i?i/I:n/j;else if("outside"==r)L.scale=j/I<=n/i?n/j:i/I;else{if("full"==r)return o.style.left=o.style.top="0px",o.width=j=n,o.height=I=i,Y&&(Y.setBounds(0,0,j,I),Y.width=j,Y.height=I,f&&Y.updateViewport(j,I)),void U();if("tag"==r)return j=""==M.style.width?M.getAttribute("width")||M.offsetWidth:M.style.width,I=""==M.style.height?M.getAttribute("height")||M.offsetHeight:M.style.height,Y&&(Y.setBounds(0,0,j,I),Y.width=j,Y.height=I,f&&Y.updateViewport(j,I)),M.style.overflow="hidden",o.width=j,o.height=I,o.style.left=o.style.top="0px",void U();if("inline"==r)return Y&&(Y.setBounds(0,0,j,I),Y.width=j,Y.height=I,f&&Y.updateViewport(j,I)),o.style.left=o.style.top="0px",void U()}t=I*L.scale,e=j*L.scale,o.style.width=e+"px",o.style.height=t+"px",L.x="left"==s?0:"right"==s?n-e:(n-e)/2,L.y="top"==l?0:"bottom"==l?i-t:(i-t)/2,o.style.left=L.x+"px",o.style.top=L.y+"px",U()}}function U(){if("outside"==r){var e=(zum(frame.canvas.style.width)-windowWidth())/2;"left"==s?(L.visibleLeft=0,L.visibleRight=windowWidth()/(windowWidth()+2*e)*j):"right"==s?(L.visibleLeft=2*e/(windowWidth()+2*e)*j,L.visibleRight=j):(L.visibleLeft=e/(windowWidth()+2*e)*j,L.visibleRight=(windowWidth()+e)/(windowWidth()+2*e)*j);var t=(zum(frame.canvas.style.height)-windowHeight())/2;"top"==l?(L.visibleTop=0,L.visibleBottom=windowHeight()/(windowHeight()+2*t)*I):"bottom"==l?(L.visibleTop=2*t/(windowHeight()+2*t)*I,L.visibleBottom=I):(L.visibleTop=t/(windowHeight()+2*t)*I,L.visibleBottom=(windowHeight()+t)/(windowHeight()+2*t)*I)}else L.visibleLeft=L.visibleTop=0,L.visibleRight=j,L.visibleBottom=I}function Z(){O&&(L.dispatchEvent("resize"),qe.OPTIMIZE||!zns&&OPTIMIZE||!Y||"full"!=r&&"tag"!=r||Y.update())}},qe.extend(qe.Frame,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),qe.Queue=function(){this.cjsEventDispatcher_constructor(),this.isLoading=!0},qe.extend(qe.Queue,createjs.EventDispatcher,null,"cjsEventDispatcher"),DISTILL=!1,qe.distillery=[],qe.distill=function(){!window.zns&&qe&&(qe.DISTILL||window.DISTILL)&&qe.distillery.push("83.3","83.35"),zog("zim.distill() - go to http://zimjs.com/distill and enter the following:"),zog(0<qe.distillery.length?qe.distillery.join(" "):"must set zim.DISTILL = true;")},qe.parseAudioSprite=function(e,t){if(z_d("83.25"),!(zot(e)||zot(e.resources)||zot(e.spritemap))){var o,n=e.resources[0],i=e.spritemap,r=[],a={src:n,data:{}};for(s in i)o=i[s],r.push({id:s,startTime:Math.round(1e3*o.start),duration:Math.round(1e3*(o.end-o.start))});return a.data.audioSprite=r,t&&zog(JSON.stringify(a)),a}},qe.previewAudioSprite=function(e,t,o){if(z_d("83.26"),!zot(e)){if(zot(t)&&(t=3),zot(o)){if(zot(zimDefaultFrame))return;o=zimDefaultFrame,stage=o.stage}var n=e,i=[],r=[];if(n.constructor=={}.constructor){n.resources&&(n=qe.parseAudioSprite(n)),n.audioSprite?loop(n.audioSprite,function(e){i.push(e[0].substr(0,t)),r.push(e[0])}):n.data&&n.data.audioSprite&&loop(n.data.audioSprite,function(e){i.push(e.id.substr(0,t)),r.push(e.id)});var a=new Tabs({tabs:i,width:stageW,currentEnabled:!0}).addTo(stage);return a.on("change",function(){o.asset(r[a.selectedIndex]).play()}),a}}},qe.svgToBitmap=function(e,t){if(z_d("83.27"),XMLSerializer||!zon){var o="string"==typeof e?e:(new XMLSerializer).serializeToString(e);o.match(/xmlns/i)||(o=o.replace(/svg /i,"svg  xmlns='http://www.w3.org/2000/svg' "));var n=self.URL||self.webkitURL||self,i=new Image;i.onload=function(){var e=new Bitmap(i);t(e)},i.src=n.createObjectURL(new document.Blob([o],{type:"image/svg+xml;charset=utf-8"}))}else zog("ZIM svgToBitmap() - sorry, not supported in Browser")},qe}(zim||{}))||{});window.zns||zimplify();